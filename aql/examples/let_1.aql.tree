(arangodb_query (data_query (data_access_query (for_op (for_in FOR (id_ u) IN (expr (literal (id_ users))) (let_list LET (expr (expr (literal (id_ friends))) = (expr ( (data_access_query (for_op (for_in FOR (id_ f) IN (expr (literal (id_ friends)))) (filter FILTER (expr (expr (expr (literal (id_ u))) . (expr (literal (id_ id)))) == (expr (expr (literal (id_ f))) . (expr (literal (id_ userId))))))) (return_expr RETURN (expr (literal (id_ f))))) ))) LET (expr (expr (literal (id_ memberships))) = (expr ( (data_access_query (for_op (for_in FOR (id_ m) IN (expr (literal (id_ memberships)))) (filter FILTER (expr (expr (expr (literal (id_ u))) . (expr (literal (id_ id)))) == (expr (expr (literal (id_ m))) . (expr (literal (id_ userId))))))) (return_expr RETURN (expr (literal (id_ m))))) )))))) (return_expr RETURN (expr (literal (object_literal { (pair_list (pair (string "user") : (expr (literal (id_ u)))) , (pair (string "friends") : (expr (literal (id_ friends)))) , (pair (string "numFriends") : (expr (id_ LENGTH) ( (expr (literal (id_ friends))) ))) , (pair (string "memberShips") : (expr (literal (id_ memberships))))) })))))) <EOF>)