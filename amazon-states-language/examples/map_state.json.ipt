state_machine
 program_decl
  {
  top_layer_stmt
   startat_decl
    "StartAt"
    :
    keyword_or_string
     "MapState"
  ,
  top_layer_stmt
   states_decl
    "States"
    :
    {
    state_decl
     state_name
      keyword_or_string
       "MapState"
     :
     state_decl_body
      {
      state_stmt
       type_decl
        "Type"
        :
        state_type
         "Map"
      ,
      state_stmt
       max_concurrency_decl
        "MaxConcurrency"
        :
        1
      ,
      state_stmt
       item_reader_decl
        "ItemReader"
        :
        {
        items_reader_field
         reader_config_decl
          "ReaderConfig"
          :
          {
          reader_config_field
           input_type_decl
            "InputType"
            :
            keyword_or_string
             "CSV"
          ,
          reader_config_field
           csv_header_location_decl
            "CSVHeaderLocation"
            :
            keyword_or_string
             "GIVEN"
          ,
          reader_config_field
           csv_headers_decl
            "CSVHeaders"
            :
            [
            keyword_or_string
             "H1"
            ,
            keyword_or_string
             "H2"
            ,
            keyword_or_string
             "H3"
            ]
          }
        ,
        items_reader_field
         resource_decl
          "Resource"
          :
          keyword_or_string
           "arn:aws:states:::s3:getObject"
        ,
        items_reader_field
         parameters_decl
          "Parameters"
          :
          payload_tmpl_decl
           {
           payload_binding
            "Bucket.$"
            :
            "$.Bucket"
           ,
           payload_binding
            "Key.$"
            :
            "$.Key"
           }
        }
      ,
      state_stmt
       item_processor_decl
        "ItemProcessor"
        :
        {
        item_processor_item
         processor_config_decl
          "ProcessorConfig"
          :
          {
          processor_config_field
           mode_decl
            "Mode"
            :
            mode_type
             "DISTRIBUTED"
          ,
          processor_config_field
           execution_decl
            "ExecutionType"
            :
            execution_type
             "STANDARD"
          }
        ,
        item_processor_item
         startat_decl
          "StartAt"
          :
          keyword_or_string
           "PassItem"
        ,
        item_processor_item
         states_decl
          "States"
          :
          {
          state_decl
           state_name
            keyword_or_string
             "PassItem"
           :
           state_decl_body
            {
            state_stmt
             type_decl
              "Type"
              :
              state_type
               "Pass"
            ,
            state_stmt
             end_decl
              "End"
              :
              true
            }
          }
        }
      ,
      state_stmt
       end_decl
        "End"
        :
        true
      }
    }
  }
 <EOF>
