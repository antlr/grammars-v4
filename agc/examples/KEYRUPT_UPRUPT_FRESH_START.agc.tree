(prog (line (comment_line (comment ### FILE="Main.annotation") (eol \n))) (line (comment_line (comment # Copyright:\tPublic domain.) (eol \n))) (line (comment_line (comment # Filename:\tKEYRUPT_UPRUPT_FRESH_START.agc) (eol \n))) (line (comment_line (comment # Purpose:\tPart of the source code for Solarium build 55. This) (eol \n))) (line (comment_line (comment #\t\tis for the Command Module's (CM) Apollo Guidance) (eol \n))) (line (comment_line (comment #\t\tComputer (AGC), for Apollo 4.) (eol \n))) (line (comment_line (comment # Assembler:\tyaYUL --block1) (eol \n))) (line (comment_line (comment # Contact:\tJim Lawton <jim DOT lawton AT gmail DOT com>) (eol \n))) (line (comment_line (comment # Website:\twww.ibiblio.org/apollo/index.html) (eol \n))) (line (comment_line (comment # Page scans:\twww.ibiblio.org/apollo/ScansForConversion/Solarium055/) (eol \n))) (line (comment_line (comment # Mod history:\t2009-09-15 JL\tCreated.) (eol \n\n))) (line (comment_line (comment ## Page 477) (eol \n\n))) (line (instruction_line (ws \t\t) (opcodes (opcode (pseudo_opcode BANK))) (argument (ws \t) (expression (multiplyingExpression (atom (variable 4))))) (eol \n))) (line (instruction_line (label KEYRUPT1) (ws \t) (opcodes (opcode (standard_opcode MASK))) (argument (ws \t) (expression (multiplyingExpression (atom (variable LOW5)))) (ws \t\t) (comment # C(IN0) IN A)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable RUPTREG4))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable LODSAMPT)))) (ws \t) (comment # TIME IS SNATCHED IN RUPT FOR NOUN 65)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CAF))))) (ws \t) (expression (multiplyingExpression (atom (variable PRIO33))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable NOVAC))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CADR))))) (ws \t) (expression (multiplyingExpression (atom (variable CHARIN))))) (eol \n))) (line (instruction_line (label NOKEYBUF) (ws \t) (opcodes (opcode (standard_opcode XCH))) (argument (ws \t) (expression (multiplyingExpression (atom (variable RUPTREG4))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode INDEX))))) (ws \t) (expression (multiplyingExpression (atom (variable LOCCTR))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable MPAC)))) (ws \t\t) (comment # LEAVE 5 BIT KEY CODE IN MPAC FOR CHARIN)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable (standard_opcode RESUME)))))) (eol \n\n))) (line (comment_line (comment ## Page 478) (eol \n\n))) (line (instruction_line (label UPRUPTB) (ws \t\t) (opcodes (opcode (standard_opcode TS))) (argument (ws \t) (expression (multiplyingExpression (atom (variable BANKRUPT))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable READTIME)))) (ws  ) (expression (multiplyingExpression (atom (variable +1)))) (ws \t) (comment # TIME IS SNATCHED IN RUPT FOR NOUN 65)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CAF))))) (ws \t) (expression (multiplyingExpression (atom (variable ZERO))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode XCH))))) (ws \t) (expression (multiplyingExpression (atom (variable UPLINK)))) (ws \t\t) (comment # ZERO UPLINK)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP1))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CCS))))) (ws \t) (expression (multiplyingExpression (atom (variable DSPTAB)))) (ws  ) (expression (multiplyingExpression (atom (variable +7)))) (ws \t) (comment # TURN ON UPACT LIGHT)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable +2)))) (ws \t\t) (comment # UPACT = BIT 11 OF DSPTAB +7)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CAF))))) (ws \t) (expression (multiplyingExpression (atom (variable B12-1)))) (ws \t\t) (comment # SAFETY PLAY)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode AD))))) (ws \t) (expression (multiplyingExpression (atom (variable ONE))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP2)))) (ws \t) (comment # MAG OF DSPTAB +7 INTO KEYTEMP2)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode MASK))))) (ws \t) (expression (multiplyingExpression (atom (variable BIT11))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CCS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ A)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable UPRPT1)))) (ws \t\t) (comment # BIT 11 ALREADY DONE)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode XCH))))) (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP2)))) (ws \t) (comment # BIT 11 = 0)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode AD))))) (ws \t) (expression (multiplyingExpression (atom (variable BIT11))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ A))))) (ws \t\t) (comment # STORE NEGATIVELY)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode XCH))))) (ws \t) (expression (multiplyingExpression (atom (variable DSPTAB)))) (ws  ) (expression (multiplyingExpression (atom (variable +7))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CCS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ A)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable INCNOUTU)))) (ws \t) (comment # PREVIOUS CONTENTS WAS +)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode NOOP))))) (ws \t\t\t) (comment # SAFETY PLAY)) (eol \n))) (line (instruction_line (label UPRPT1) (ws \t\t) (opcodes (opcode (standard_opcode CAF))) (argument (ws \t) (expression (multiplyingExpression (atom (variable LOW5)))) (ws \t\t) (comment # TEST FOR TRIPLE CHAR REDUNDANCY)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode MASK))))) (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP1)))) (ws \t) (comment # LOW5 OF WORD)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode XCH))))) (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP1)))) (ws \t) (comment # LOW5 INTO KEYTEMP1)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode XCH))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ SR))))) (ws \t\t) (comment # WHOLE WORD INTO SR)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP2)))) (ws \t) (comment # ORIGINAL SR INTO KEYTEMP2)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable SRGHT5))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode MASK))))) (ws \t) (expression (multiplyingExpression (atom (variable LOW5)))) (ws \t\t) (comment # MID 5)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode AD))))) (ws \t) (expression (multiplyingExpression (atom (variable HI10))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable UPTEST))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable SRGHT5))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode MASK))))) (ws \t) (expression (multiplyingExpression (atom (variable LOW5)))) (ws \t\t) (comment # HIGH 5)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode COM)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable UPTEST))))) (eol \n))) (line (instruction_line (label UPOK) (ws \t\t) (opcodes (opcode (standard_opcode TC))) (argument (ws \t) (expression (multiplyingExpression (atom (variable RESTORSR)))) (ws \t) (comment # CODE IS GOOD)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable ELRCODE)))) (ws \t\t) (comment # IF CODE = ERROR LIGHT RESET, PUT +0)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode AD))))) (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP1)))) (ws \t) (comment # INTO UPLOCK (BIT2 OF STATE))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CCS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ A))))) (ws \t\t) (comment # IF CODE NOT= ELR, PASS CODE ONLY IF)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable TSTUPLOK)))) (ws \t) (comment # UPLOCK=0 (BIT 2 OF STATE))) (eol \n))) (line (instruction_line (label ELRCODE) (ws \t\t) (opcodes (opcode (pseudo_opcode OCT))) (argument (ws \t) (expression (multiplyingExpression (atom (variable 22))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable TSTUPLOK))))) (eol \t\t \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable BIT2)))) (ws \t\t) (comment # 0 INTO UPLOCK (BIT 2 OF STATE))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode MASK))))) (ws \t) (expression (multiplyingExpression (atom (variable UPLOCK))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable UPLOCK))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable ACCEPTUP))))) (eol \n))) (line (instruction_line (label TSTUPLOK) (ws \t) (opcodes (opcode (standard_opcode CAF))) (argument (ws \t) (expression (multiplyingExpression (atom (variable BIT2))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode MASK))))) (ws \t) (expression (multiplyingExpression (atom (variable UPLOCK))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CCS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ A)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable (standard_opcode RESUME))))) (ws \t\t) (comment # UPLOCK = 1 (BIT2 OF STATE))) (eol \n))) (line (instruction_line (label ACCEPTUP) (ws \t) (opcodes (opcode (standard_opcode XCH))) (argument (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP1)))) (ws \t) (comment # UPLOCK = 0 (BIT2 OF STATE))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable KEYRUPT1)))) (ws  ) (expression (multiplyingExpression (atom (variable +1))))) (eol \n\n))) (line (comment_line (comment ## Page 479) (eol \n\n))) (line (instruction_line (label TMFAIL2) (ws \t\t) (opcodes (opcode (standard_opcode TC))) (argument (ws \t) (expression (multiplyingExpression (atom (variable RESTORSR)))) (ws \t) (comment # CODE IS BAD)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable BIT2)))) (ws \t\t) (comment # LOCK OUT FURTHER UPLINK ACTIVITY (BY)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode MASK))))) (ws \t) (expression (multiplyingExpression (atom (variable UPLOCK)))) (ws \t\t) (comment # PUTTING 1 INTO UPLOCK, BIT 2 OF STATE))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode AD))))) (ws \t) (expression (multiplyingExpression (atom (variable BIT2)))) (ws \t\t) (comment # UNTIL ERROR LIGHT RESET IS SENT UP)) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable UPLOCK)))) (ws \t\t) (comment # UPLINK.)) (eol \n))) (line (instruction_line (label TMFAIL2) (ws \t\t) (opcodes (opcode (standard_opcode TC))) (argument (ws \t) (expression (multiplyingExpression (atom (variable TMALM))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable (standard_opcode RESUME)))))) (eol \n\n))) (line (instruction_line (label RESTORSR) (ws \t) (opcodes (opcode (standard_opcode XCH))) (argument (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP2))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode DOUBLE)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ SR)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ Q)))))) (eol \n\n))) (line (assignment_line (variable TMALM) (ws \t\t) EQUALS (ws \t) (expression (multiplyingExpression (atom (variable TMFAIL)))) (ws \t\t) (comment # TM FAIL LIGHT ON (IN DOWNRUPT).) (eol \n\n))) (line (instruction_line (label SRGHT5) (ws \t\t) (opcodes (opcode (standard_opcode CS))) (argument (ws \t) (expression (multiplyingExpression (atom (variable (register_ SR)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ SR)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ SR)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ SR)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ SR)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ A)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ Q))))) (ws \t\t) (comment # DELIVERS WORD UNCOMPLEMENTED)) (eol \n\n))) (line (instruction_line (label UPTEST) (ws \t\t) (opcodes (opcode (standard_opcode AD))) (argument (ws \t) (expression (multiplyingExpression (atom (variable KEYTEMP1))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode CCS))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ A)))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable TMFAIL2))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable CCSHOLE))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable TMFAIL2))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TC))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ Q)))))) (eol \n\n))) (line (instruction_line (label HI10) (ws \t\t) (opcodes (opcode (pseudo_opcode OCT))) (argument (ws \t) (expression (multiplyingExpression (atom (variable 77740))))) (eol \n))) (line (assignment_line (variable UPBANK) (ws \t\t) EQUALS (ws \t) (expression (multiplyingExpression (atom (variable EXECBANK)))) (ws \t) (comment # IN SAME BANK AS EXEC.) (eol \n\n))) (line (instruction_line (label B12-1) (ws \t\t) (opcodes (opcode (pseudo_opcode OCT))) (argument (ws \t) (expression (multiplyingExpression (atom (variable 3777))))) (eol \n\n))) (line (instruction_line (label INCNOUTU) (ws \t) (opcodes (opcode (standard_opcode XCH))) (argument (ws \t) (expression (multiplyingExpression (atom (variable NOUT))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode AD))))) (ws \t) (expression (multiplyingExpression (atom (variable ONE))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode TS))))) (ws \t) (expression (multiplyingExpression (atom (variable NOUT))))) (eol \n) (argument (ws \t\t) (expression (multiplyingExpression (atom (variable (standard_opcode INDEX))))) (ws \t) (expression (multiplyingExpression (atom (variable (register_ Q)))))) (eol \n))) (line (instruction_line (label UPLAST) (ws \t\t) (opcodes (opcode (standard_opcode TC))) (argument (ws \t) (expression (multiplyingExpression (atom (variable 1))))) (eol \n\n))) (line (comment_line (comment # UPACT IS TURNED OFF BY VBRELDSP, ALSO BY ERROR LIGHT RESET.) (eol \n\n))) (line (comment_line (comment ## Page 480) (eol \n\n))) (line (comment_line (comment # THE RECEPTION OF A BAD CODE BY UPLINK LOCKS OUT FURTHER UPLINK ACTIVITY ) (eol \n))) (line (comment_line (comment # BY PLACING A 1 INTO UPLOCK (BIT2 OF STATE). BIT9 (AND BIT11) OF TMKEYBUF) (eol \n))) (line (comment_line (comment # IS SET TO 1 TO SEND AN INDICATION OF THIS SITUATION DOWN THE DOWNLINK.) (eol \n))) (line (comment_line (comment # THE UPLINK INTERLOCK IS ALLOWED WHEN AN ERROR LIGHT RESET CODE IS SENT) (eol \n))) (line (comment_line (comment # UP THE UPLINK, OR WHEN A FRESH START IS PERFORMED.) (eol \n))) <EOF>)