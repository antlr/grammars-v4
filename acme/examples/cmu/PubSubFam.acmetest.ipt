acmeCompUnit
 acmeFamilyDeclaration
  Family
  identifier
   PubSubFam
  =
  acmeFamilyBody
   {
   acmePortTypeDeclaration
    Port
    Type
    identifier
     p_announce
    =
    acmePortBody
     {
     designRule
      heuristic
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 reference
                  identifier
                   size
                  actualParams
                   (
                   designRuleExpression
                    aSTDRImpliesExpression
                     dRIffExpression
                      dRAndExpression
                       dRNegateExpression
                        dREqualityExpression
                         dRRelationalExpression
                          dRAdditiveExpression
                           dRMultiplicativeExpression
                            dRNegativeExpression
                             primitiveExpression
                              reference
                               identifier
                                self
                               .
                               setReference
                                attachedRoles
                   )
             >=
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 literalConstant
                  1
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "This port has attachment(s)."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "This port dangles!"
        ;
       >>
      ;
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 quantifiedExpression
                  Forall
                  variableSetDeclaration
                   identifier
                    r
                   :
                   acmeTypeRef
                    role
                   in
                   reference
                    identifier
                     self
                    .
                    setReference
                     attachedroles
                  |
                  designRuleExpression
                   aSTDRImpliesExpression
                    dRIffExpression
                     dRAndExpression
                      dRNegateExpression
                       dREqualityExpression
                        dRRelationalExpression
                         dRAdditiveExpression
                          dRMultiplicativeExpression
                           dRNegativeExpression
                            primitiveExpression
                             reference
                              identifier
                               declaresType
                              actualParams
                               (
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            r
                               ,
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            r_publisher
                               )
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Attached roles have correct type r_publisher."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Detected attached role that is NOT of type r_publisher!"
        ;
       >>
      ;
     }
   acmePortTypeDeclaration
    Port
    Type
    identifier
     p_receive
    =
    acmePortBody
     {
     designRule
      heuristic
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 reference
                  identifier
                   size
                  actualParams
                   (
                   designRuleExpression
                    aSTDRImpliesExpression
                     dRIffExpression
                      dRAndExpression
                       dRNegateExpression
                        dREqualityExpression
                         dRRelationalExpression
                          dRAdditiveExpression
                           dRMultiplicativeExpression
                            dRNegativeExpression
                             primitiveExpression
                              reference
                               identifier
                                self
                               .
                               setReference
                                attachedRoles
                   )
             >=
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 literalConstant
                  1
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "This port has attachment(s)."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "This port dangles!"
        ;
       >>
      ;
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 quantifiedExpression
                  Forall
                  variableSetDeclaration
                   identifier
                    r
                   :
                   acmeTypeRef
                    role
                   in
                   reference
                    identifier
                     self
                    .
                    setReference
                     attachedroles
                  |
                  designRuleExpression
                   aSTDRImpliesExpression
                    dRIffExpression
                     dRAndExpression
                      dRNegateExpression
                       dREqualityExpression
                        dRRelationalExpression
                         dRAdditiveExpression
                          dRMultiplicativeExpression
                           dRNegativeExpression
                            primitiveExpression
                             reference
                              identifier
                               declaresType
                              actualParams
                               (
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            r
                               ,
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            r_subscriber
                               )
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Attached roles have correct type r_subscriber."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Detected attached role that is NOT of type r_subscriber!"
        ;
       >>
      ;
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 reference
                  identifier
                   size
                  actualParams
                   (
                   designRuleExpression
                    aSTDRImpliesExpression
                     dRIffExpression
                      dRAndExpression
                       dRNegateExpression
                        dREqualityExpression
                         dRRelationalExpression
                          dRAdditiveExpression
                           dRMultiplicativeExpression
                            dRNegativeExpression
                             primitiveExpression
                              setExpression
                               setConstructor
                                {
                                Select
                                variableSetDeclaration
                                 identifier
                                  r
                                 :
                                 acmeTypeRef
                                  role
                                 in
                                 reference
                                  identifier
                                   self
                                  .
                                  setReference
                                   attachedRoles
                                |
                                designRuleExpression
                                 aSTDRImpliesExpression
                                  dRIffExpression
                                   dRAndExpression
                                    dRNegateExpression
                                     dREqualityExpression
                                      dRRelationalExpression
                                       dRAdditiveExpression
                                        dRMultiplicativeExpression
                                         dRNegativeExpression
                                          primitiveExpression
                                           reference
                                            identifier
                                             declaresType
                                            actualParams
                                             (
                                             designRuleExpression
                                              aSTDRImpliesExpression
                                               dRIffExpression
                                                dRAndExpression
                                                 dRNegateExpression
                                                  dREqualityExpression
                                                   dRRelationalExpression
                                                    dRAdditiveExpression
                                                     dRMultiplicativeExpression
                                                      dRNegativeExpression
                                                       primitiveExpression
                                                        reference
                                                         identifier
                                                          r
                                             ,
                                             designRuleExpression
                                              aSTDRImpliesExpression
                                               dRIffExpression
                                                dRAndExpression
                                                 dRNegateExpression
                                                  dREqualityExpression
                                                   dRRelationalExpression
                                                    dRAdditiveExpression
                                                     dRMultiplicativeExpression
                                                      dRNegativeExpression
                                                       primitiveExpression
                                                        reference
                                                         identifier
                                                          r_publisher
                                             )
                                }
                   )
             <=
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 literalConstant
                  1
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "No more than one role is subscriber to this port."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Error!  More than one role are subscribers to this port!"
        ;
       >>
      ;
     }
   acmeRoleTypeDeclaration
    Role
    Type
    identifier
     r_publisher
    =
    acmeRoleBody
     {
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 reference
                  identifier
                   size
                  actualParams
                   (
                   designRuleExpression
                    aSTDRImpliesExpression
                     dRIffExpression
                      dRAndExpression
                       dRNegateExpression
                        dREqualityExpression
                         dRRelationalExpression
                          dRAdditiveExpression
                           dRMultiplicativeExpression
                            dRNegativeExpression
                             primitiveExpression
                              reference
                               identifier
                                self
                               .
                               setReference
                                attachedPorts
                   )
            ==
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 literalConstant
                  1
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "This role has exactly one attachment."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "The role dangles or attaches to more than one port!"
        ;
       >>
      ;
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 quantifiedExpression
                  Forall
                  variableSetDeclaration
                   identifier
                    p
                   :
                   acmeTypeRef
                    port
                   in
                   reference
                    identifier
                     self
                    .
                    setReference
                     attachedports
                  |
                  designRuleExpression
                   aSTDRImpliesExpression
                    dRIffExpression
                     dRAndExpression
                      dRNegateExpression
                       dREqualityExpression
                        dRRelationalExpression
                         dRAdditiveExpression
                          dRMultiplicativeExpression
                           dRNegativeExpression
                            primitiveExpression
                             reference
                              identifier
                               declaresType
                              actualParams
                               (
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            p
                               ,
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            p_announce
                               )
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Attached ports have correct type p_announce."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Detected attached port that is NOT of type p_announce!"
        ;
       >>
      ;
     }
   acmeRoleTypeDeclaration
    Role
    Type
    identifier
     r_subscriber
    =
    acmeRoleBody
     {
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 reference
                  identifier
                   size
                  actualParams
                   (
                   designRuleExpression
                    aSTDRImpliesExpression
                     dRIffExpression
                      dRAndExpression
                       dRNegateExpression
                        dREqualityExpression
                         dRRelationalExpression
                          dRAdditiveExpression
                           dRMultiplicativeExpression
                            dRNegativeExpression
                             primitiveExpression
                              reference
                               identifier
                                self
                               .
                               setReference
                                attachedPorts
                   )
            ==
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 literalConstant
                  1
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "This role has exactly one attachment."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "The role dangles or attaches to more than one port!"
        ;
       >>
      ;
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 quantifiedExpression
                  Forall
                  variableSetDeclaration
                   identifier
                    p
                   :
                   acmeTypeRef
                    port
                   in
                   reference
                    identifier
                     self
                    .
                    setReference
                     attachedports
                  |
                  designRuleExpression
                   aSTDRImpliesExpression
                    dRIffExpression
                     dRAndExpression
                      dRNegateExpression
                       dREqualityExpression
                        dRRelationalExpression
                         dRAdditiveExpression
                          dRMultiplicativeExpression
                           dRNegativeExpression
                            primitiveExpression
                             reference
                              identifier
                               declaresType
                              actualParams
                               (
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            p
                               ,
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            p_receive
                               )
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Attached ports have correct type p_receive."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Detected attached port that is NOT of type p_receive!"
        ;
       >>
      ;
     }
   acmeConnectorTypeDeclaration
    Connector
    Type
    identifier
     EventBusT
    =
    acmeConnectorBody
     {
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 quantifiedExpression
                  Forall
                  variableSetDeclaration
                   identifier
                    r
                   in
                   reference
                    identifier
                     self
                    .
                    setReference
                     roles
                  |
                  designRuleExpression
                   aSTDRImpliesExpression
                    dRIffExpression
                     dRAndExpression
                      dRNegateExpression
                       dREqualityExpression
                        dRRelationalExpression
                         dRAdditiveExpression
                          dRMultiplicativeExpression
                           dRNegativeExpression
                            primitiveExpression
                             quantifiedExpression
                              Exists
                              variableSetDeclaration
                               identifier
                                t
                               in
                               setExpression
                                literalSet
                                 {
                                 reference
                                  identifier
                                   r_publisher
                                 ,
                                 reference
                                  identifier
                                   r_subscriber
                                 }
                              |
                              designRuleExpression
                               aSTDRImpliesExpression
                                dRIffExpression
                                 dRAndExpression
                                  dRNegateExpression
                                   dREqualityExpression
                                    dRRelationalExpression
                                     dRAdditiveExpression
                                      dRMultiplicativeExpression
                                       dRNegativeExpression
                                        primitiveExpression
                                         reference
                                          identifier
                                           declaresType
                                          actualParams
                                           (
                                           designRuleExpression
                                            aSTDRImpliesExpression
                                             dRIffExpression
                                              dRAndExpression
                                               dRNegateExpression
                                                dREqualityExpression
                                                 dRRelationalExpression
                                                  dRAdditiveExpression
                                                   dRMultiplicativeExpression
                                                    dRNegativeExpression
                                                     primitiveExpression
                                                      reference
                                                       identifier
                                                        r
                                           ,
                                           designRuleExpression
                                            aSTDRImpliesExpression
                                             dRIffExpression
                                              dRAndExpression
                                               dRNegateExpression
                                                dREqualityExpression
                                                 dRRelationalExpression
                                                  dRAdditiveExpression
                                                   dRMultiplicativeExpression
                                                    dRNegativeExpression
                                                     primitiveExpression
                                                      reference
                                                       identifier
                                                        t
                                           )
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Roles match the required types."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "At least a role is not of type r_publisher or r_subscriber!"
        ;
       >>
      ;
     designRule
      heuristic
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 quantifiedExpression
                  Exists
                  variableSetDeclaration
                   identifier
                    r
                   :
                   acmeTypeRef
                    role
                   in
                   reference
                    identifier
                     self
                    .
                    setReference
                     roles
                  |
                  designRuleExpression
                   aSTDRImpliesExpression
                    dRIffExpression
                     dRAndExpression
                      dRNegateExpression
                       dREqualityExpression
                        dRRelationalExpression
                         dRAdditiveExpression
                          dRMultiplicativeExpression
                           dRNegativeExpression
                            primitiveExpression
                             reference
                              identifier
                               declaresType
                              actualParams
                               (
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            r
                               ,
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            r_subscriber
                               )
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "There is at least one subscriber on this event bus."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Warning!  No subscriber detected!"
        ;
       >>
      ;
     designRule
      invariant
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 quantifiedExpression
                  Exists
                  variableSetDeclaration
                   identifier
                    r
                   :
                   acmeTypeRef
                    role
                   in
                   reference
                    identifier
                     self
                    .
                    setReference
                     roles
                  |
                  designRuleExpression
                   aSTDRImpliesExpression
                    dRIffExpression
                     dRAndExpression
                      dRNegateExpression
                       dREqualityExpression
                        dRRelationalExpression
                         dRAdditiveExpression
                          dRMultiplicativeExpression
                           dRNegativeExpression
                            primitiveExpression
                             reference
                              identifier
                               declaresType
                              actualParams
                               (
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            r
                               ,
                               designRuleExpression
                                aSTDRImpliesExpression
                                 dRIffExpression
                                  dRAndExpression
                                   dRNegateExpression
                                    dREqualityExpression
                                     dRRelationalExpression
                                      dRAdditiveExpression
                                       dRMultiplicativeExpression
                                        dRNegativeExpression
                                         primitiveExpression
                                          reference
                                           identifier
                                            r_publisher
                               )
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "There is at least one publisher on this event bus."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Error!  No publisher detected!"
        ;
       >>
      ;
     }
   acmeComponentTypeDeclaration
    Component
    Type
    identifier
     ParticipantT
    =
    acmeComponentBody
     {
     designRule
      heuristic
      designRuleExpression
       aSTDRImpliesExpression
        dRIffExpression
         dRAndExpression
          dRNegateExpression
           dREqualityExpression
            dRRelationalExpression
             dRAdditiveExpression
              dRMultiplicativeExpression
               dRNegativeExpression
                primitiveExpression
                 quantifiedExpression
                  Exists
                  variableSetDeclaration
                   identifier
                    p
                   in
                   reference
                    identifier
                     self
                    .
                    setReference
                     ports
                  |
                  designRuleExpression
                   aSTDRImpliesExpression
                    dRIffExpression
                     dRAndExpression
                      dRNegateExpression
                       dREqualityExpression
                        dRRelationalExpression
                         dRAdditiveExpression
                          dRMultiplicativeExpression
                           dRNegativeExpression
                            primitiveExpression
                             quantifiedExpression
                              Exists
                              variableSetDeclaration
                               identifier
                                t
                               in
                               setExpression
                                literalSet
                                 {
                                 reference
                                  identifier
                                   p_announce
                                 ,
                                 reference
                                  identifier
                                   p_receive
                                 }
                              |
                              designRuleExpression
                               aSTDRImpliesExpression
                                dRIffExpression
                                 dRAndExpression
                                  dRNegateExpression
                                   dREqualityExpression
                                    dRRelationalExpression
                                     dRAdditiveExpression
                                      dRMultiplicativeExpression
                                       dRNegativeExpression
                                        primitiveExpression
                                         reference
                                          identifier
                                           declaresType
                                          actualParams
                                           (
                                           designRuleExpression
                                            aSTDRImpliesExpression
                                             dRIffExpression
                                              dRAndExpression
                                               dRNegateExpression
                                                dREqualityExpression
                                                 dRRelationalExpression
                                                  dRAdditiveExpression
                                                   dRMultiplicativeExpression
                                                    dRNegativeExpression
                                                     primitiveExpression
                                                      reference
                                                       identifier
                                                        p
                                           ,
                                           designRuleExpression
                                            aSTDRImpliesExpression
                                             dRIffExpression
                                              dRAndExpression
                                               dRNegateExpression
                                                dREqualityExpression
                                                 dRRelationalExpression
                                                  dRAdditiveExpression
                                                   dRMultiplicativeExpression
                                                    dRNegativeExpression
                                                     primitiveExpression
                                                      reference
                                                       identifier
                                                        t
                                           )
      acmePropertyBlock
       <<
       acmePropertyBlockEntry
        identifier
         label
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "An announce or receive port is present."
        ;
       acmePropertyBlockEntry
        identifier
         errMsg
        :
        acmePropertyTypeRef
         acmePropertyTypeStructure
          acmePropertyTypeString
           string
        =
        acmePropertyValueDeclaration
         "Detected NO port of either p_announce or p_receive!"
        ;
       >>
      ;
     }
   designRule
    heuristic
    designRuleExpression
     aSTDRImpliesExpression
      dRIffExpression
       dRAndExpression
        dRNegateExpression
         dREqualityExpression
          dRRelationalExpression
           dRAdditiveExpression
            dRMultiplicativeExpression
             dRNegativeExpression
              primitiveExpression
               quantifiedExpression
                Forall
                variableSetDeclaration
                 identifier
                  comp
                 :
                 acmeTypeRef
                  component
                 in
                 reference
                  identifier
                   self
                  .
                  setReference
                   components
                |
                designRuleExpression
                 aSTDRImpliesExpression
                  dRIffExpression
                   dRAndExpression
                    dRNegateExpression
                     dREqualityExpression
                      dRRelationalExpression
                       dRAdditiveExpression
                        dRMultiplicativeExpression
                         dRNegativeExpression
                          primitiveExpression
                           quantifiedExpression
                            Forall
                            variableSetDeclaration
                             identifier
                              p
                             :
                             acmeTypeRef
                              reference
                               identifier
                                p_announce
                             in
                             reference
                              identifier
                               comp
                              .
                              setReference
                               ports
                            |
                            designRuleExpression
                             aSTDRImpliesExpression
                              dRIffExpression
                               dRAndExpression
                                dRNegateExpression
                                 dREqualityExpression
                                  dRRelationalExpression
                                   dRAdditiveExpression
                                    dRMultiplicativeExpression
                                     dRNegativeExpression
                                      primitiveExpression
                                       parentheticalExpression
                                        (
                                        designRuleExpression
                                         aSTDRImpliesExpression
                                          dRIffExpression
                                           dRAndExpression
                                            dRNegateExpression
                                             !
                                             dRNegateExpression
                                              dREqualityExpression
                                               dRRelationalExpression
                                                dRAdditiveExpression
                                                 dRMultiplicativeExpression
                                                  dRNegativeExpression
                                                   primitiveExpression
                                                    parentheticalExpression
                                                     (
                                                     designRuleExpression
                                                      aSTDRImpliesExpression
                                                       dRIffExpression
                                                        dRAndExpression
                                                         dRNegateExpression
                                                          dREqualityExpression
                                                           dRRelationalExpression
                                                            dRAdditiveExpression
                                                             dRMultiplicativeExpression
                                                              dRNegativeExpression
                                                               primitiveExpression
                                                                quantifiedExpression
                                                                 Exists
                                                                 variableSetDeclaration
                                                                  identifier
                                                                   r1
                                                                  :
                                                                  acmeTypeRef
                                                                   role
                                                                  in
                                                                  reference
                                                                   identifier
                                                                    p
                                                                   .
                                                                   setReference
                                                                    attachedRoles
                                                                 |
                                                                 designRuleExpression
                                                                  aSTDRImpliesExpression
                                                                   dRIffExpression
                                                                    dRAndExpression
                                                                     dRNegateExpression
                                                                      dREqualityExpression
                                                                       dRRelationalExpression
                                                                        dRAdditiveExpression
                                                                         dRMultiplicativeExpression
                                                                          dRNegativeExpression
                                                                           primitiveExpression
                                                                            quantifiedExpression
                                                                             Exists
                                                                             variableSetDeclaration
                                                                              identifier
                                                                               r2
                                                                              :
                                                                              acmeTypeRef
                                                                               role
                                                                              in
                                                                              reference
                                                                               identifier
                                                                                p
                                                                               .
                                                                               setReference
                                                                                attachedRoles
                                                                             |
                                                                             designRuleExpression
                                                                              aSTDRImpliesExpression
                                                                               dRIffExpression
                                                                                dRAndExpression
                                                                                 dRNegateExpression
                                                                                  dREqualityExpression
                                                                                   dRRelationalExpression
                                                                                    dRAdditiveExpression
                                                                                     dRMultiplicativeExpression
                                                                                      dRNegativeExpression
                                                                                       primitiveExpression
                                                                                        reference
                                                                                         identifier
                                                                                          r1
                                                                                   !=
                                                                                   dRRelationalExpression
                                                                                    dRAdditiveExpression
                                                                                     dRMultiplicativeExpression
                                                                                      dRNegativeExpression
                                                                                       primitiveExpression
                                                                                        reference
                                                                                         identifier
                                                                                          r2
                                                                                 AND
                                                                                 dRNegateExpression
                                                                                  dREqualityExpression
                                                                                   dRRelationalExpression
                                                                                    dRAdditiveExpression
                                                                                     dRMultiplicativeExpression
                                                                                      dRNegativeExpression
                                                                                       primitiveExpression
                                                                                        parentheticalExpression
                                                                                         (
                                                                                         designRuleExpression
                                                                                          aSTDRImpliesExpression
                                                                                           dRIffExpression
                                                                                            dRAndExpression
                                                                                             dRNegateExpression
                                                                                              dREqualityExpression
                                                                                               dRRelationalExpression
                                                                                                dRAdditiveExpression
                                                                                                 dRMultiplicativeExpression
                                                                                                  dRNegativeExpression
                                                                                                   primitiveExpression
                                                                                                    quantifiedExpression
                                                                                                     Exists
                                                                                                     variableSetDeclaration
                                                                                                      identifier
                                                                                                       conn
                                                                                                      :
                                                                                                      acmeTypeRef
                                                                                                       connector
                                                                                                      in
                                                                                                      reference
                                                                                                       identifier
                                                                                                        self
                                                                                                       .
                                                                                                       setReference
                                                                                                        connectors
                                                                                                     |
                                                                                                     designRuleExpression
                                                                                                      aSTDRImpliesExpression
                                                                                                       dRIffExpression
                                                                                                        dRAndExpression
                                                                                                         dRNegateExpression
                                                                                                          dREqualityExpression
                                                                                                           dRRelationalExpression
                                                                                                            dRAdditiveExpression
                                                                                                             dRMultiplicativeExpression
                                                                                                              dRNegativeExpression
                                                                                                               primitiveExpression
                                                                                                                reference
                                                                                                                 identifier
                                                                                                                  isSubset
                                                                                                                 actualParams
                                                                                                                  (
                                                                                                                  designRuleExpression
                                                                                                                   aSTDRImpliesExpression
                                                                                                                    dRIffExpression
                                                                                                                     dRAndExpression
                                                                                                                      dRNegateExpression
                                                                                                                       dREqualityExpression
                                                                                                                        dRRelationalExpression
                                                                                                                         dRAdditiveExpression
                                                                                                                          dRMultiplicativeExpression
                                                                                                                           dRNegativeExpression
                                                                                                                            primitiveExpression
                                                                                                                             setExpression
                                                                                                                              literalSet
                                                                                                                               {
                                                                                                                               reference
                                                                                                                                identifier
                                                                                                                                 r1
                                                                                                                               ,
                                                                                                                               reference
                                                                                                                                identifier
                                                                                                                                 r2
                                                                                                                               }
                                                                                                                  ,
                                                                                                                  designRuleExpression
                                                                                                                   aSTDRImpliesExpression
                                                                                                                    dRIffExpression
                                                                                                                     dRAndExpression
                                                                                                                      dRNegateExpression
                                                                                                                       dREqualityExpression
                                                                                                                        dRRelationalExpression
                                                                                                                         dRAdditiveExpression
                                                                                                                          dRMultiplicativeExpression
                                                                                                                           dRNegativeExpression
                                                                                                                            primitiveExpression
                                                                                                                             reference
                                                                                                                              identifier
                                                                                                                               conn
                                                                                                                              .
                                                                                                                              setReference
                                                                                                                               roles
                                                                                                                  )
                                                                                         )
                                                     )
                                        )
    acmePropertyBlock
     <<
     acmePropertyBlockEntry
      identifier
       label
      :
      acmePropertyTypeRef
       acmePropertyTypeStructure
        acmePropertyTypeString
         string
      =
      acmePropertyValueDeclaration
       "All ports announce on one role of any bus."
      ;
     acmePropertyBlockEntry
      identifier
       errMsg
      :
      acmePropertyTypeRef
       acmePropertyTypeStructure
        acmePropertyTypeString
         string
      =
      acmePropertyValueDeclaration
       "Warning!  Detected a port that announces on TWO roles of the same bus!"
      ;
     >>
    ;
   }
 <EOF>
