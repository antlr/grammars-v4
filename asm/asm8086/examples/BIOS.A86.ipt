prog
 line
  assemblerdirective
   title
    title
    string_
     '8086 Disk I/O Drivers'
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n\n
 line
  assemblerdirective
   equ
    name
     true
    equ
    expression
     multiplyingExpression
      argument
       number
        sign
         -
        1
  \n
 line
  assemblerdirective
   equ
    name
     false
    equ
    expression
     multiplyingExpression
      argument
       not
       expression
        multiplyingExpression
         argument
          name
           true
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  assemblerdirective
   equ
    name
     loader_bios
    equ
    expression
     multiplyingExpression
      argument
       name
        false
  \n
 line
  assemblerdirective
   equ
    name
     blc_list
    equ
    expression
     multiplyingExpression
      argument
       name
        true
  \n
 line
  assemblerdirective
   equ
    name
     bdos_int
    equ
    expression
     multiplyingExpression
      argument
       number
        224
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      not
      assemblerterm
       name
        loader_bios
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   equ
    name
     bios_code
    equ
    expression
     multiplyingExpression
      argument
       number
        2500h
  \n
 line
  assemblerdirective
   equ
    name
     ccp_offset
    equ
    expression
     multiplyingExpression
      argument
       number
        0000h
  \n
 line
  assemblerdirective
   equ
    name
     bdos_ofst
    equ
    expression
     multiplyingExpression
      argument
       number
        0B06h
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      name
       loader_bios
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   equ
    name
     bios_code
    equ
    expression
     multiplyingExpression
      argument
       number
        1200h
  \n
 line
  assemblerdirective
   equ
    name
     ccp_offset
    equ
    expression
     multiplyingExpression
      argument
       number
        0003h
  \n
 line
  assemblerdirective
   equ
    name
     bdos_ofst
    equ
    expression
     multiplyingExpression
      argument
       number
        0406h
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  assemblerdirective
   equ
    name
     csts
    equ
    expression
     multiplyingExpression
      argument
       number
        0DAh
  \n
 line
  assemblerdirective
   equ
    name
     cdata
    equ
    expression
     multiplyingExpression
      argument
       number
        0D8h
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      name
       blc_list
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   equ
    name
     lsts
    equ
    expression
     multiplyingExpression
      argument
       number
        41h
  \n
 line
  assemblerdirective
   equ
    name
     ldata
    equ
    expression
     multiplyingExpression
      argument
       number
        40h
  \n
 line
  assemblerdirective
   equ
    name
     blc_reset
    equ
    expression
     multiplyingExpression
      argument
       number
        60h
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  assemblerdirective
   equ
    name
     base204
    equ
    expression
     multiplyingExpression
      argument
       number
        0a0h
  \n\n
 line
  assemblerdirective
   equ
    name
     fdc_com
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        0
  \n
 line
  assemblerdirective
   equ
    name
     fdc_stat
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        0
  \n
 line
  assemblerdirective
   equ
    name
     fdc_parm
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        1
  \n
 line
  assemblerdirective
   equ
    name
     fdc_rslt
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        1
  \n
 line
  assemblerdirective
   equ
    name
     fdc_rst
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        2
  \n
 line
  assemblerdirective
   equ
    name
     dmac_adr
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        4
  \n
 line
  assemblerdirective
   equ
    name
     dmac_cont
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        5
  \n
 line
  assemblerdirective
   equ
    name
     dmac_scan
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        6
  \n
 line
  assemblerdirective
   equ
    name
     dmac_sadr
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        7
  \n
 line
  assemblerdirective
   equ
    name
     dmac_mode
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        8
  \n
 line
  assemblerdirective
   equ
    name
     dmac_stat
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        8
  \n
 line
  assemblerdirective
   equ
    name
     fdc_sel
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        9
  \n
 line
  assemblerdirective
   equ
    name
     fdc_segment
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        10
  \n
 line
  assemblerdirective
   equ
    name
     reset_204
    equ
    expression
     multiplyingExpression
      argument
       name
        base204
     sign
      +
     multiplyingExpression
      argument
       number
        15
  \n\n
 line
  assemblerdirective
   equ
    name
     max_retries
    equ
    expression
     multiplyingExpression
      argument
       number
        10
  \n
 line
  \n
 line
  assemblerdirective
   equ
    name
     cr
    equ
    expression
     multiplyingExpression
      argument
       number
        0dh
  \n
 line
  assemblerdirective
   equ
    name
     lf
    equ
    expression
     multiplyingExpression
      argument
       number
        0ah
  \n\n
 line
  assemblerdirective
   cseg
    cseg
  \n
 line
  assemblerdirective
   org
    org
    expression
     multiplyingExpression
      argument
       name
        ccpoffset
  \n
 line
  lbl
   label
    name
     ccp
   :
  \n
 line
  assemblerdirective
   org
    org
    expression
     multiplyingExpression
      argument
       name
        bios_code
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        INIT
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        WBOOT
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        CONST
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        CONIN
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        CONOUT
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        LISTOUT
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        PUNCH
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        READER
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        HOME
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        SELDSK
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        SETTRK
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        SETSEC
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        SETDMA
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        READ
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        WRITE
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        LISTST
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        SECTRAN
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        SETDMAB
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        GETSEGT
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        GETIOBF
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        SETIOBF
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  lbl
   label
    name
     INIT
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
    ,
    expression
     multiplyingExpression
      argument
       register_
        cs
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ss
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ds
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        es
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        sp
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           stkbase
  \n
 line
  instruction
   opcode
    cld
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      not
      assemblerterm
       name
        loader_bios
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  instruction
   opcode
    push
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ds
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ds
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        es
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        int0_offset
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           int_trap
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        int0_segment
    ,
    expression
     multiplyingExpression
      argument
       register_
        CS
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        di
    ,
    expression
     multiplyingExpression
      argument
       number
        4
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        si
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cx
    ,
    expression
     multiplyingExpression
      argument
       number
        510
  \n
 line
  instruction
   rep
    rep
   opcode
    movs
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        bdos_offset
    ,
    expression
     multiplyingExpression
      argument
       name
        bdos_ofst
  \n
 line
  instruction
   opcode
    pop
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ds
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0FFh
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        blc_reset
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        4Eh
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        ldata
     sign
      +
     multiplyingExpression
      argument
       number
        2
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        3Eh
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        ldata
     sign
      +
     multiplyingExpression
      argument
       number
        2
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        37h
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        ldata
     sign
      +
     multiplyingExpression
      argument
       number
        3
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      name
       loader_bios
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  instruction
   opcode
    push
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ds
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ds
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        bdos_offset
    ,
    expression
     multiplyingExpression
      argument
       name
        bdos_ofst
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        bdos_segment
    ,
    expression
     multiplyingExpression
      argument
       register_
        CS
  \n
 line
  instruction
   opcode
    pop
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ds
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           signon
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        pmsg
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        ccp
  \n\n
 line
  lbl
   label
    name
     WBOOT
   :
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        ccp
     sign
      +
     multiplyingExpression
      argument
       number
        6
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      not
      assemblerterm
       name
        loader_bios
  \n
 line
  \n
 line
  \n
 line
  lbl
   label
    name
     int_trap
   :
  \n
 line
  instruction
   opcode
    cli
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
    ,
    expression
     multiplyingExpression
      argument
       register_
        cs
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ds
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           int_trp
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        pmsg
  \n
 line
  instruction
   opcode
    hlt
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  lbl
   label
    name
     CONST
   :
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        csts
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        2
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        const_ret
  \n
 line
  instruction
   opcode
    or
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        255
  \n
 line
  lbl
   label
    name
     const_ret
   :
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     CONIN
   :
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        const
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        CONIN
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        cdata
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        7fh
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     CONOUT
   :
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        csts
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        1
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        CONOUT
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        cl
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        cdata
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     LISTOUT
   :
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      name
       blc_list
  \n
 line
  \n
 line
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        LISTST
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        LISTOUT
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        cl
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        ldata
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     LISTST
   :
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      name
       blc_list
  \n
 line
  \n
 line
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        lsts
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        81h
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        81h
  \n
 line
  instruction
   opcode
    jnz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        zero_ret
  \n
 line
  instruction
   opcode
    or
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        255
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     PUNCH
   :
  \n
 line
  lbl
   label
    name
     READER
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        1ah
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     GETIOBF
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     SETIOBF
   :
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     zero_ret
   :
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  \n
 line
  \n\n
 line
  lbl
   label
    name
     uconecho
   :
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        CONIN
  \n
 line
  instruction
   opcode
    push
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        CONOUT
  \n
 line
  instruction
   opcode
    pop
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       string_
        'a'
  \n
 line
  instruction
   opcode
    jb
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        uret
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       string_
        'z'
  \n
 line
  instruction
   opcode
    ja
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        uret
  \n
 line
  instruction
   opcode
    sub
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       string_
        'a'
     sign
      -
     multiplyingExpression
      argument
       string_
        'A'
  \n
 line
  lbl
   label
    name
     uret
   :
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  \n\n
 line
  lbl
   label
    name
     pmsg
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       [
       expression
        multiplyingExpression
         argument
          register_
           BX
       ]
  \n
 line
  instruction
   opcode
    test
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        return
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        CL
    ,
    expression
     multiplyingExpression
      argument
       register_
        AL
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        CONOUT
  \n
 line
  instruction
   opcode
    inc
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        BX
  \n
 line
  instruction
   opcode
    jmps
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        pmsg
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  lbl
   label
    name
     SELDSK
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       number
        0000h
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
    ,
    expression
     multiplyingExpression
      argument
       number
        2
  \n
 line
  instruction
   opcode
    jnb
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        return
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        80h
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    jne
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        sel1
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        40h
  \n
 line
  lbl
   label
    name
     sel1
   :
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        sel_mask
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ch
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       register_
        cx
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
    ,
    expression
     multiplyingExpression
      argument
       number
        4
  \n
 line
  instruction
   opcode
    shl
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       register_
        cl
  \n
 line
  \n
 line
  instruction
   opcode
    add
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           dp_base
  \n
 line
  lbl
   label
    name
     return
   :
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     HOME
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        trk
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           hom_com
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        execute
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        return
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           bad_hom
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        pmsg
  \n
 line
  instruction
   opcode
    jmps
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        home
  \n\n
 line
  lbl
   label
    name
     SETTRK
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        trk
    ,
    expression
     multiplyingExpression
      argument
       register_
        cl
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     SETSEC
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        sect
    ,
    expression
     multiplyingExpression
      argument
       register_
        cl
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     SECTRAN
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       register_
        cx
  \n
 line
  instruction
   opcode
    add
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       register_
        dx
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bl
    ,
    expression
     multiplyingExpression
      argument
       [
       expression
        multiplyingExpression
         argument
          register_
           bx
       ]
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     SETDMA
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dma_adr
    ,
    expression
     multiplyingExpression
      argument
       register_
        CX
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     SETDMAB
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dma_seg
    ,
    expression
     multiplyingExpression
      argument
       register_
        CX
  \n
 line
  instruction
   opcode
    ret
  \n
 line
  \n
 line
  lbl
   label
    name
     GETSEGT
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           seg_table
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  lbl
   label
    name
     READ
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        12h
  \n
 line
  instruction
   opcode
    jmps
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        r_w_common
  \n\n
 line
  lbl
   label
    name
     WRITE
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0ah
  \n\n
 line
  lbl
   label
    name
     r_w_common
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           io_com
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       ptr
        byte
        ptr
       expression
        multiplyingExpression
         argument
          number
           1
          [
          expression
           multiplyingExpression
            argument
             register_
              BX
          ]
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  \n\n
 line
  lbl
   label
    name
     execute
   :
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        last_com
    ,
    expression
     multiplyingExpression
      argument
       register_
        BX
  \n
 line
  lbl
   label
    name
     outer_retry
   :
  \n
 line
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        rtry_cnt
    ,
    expression
     multiplyingExpression
      argument
       name
        max_retries
  \n
 line
  lbl
   label
    name
     retry
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        BX
    ,
    expression
     multiplyingExpression
      argument
       name
        last_com
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        send_com
  \n
 line
  \n\n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        BX
    ,
    expression
     multiplyingExpression
      argument
       name
        last_com
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        1
       [
       expression
        multiplyingExpression
         argument
          register_
           bx
       ]
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cx
    ,
    expression
     multiplyingExpression
      argument
       number
        0800h
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        2ch
  \n
 line
  instruction
   opcode
    jb
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        exec_poll
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cx
    ,
    expression
     multiplyingExpression
      argument
       number
        8080h
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0fh
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0ch
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    ja
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        exec_exit
  \n
 line
  \n
 line
  lbl
   label
    name
     exec_poll
   :
  \n\n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        fdc_stat
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        ch
  \n
 line
  instruction
   opcode
    xor
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        cl
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        exec_poll
  \n\n
 line
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        fdc_rslt
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        1eh
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        exec_exit
  \n
 line
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        10h
  \n
 line
  instruction
   opcode
    je
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dr_nrdy
  \n
 line
  \n
 line
  lbl
   label
    name
     dr_rdy
   :
  \n
 line
  instruction
   opcode
    dec
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        rtry_cnt
  \n
 line
  instruction
   opcode
    jnz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        retry
  \n\n
 line
  \n
 line
  \n\n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ah
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       register_
        ax
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       name
        errtbl
       [
       expression
        multiplyingExpression
         argument
          register_
           BX
       ]
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        pmsg
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        cdata
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        uconecho
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       string_
        'C'
  \n
 line
  instruction
   opcode
    je
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        wboot_l
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       string_
        'R'
  \n
 line
  instruction
   opcode
    je
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        outer_retry
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       string_
        'I'
  \n
 line
  instruction
   opcode
    je
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        z_ret
  \n
 line
  instruction
   opcode
    or
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        255
  \n
 line
  lbl
   label
    name
     exec_exit
   :
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     dr_nrdy
   :
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        test_ready
  \n
 line
  instruction
   opcode
    jnz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        retry
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        test_ready
  \n
 line
  instruction
   opcode
    jnz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        retry
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           nrdymsg
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        pmsg
  \n
 line
  lbl
   label
    name
     nrdy01
   :
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        test_ready
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        nrdy01
  \n
 line
  instruction
   opcode
    jmps
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        retry
  \n
 line
  lbl
   label
    name
     zret
   :
  \n
 line
  instruction
   opcode
    and
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  lbl
   label
    name
     wboot_l
   :
  \n
 line
  instruction
   opcode
    jmp
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        WBOOT
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  lbl
   label
    name
     test_ready
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        dh
    ,
    expression
     multiplyingExpression
      argument
       number
        40h
  \n
 line
  instruction
   opcode
    test
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        sel_mask
    ,
    expression
     multiplyingExpression
      argument
       number
        80h
  \n
 line
  instruction
   opcode
    jnz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        nrdy2
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        dh
    ,
    expression
     multiplyingExpression
      argument
       number
        04h
  \n
 line
  lbl
   label
    name
     nrdy2
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        bx
    ,
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          name
           rds_com
  \n
 line
  instruction
   opcode
    call
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        send_com
  \n
 line
  lbl
   label
    name
     dr_poll
   :
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        fdc_stat
  \n
 line
  instruction
   opcode
    test
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        80h
  \n
 line
  instruction
   opcode
    jnz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dr_poll
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        fdc_rslt
  \n
 line
  instruction
   opcode
    test
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        dh
  \n
 line
  instruction
   opcode
    ret
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n\n
 line
  lbl
   label
    name
     send_com
   :
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        fdc_stat
  \n
 line
  instruction
   opcode
    test
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        80h
  \n
 line
  instruction
   opcode
    jnz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        send_com
  \n\n
 line
  \n\n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        1
       [
       expression
        multiplyingExpression
         argument
          register_
           bx
       ]
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        12h
  \n
 line
  instruction
   opcode
    jne
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        write_maybe
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
    ,
    expression
     multiplyingExpression
      argument
       number
        40h
  \n
 line
  instruction
   opcode
    jmps
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        init_dma
  \n
 line
  lbl
   label
    name
     write_maybe
   :
  \n
 line
  instruction
   opcode
    cmp
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        0ah
  \n
 line
  instruction
   opcode
    jne
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dma_exit
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
    ,
    expression
     multiplyingExpression
      argument
       number
        80h
  \n
 line
  lbl
   label
    name
     init_dma
   :
  \n
 line
  \n
 line
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        04h
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dmac_mode
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        00
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dmac_cont
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        cl
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dmac_cont
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
    ,
    expression
     multiplyingExpression
      argument
       name
        dma_adr
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dmac_adr
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        ah
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        dmac_adr
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        ax
    ,
    expression
     multiplyingExpression
      argument
       name
        dma_seg
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        fdc_segment
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       register_
        ah
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        fdc_segment
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  lbl
   label
    name
     dma_exit
   :
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
    ,
    expression
     multiplyingExpression
      argument
       [
       expression
        multiplyingExpression
         argument
          register_
           BX
       ]
  \n
 line
  instruction
   opcode
    inc
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        BX
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       [
       expression
        multiplyingExpression
         argument
          register_
           BX
       ]
  \n
 line
  instruction
   opcode
    or
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        sel_mask
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        fdc_com
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  lbl
   label
    name
     parm_loop
   :
  \n
 line
  instruction
   opcode
    dec
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        cl
  \n
 line
  instruction
   opcode
    jz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        exec_exit
  \n
 line
  instruction
   opcode
    inc
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        BX
  \n
 line
  lbl
   label
    name
     parm_poll
   :
  \n
 line
  instruction
   opcode
    in
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       name
        fdc_stat
  \n
 line
  instruction
   opcode
    test
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       number
        20h
  \n
 line
  instruction
   opcode
    jnz
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        parm_poll
  \n
 line
  instruction
   opcode
    mov
   expressionlist
    expression
     multiplyingExpression
      argument
       register_
        al
    ,
    expression
     multiplyingExpression
      argument
       [
       expression
        multiplyingExpression
         argument
          register_
           BX
       ]
  \n
 line
  instruction
   opcode
    out
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        fdc_parm
    ,
    expression
     multiplyingExpression
      argument
       register_
        al
  \n
 line
  instruction
   opcode
    jmps
   expressionlist
    expression
     multiplyingExpression
      argument
       name
        parm_loop
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   equ
    name
     data_offset
    equ
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          dollar
           $
  \n\n
 line
  assemblerdirective
   dseg
    dseg
  \n
 line
  assemblerdirective
   org
    org
    expression
     multiplyingExpression
      argument
       name
        data_offset
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      name
       loader_bios
  \n
 line
  \n
 line
  \n
 line
  lbl
   label
    name
     signon
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
  \n
 line
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        string_
         'CP/M-86 Version 2.2'
     ,
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  assemblerdirective
   if_
    IF
    assemblerexpression
     assemblerterm
      not
      assemblerterm
       name
        loader_bios
  \n
 line
  \n
 line
  \n
 line
  lbl
   label
    name
     signon
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
  \n
 line
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        string_
         '  System Generated  - 11 Jan 81'
     ,
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   endif_
    ENDIF
  \n\n
 line
  lbl
   label
    name
     bad_hom
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Home Error'
     ,
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     int_trp
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Interrupt Trap Halt'
     ,
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n\n
 line
  lbl
   label
    name
     errtbl
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         er0
     ,
     expression
      multiplyingExpression
       argument
        name
         er1
     ,
     expression
      multiplyingExpression
       argument
        name
         er2
     ,
     expression
      multiplyingExpression
       argument
        name
         er3
  \n
 line
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         er4
     ,
     expression
      multiplyingExpression
       argument
        name
         er5
     ,
     expression
      multiplyingExpression
       argument
        name
         er6
     ,
     expression
      multiplyingExpression
       argument
        name
         er7
  \n
 line
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         er8
     ,
     expression
      multiplyingExpression
       argument
        name
         er9
     ,
     expression
      multiplyingExpression
       argument
        name
         erA
     ,
     expression
      multiplyingExpression
       argument
        name
         erB
  \n
 line
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         erC
     ,
     expression
      multiplyingExpression
       argument
        name
         erD
     ,
     expression
      multiplyingExpression
       argument
        name
         erE
     ,
     expression
      multiplyingExpression
       argument
        name
         erF
  \n\n
 line
  lbl
   label
    name
     er0
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Null Error ??'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  assemblerdirective
   equ
    name
     er1
    equ
    expression
     multiplyingExpression
      argument
       name
        er0
  \n
 line
  assemblerdirective
   equ
    name
     er2
    equ
    expression
     multiplyingExpression
      argument
       name
        er0
  \n
 line
  assemblerdirective
   equ
    name
     er3
    equ
    expression
     multiplyingExpression
      argument
       name
        er0
  \n
 line
  lbl
   label
    name
     er4
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Clock Error :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     er5
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Late DMA :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     er6
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'ID CRC Error :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     er7
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Data CRC Error :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     er8
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Drive Not Ready :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     er9
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Write Protect :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     erA
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Trk 00 Not Found :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     erB
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Write Fault :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     erC
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         cr
     ,
     expression
      multiplyingExpression
       argument
        name
         lf
     ,
     expression
      multiplyingExpression
       argument
        string_
         'Sector Not Found :'
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  assemblerdirective
   equ
    name
     erD
    equ
    expression
     multiplyingExpression
      argument
       name
        er0
  \n
 line
  assemblerdirective
   equ
    name
     erE
    equ
    expression
     multiplyingExpression
      argument
       name
        er0
  \n
 line
  assemblerdirective
   equ
    name
     erF
    equ
    expression
     multiplyingExpression
      argument
       name
        er0
  \n
 line
  assemblerdirective
   equ
    name
     nrdymsg
    equ
    expression
     multiplyingExpression
      argument
       name
        er8
  \n\n
 line
  lbl
   label
    name
     rtry_cnt
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     last_com
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     dma_adr
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     dma_seg
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     sel_mask
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         40h
  \n\n
 line
  \n\n
 line
  lbl
   label
    name
     io_com
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         3
  \n
 line
  lbl
   label
    name
     rd_wr
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     trk
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     sect
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         0
  \n\n
 line
  lbl
   label
    name
     hom_com
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         2
     ,
     expression
      multiplyingExpression
       argument
        number
         29h
     ,
     expression
      multiplyingExpression
       argument
        number
         0
  \n
 line
  lbl
   label
    name
     rds_com
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         1
     ,
     expression
      multiplyingExpression
       argument
        number
         2ch
  \n\n
 line
  \n\n
 line
  lbl
   label
    name
     segtable
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         2
  \n
 line
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         tpa_seg
  \n
 line
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        name
         tpa_len
  \n
 line
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         2000h
  \n
 line
  assemblerdirective
   dw
    dw
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         2000h
  \n\n
 line
  assemblerdirective
   include_
    include
    name
     singles.lib
  \n\n
 line
  lbl
   label
    name
     loc_stk
  assemblerdirective
   rw
    rw
    expression
     multiplyingExpression
      argument
       number
        32
  \n
 line
  assemblerdirective
   equ
    name
     stkbase
    equ
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          dollar
           $
  \n\n
 line
  assemblerdirective
   equ
    name
     lastoff
    equ
    expression
     multiplyingExpression
      argument
       offset
       expression
        multiplyingExpression
         argument
          dollar
           $
  \n
 line
  assemblerdirective
   equ
    name
     tpa_seg
    equ
    expression
     multiplyingExpression
      argument
       (
       expression
        multiplyingExpression
         argument
          name
           lastoff
        sign
         +
        multiplyingExpression
         argument
          number
           0400h
        sign
         +
        multiplyingExpression
         argument
          number
           15
       )
      /
      argument
       number
        16
  \n
 line
  assemblerdirective
   equ
    name
     tpa_len
    equ
    expression
     multiplyingExpression
      argument
       number
        0800h
     sign
      -
     multiplyingExpression
      argument
       name
        tpa_seg
  \n
 line
  assemblerdirective
   db
    db
    expressionlist
     expression
      multiplyingExpression
       argument
        number
         0
  \n\n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  \n
 line
  assemblerdirective
   dseg
    dseg
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  assemblerdirective
   org
    org
    expression
     multiplyingExpression
      argument
       number
        0
  \n
 line
  lbl
   label
    name
     int0_offset
  assemblerdirective
   rw
    rw
    expression
     multiplyingExpression
      argument
       number
        1
  \n
 line
  lbl
   label
    name
     int0_segment
  assemblerdirective
   rw
    rw
    expression
     multiplyingExpression
      argument
       number
        1
  \n
 line
  \n
 line
  assemblerdirective
   rw
    rw
    expression
     multiplyingExpression
      argument
       number
        2
      *
      argument
       (
       expression
        multiplyingExpression
         argument
          name
           bdos_int
        sign
         -
        multiplyingExpression
         argument
          number
           1
       )
  \n\n
 line
  lbl
   label
    name
     bdos_offset
  assemblerdirective
   rw
    rw
    expression
     multiplyingExpression
      argument
       number
        1
  \n
 line
  lbl
   label
    name
     bdos_segment
  assemblerdirective
   rw
    rw
    expression
     multiplyingExpression
      argument
       number
        1
  \n
 line
  assemblerdirective
   end
    END
  \n
 <EOF>
