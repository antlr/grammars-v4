start_
 chunk
  block
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         'testing tables, next, and for'
      )
   stat
    local
    function
    checkerror
    funcbody
     (
     parlist
      namelist
       msg
       ,
       f
      ,
      ...
     )
     block
      stat
       local
       attnamelist
        s
        attrib
        ,
        err
        attrib
       =
       explist
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               f
             ,
             exp
              ...
            )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            not
            exp
             prefixexp
              s
           and
           exp
            prefixexp
             functioncall
              string
              .
              find
              args
               (
               explist
                exp
                 prefixexp
                  err
                ,
                exp
                 prefixexp
                  msg
               )
         )
     end
   stat
    local
    function
    check
    funcbody
     (
     parlist
      namelist
       t
       ,
       na
       ,
       nh
     )
     block
      stat
       if
       exp
        not
        exp
         prefixexp
          T
       then
       block
        retstat
         return
       end
      stat
       local
       attnamelist
        a
        attrib
        ,
        h
        attrib
       =
       explist
        exp
         prefixexp
          functioncall
           T
           .
           querytab
           args
            (
            explist
             exp
              prefixexp
               t
            )
      stat
       if
       exp
        exp
         exp
          prefixexp
           a
         ~=
         exp
          prefixexp
           na
        or
        exp
         exp
          prefixexp
           h
         ~=
         exp
          prefixexp
           nh
       then
       block
        stat
         functioncall
          print
          args
           (
           explist
            exp
             prefixexp
              na
            ,
            exp
             prefixexp
              nh
            ,
            exp
             prefixexp
              a
            ,
            exp
             prefixexp
              h
           )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             nil
           )
       end
     end
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      100
    do
    block
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         exp
          prefixexp
           i
         ..
         exp
          string
           "+"
        ]
      =
      explist
       exp
        true
    end
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      100
    do
    block
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         exp
          prefixexp
           i
         ..
         exp
          string
           "+"
        ]
      =
      explist
       exp
        prefixexp
         undef
    end
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      100
    do
    block
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         prefixexp
          i
        ]
      =
      explist
       exp
        true
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           #
           exp
            prefixexp
             a
          ==
          exp
           prefixexp
            i
        )
    end
   stat
    do
    block
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        100
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          prefixexp
           i
      end
     stat
      functioncall
       check
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          number
           128
         ,
         exp
          number
           0
        )
     stat
      for
      i
      =
      exp
       number
        5
      ,
      exp
       number
        95
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          nil
      end
     stat
      functioncall
       check
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          number
           128
         ,
         exp
          number
           0
        )
     stat
      varlist
       var
        prefixexp
         a
        .
        x
      =
      explist
       exp
        number
         1
     stat
      functioncall
       check
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          number
           4
         ,
         exp
          number
           8
        )
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        4
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              a
              [
              exp
               prefixexp
                i
              ]
            ==
            exp
             prefixexp
              i
          )
      end
     stat
      for
      i
      =
      exp
       number
        5
      ,
      exp
       number
        95
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              a
              [
              exp
               prefixexp
                i
              ]
            ==
            exp
             nil
          )
      end
     stat
      for
      i
      =
      exp
       number
        96
      ,
      exp
       number
        100
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              a
              [
              exp
               prefixexp
                i
              ]
            ==
            exp
             prefixexp
              i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
            .
            x
          ==
          exp
           number
            1
        )
    end
   stat
    local
    attnamelist
     x
     attrib
    =
    explist
     exp
      number
       0
   stat
    for
    namelist
     k
     ,
     v
    in
    explist
     exp
      prefixexp
       functioncall
        ipairs
        args
         tableconstructor
          {
          fieldlist
           field
            exp
             number
              10
           fieldsep
            ,
           field
            exp
             number
              20
           fieldsep
            ,
           field
            exp
             number
              30
           fieldsep
            ;
           field
            x
            =
            exp
             number
              12
          }
    do
    block
     stat
      varlist
       var
        x
      =
      explist
       exp
        exp
         prefixexp
          x
        +
        exp
         number
          1
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             k
           ==
           exp
            prefixexp
             x
          and
          exp
           exp
            prefixexp
             v
           ==
           exp
            exp
             prefixexp
              x
            *
            exp
             number
              10
        )
    end
   stat
    for
    namelist
     _
    in
    explist
     exp
      prefixexp
       functioncall
        ipairs
        args
         tableconstructor
          {
          fieldlist
           field
            x
            =
            exp
             number
              12
           fieldsep
            ,
           field
            y
            =
            exp
             number
              24
          }
    do
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          nil
        )
    end
   stat
    varlist
     var
      x
    =
    explist
     exp
      false
   stat
    local
    attnamelist
     i
     attrib
    =
    explist
     exp
      number
       0
   stat
    for
    namelist
     k
     ,
     v
    in
    explist
     exp
      prefixexp
       functioncall
        ipairs
        args
         tableconstructor
          {
          fieldlist
           field
            exp
             true
           fieldsep
            ,
           field
            exp
             false
           fieldsep
            ,
           field
            exp
             true
           fieldsep
            ,
           field
            exp
             false
          }
    do
    block
     stat
      varlist
       var
        i
      =
      explist
       exp
        exp
         prefixexp
          i
        +
        exp
         number
          1
     stat
      varlist
       var
        x
      =
      explist
       exp
        not
        exp
         prefixexp
          x
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            x
          ==
          exp
           prefixexp
            v
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          i
        ==
        exp
         number
          4
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            type
            args
             (
             explist
              exp
               prefixexp
                functioncall
                 ipairs
                 args
                  tableconstructor
                   {
                   }
             )
         ==
         exp
          string
           'function'
        and
        exp
         exp
          prefixexp
           functioncall
            ipairs
            args
             tableconstructor
              {
              }
         ==
         exp
          prefixexp
           functioncall
            ipairs
            args
             tableconstructor
              {
              }
      )
   stat
    do
    block
     stat
      local
      attnamelist
       f
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          ipairs
          args
           tableconstructor
            {
            }
     stat
      local
      attnamelist
       k
       attrib
       ,
       v
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          f
          args
           (
           explist
            exp
             tableconstructor
              {
              fieldlist
               field
                [
                exp
                 prefixexp
                  math
                  .
                  mininteger
                ]
                =
                exp
                 number
                  10
              }
            ,
            exp
             prefixexp
              math
              .
              maxinteger
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             k
           ==
           exp
            prefixexp
             math
             .
             mininteger
          and
          exp
           exp
            prefixexp
             v
           ==
           exp
            number
             10
        )
     stat
      varlist
       var
        k
       ,
       var
        v
      =
      explist
       exp
        prefixexp
         functioncall
          f
          args
           (
           explist
            exp
             tableconstructor
              {
              fieldlist
               field
                [
                exp
                 prefixexp
                  math
                  .
                  mininteger
                ]
                =
                exp
                 number
                  10
              }
            ,
            exp
             prefixexp
              k
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            k
          ==
          exp
           nil
        )
    end
   stat
    if
    exp
     not
     exp
      prefixexp
       T
    then
    block
     stat
      functioncall
       (
       exp
        exp
         prefixexp
          Message
        or
        exp
         prefixexp
          print
       )
       args
        (
        explist
         exp
          string
           '\n >>> testC not active: skipping tests for table sizes <<<\n'
        )
    else
    block
     stat
      local
      function
      mp2
      funcbody
       (
       parlist
        namelist
         n
       )
       block
        stat
         local
         attnamelist
          mp
          attrib
         =
         explist
          exp
           exp
            number
             2
           ^
           exp
            prefixexp
             functioncall
              math
              .
              ceil
              args
               (
               explist
                exp
                 prefixexp
                  functioncall
                   math
                   .
                   log
                   args
                    (
                    explist
                     exp
                      prefixexp
                       n
                     ,
                     exp
                      number
                       2
                    )
               )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              exp
               prefixexp
                n
              ==
              exp
               number
                0
             or
             exp
              prefixexp
               (
               exp
                exp
                 exp
                  exp
                   prefixexp
                    mp
                  /
                  exp
                   number
                    2
                 <
                 exp
                  prefixexp
                   n
                and
                exp
                 exp
                  prefixexp
                   n
                 <=
                 exp
                  prefixexp
                   mp
               )
           )
        retstat
         return
         explist
          exp
           prefixexp
            mp
       end
     stat
      do
      block
       stat
        local
        attnamelist
         s
         attrib
        =
        explist
         exp
          number
           0
       stat
        for
        namelist
         _
        in
        explist
         exp
          prefixexp
           functioncall
            pairs
            args
             (
             explist
              exp
               prefixexp
                math
             )
        do
        block
         stat
          varlist
           var
            s
          =
          explist
           exp
            exp
             prefixexp
              s
            +
            exp
             number
              1
        end
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             math
           ,
           exp
            number
             0
           ,
           exp
            prefixexp
             functioncall
              mp2
              args
               (
               explist
                exp
                 prefixexp
                  s
               )
          )
      end
     stat
      local
      attnamelist
       sizes
       attrib
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            number
             0
          fieldsep
           ,
          field
           exp
            number
             1
          fieldsep
           ,
          field
           exp
            number
             2
          fieldsep
           ,
          field
           exp
            number
             3
          fieldsep
           ,
          field
           exp
            number
             4
          fieldsep
           ,
          field
           exp
            number
             5
          fieldsep
           ,
          field
           exp
            number
             7
          fieldsep
           ,
          field
           exp
            number
             8
          fieldsep
           ,
          field
           exp
            number
             9
          fieldsep
           ,
          field
           exp
            number
             15
          fieldsep
           ,
          field
           exp
            number
             16
          fieldsep
           ,
          field
           exp
            number
             17
          fieldsep
           ,
          field
           exp
            number
             30
          fieldsep
           ,
          field
           exp
            number
             31
          fieldsep
           ,
          field
           exp
            number
             32
          fieldsep
           ,
          field
           exp
            number
             33
          fieldsep
           ,
          field
           exp
            number
             34
          fieldsep
           ,
          field
           exp
            number
             254
          fieldsep
           ,
          field
           exp
            number
             255
          fieldsep
           ,
          field
           exp
            number
             256
          fieldsep
           ,
          field
           exp
            number
             500
          fieldsep
           ,
          field
           exp
            number
             1000
         }
     stat
      for
      namelist
       _
       ,
       sa
      in
      explist
       exp
        prefixexp
         functioncall
          ipairs
          args
           (
           explist
            exp
             prefixexp
              sizes
           )
      do
      block
       stat
        local
        attnamelist
         arr
         attrib
        =
        explist
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              string
               "return {"
           }
       stat
        for
        i
        =
        exp
         number
          1
        ,
        exp
         prefixexp
          sa
        do
        block
         stat
          varlist
           var
            prefixexp
             arr
            [
            exp
             exp
              number
               1
             +
             exp
              prefixexp
               i
            ]
          =
          explist
           exp
            string
             "1,"
        end
       stat
        for
        namelist
         _
         ,
         sh
        in
        explist
         exp
          prefixexp
           functioncall
            ipairs
            args
             (
             explist
              exp
               prefixexp
                sizes
             )
        do
        block
         stat
          for
          j
          =
          exp
           number
            1
          ,
          exp
           prefixexp
            sh
          do
          block
           stat
            varlist
             var
              prefixexp
               arr
              [
              exp
               exp
                exp
                 number
                  1
                +
                exp
                 prefixexp
                  sa
               +
               exp
                prefixexp
                 j
              ]
            =
            explist
             exp
              prefixexp
               functioncall
                string
                .
                format
                args
                 (
                 explist
                  exp
                   string
                    'k%x=%d,'
                  ,
                  exp
                   prefixexp
                    j
                  ,
                  exp
                   prefixexp
                    j
                 )
          end
         stat
          varlist
           var
            prefixexp
             arr
            [
            exp
             exp
              exp
               exp
                number
                 1
               +
               exp
                prefixexp
                 sa
              +
              exp
               prefixexp
                sh
             +
             exp
              number
               1
            ]
          =
          explist
           exp
            string
             "}"
         stat
          local
          attnamelist
           prog
           attrib
          =
          explist
           exp
            prefixexp
             functioncall
              table
              .
              concat
              args
               (
               explist
                exp
                 prefixexp
                  arr
               )
         stat
          local
          attnamelist
           f
           attrib
          =
          explist
           exp
            prefixexp
             functioncall
              assert
              args
               (
               explist
                exp
                 prefixexp
                  functioncall
                   load
                   args
                    (
                    explist
                     exp
                      prefixexp
                       prog
                    )
               )
         stat
          functioncall
           collectgarbage
           args
            (
            explist
             exp
              string
               "stop"
            )
         stat
          functioncall
           f
           args
            (
            )
         stat
          if
          exp
           exp
            exp
             prefixexp
              sa
            ==
            exp
             number
              0
           or
           exp
            exp
             prefixexp
              sh
            ==
            exp
             number
              0
          then
          block
           stat
            functioncall
             T
             .
             alloccount
             args
              (
              explist
               exp
                number
                 2
              )
           stat
            ;
          else
          block
           stat
            functioncall
             T
             .
             alloccount
             args
              (
              explist
               exp
                number
                 3
              )
           stat
            ;
          end
         stat
          local
          attnamelist
           t
           attrib
          =
          explist
           exp
            prefixexp
             functioncall
              f
              args
               (
               )
         stat
          functioncall
           T
           .
           alloccount
           args
            (
            )
         stat
          ;
         stat
          functioncall
           collectgarbage
           args
            (
            explist
             exp
              string
               "restart"
            )
         stat
          functioncall
           assert
           args
            (
            explist
             exp
              exp
               #
               exp
                prefixexp
                 t
              ==
              exp
               prefixexp
                sa
            )
         stat
          functioncall
           check
           args
            (
            explist
             exp
              prefixexp
               t
             ,
             exp
              prefixexp
               sa
             ,
             exp
              prefixexp
               functioncall
                mp2
                args
                 (
                 explist
                  exp
                   prefixexp
                    sh
                 )
            )
        end
      end
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       prefixexp
        sizes
        [
        exp
         #
         exp
          prefixexp
           sizes
        ]
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          prefixexp
           i
      end
     stat
      for
      namelist
       k
      in
      explist
       exp
        prefixexp
         functioncall
          ipairs
          args
           (
           explist
            exp
             prefixexp
              sizes
           )
      do
      block
       stat
        local
        attnamelist
         t
         attrib
        =
        explist
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               functioncall
                table
                .
                unpack
                args
                 (
                 explist
                  exp
                   prefixexp
                    a
                  ,
                  exp
                   number
                    1
                  ,
                  exp
                   prefixexp
                    k
                 )
           }
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             #
             exp
              prefixexp
               t
            ==
            exp
             prefixexp
              k
          )
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             t
           ,
           exp
            prefixexp
             k
           ,
           exp
            number
             0
          )
       stat
        varlist
         var
          t
        =
        explist
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              number
               1
            fieldsep
             ,
            field
             exp
              number
               2
            fieldsep
             ,
            field
             exp
              number
               3
            fieldsep
             ,
            field
             exp
              prefixexp
               functioncall
                table
                .
                unpack
                args
                 (
                 explist
                  exp
                   prefixexp
                    a
                  ,
                  exp
                   number
                    1
                  ,
                  exp
                   prefixexp
                    k
                 )
           }
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             t
           ,
           exp
            exp
             prefixexp
              k
            +
            exp
             number
              3
           ,
           exp
            number
             0
          )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             #
             exp
              prefixexp
               t
            ==
            exp
             exp
              prefixexp
               k
             +
             exp
              number
               3
          )
      end
     stat
      local
      attnamelist
       lim
       attrib
      =
      explist
       exp
        number
         130
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      ;
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          2
        ]
      =
      explist
       exp
        number
         1
     stat
      ;
     stat
      functioncall
       check
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          number
           0
         ,
         exp
          number
           1
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      ;
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          0
        ]
      =
      explist
       exp
        number
         1
     stat
      ;
     stat
      functioncall
       check
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          number
           0
         ,
         exp
          number
           1
        )
     stat
      ;
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          2
        ]
      =
      explist
       exp
        number
         1
     stat
      ;
     stat
      functioncall
       check
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          number
           0
         ,
         exp
          number
           2
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      ;
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          0
        ]
      =
      explist
       exp
        number
         1
     stat
      ;
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          1
        ]
      =
      explist
       exp
        number
         1
     stat
      ;
     stat
      functioncall
       check
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          number
           1
         ,
         exp
          number
           1
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       prefixexp
        lim
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          number
           1
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             #
             exp
              prefixexp
               a
            ==
            exp
             prefixexp
              i
          )
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             a
           ,
           exp
            prefixexp
             functioncall
              mp2
              args
               (
               explist
                exp
                 prefixexp
                  i
               )
           ,
           exp
            number
             0
          )
      end
     stat
      varlist
       var
        a
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       prefixexp
        lim
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           exp
            string
             'a'
           ..
           exp
            prefixexp
             i
          ]
        =
        explist
         exp
          number
           1
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             #
             exp
              prefixexp
               a
            ==
            exp
             number
              0
          )
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             a
           ,
           exp
            number
             0
           ,
           exp
            prefixexp
             functioncall
              mp2
              args
               (
               explist
                exp
                 prefixexp
                  i
               )
          )
      end
     stat
      varlist
       var
        a
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        16
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          prefixexp
           i
      end
     stat
      functioncall
       check
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          number
           16
         ,
         exp
          number
           0
        )
     stat
      do
      block
       stat
        for
        i
        =
        exp
         number
          1
        ,
        exp
         number
          11
        do
        block
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            prefixexp
             undef
        end
       stat
        for
        i
        =
        exp
         number
          30
        ,
        exp
         number
          50
        do
        block
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            true
         stat
          ;
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            prefixexp
             undef
        end
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             a
           ,
           exp
            number
             0
           ,
           exp
            number
             8
          )
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           number
            10
          ]
        =
        explist
         exp
          number
           1
       stat
        for
        i
        =
        exp
         number
          30
        ,
        exp
         number
          50
        do
        block
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            true
         stat
          ;
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            prefixexp
             undef
        end
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             a
           ,
           exp
            number
             0
           ,
           exp
            number
             8
          )
       stat
        for
        i
        =
        exp
         number
          1
        ,
        exp
         number
          14
        do
        block
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            true
         stat
          ;
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            prefixexp
             undef
        end
       stat
        for
        i
        =
        exp
         number
          18
        ,
        exp
         number
          50
        do
        block
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            true
         stat
          ;
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            prefixexp
             undef
        end
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             a
           ,
           exp
            number
             0
           ,
           exp
            number
             4
          )
      end
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       prefixexp
        lim
      do
      block
       stat
        local
        attnamelist
         a
         attrib
        =
        explist
         exp
          tableconstructor
           {
           }
       stat
        for
        i
        =
        exp
         prefixexp
          i
        ,
        exp
         number
          1
        ,
        exp
         -
         exp
          number
           1
        do
        block
         stat
          varlist
           var
            prefixexp
             a
            [
            exp
             prefixexp
              i
            ]
          =
          explist
           exp
            prefixexp
             i
        end
       stat
        functioncall
         check
         args
          (
          explist
           exp
            prefixexp
             a
           ,
           exp
            prefixexp
             functioncall
              mp2
              args
               (
               explist
                exp
                 prefixexp
                  i
               )
           ,
           exp
            number
             0
          )
      end
     stat
      varlist
       var
        lim
      =
      explist
       exp
        number
         35
     stat
      local
      function
      foo
      funcbody
       (
       parlist
        namelist
         n
        ,
        ...
       )
       block
        stat
         local
         attnamelist
          arg
          attrib
         =
         explist
          exp
           tableconstructor
            {
            fieldlist
             field
              exp
               ...
            }
        stat
         functioncall
          check
          args
           (
           explist
            exp
             prefixexp
              arg
            ,
            exp
             prefixexp
              n
            ,
            exp
             number
              0
           )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               functioncall
                select
                args
                 (
                 explist
                  exp
                   string
                    '#'
                  ,
                  exp
                   ...
                 )
             ==
             exp
              prefixexp
               n
           )
        stat
         varlist
          var
           prefixexp
            arg
           [
           exp
            exp
             prefixexp
              n
            +
            exp
             number
              1
           ]
         =
         explist
          exp
           true
        stat
         functioncall
          check
          args
           (
           explist
            exp
             prefixexp
              arg
            ,
            exp
             prefixexp
              functioncall
               mp2
               args
                (
                explist
                 exp
                  exp
                   prefixexp
                    n
                  +
                  exp
                   number
                    1
                )
            ,
            exp
             number
              0
           )
        stat
         varlist
          var
           prefixexp
            arg
           .
           x
         =
         explist
          exp
           true
        stat
         functioncall
          check
          args
           (
           explist
            exp
             prefixexp
              arg
            ,
            exp
             prefixexp
              functioncall
               mp2
               args
                (
                explist
                 exp
                  exp
                   prefixexp
                    n
                  +
                  exp
                   number
                    1
                )
            ,
            exp
             number
              1
           )
       end
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       prefixexp
        lim
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          true
       stat
        ;
       stat
        functioncall
         foo
         args
          (
          explist
           exp
            prefixexp
             i
           ,
           exp
            prefixexp
             functioncall
              table
              .
              unpack
              args
               (
               explist
                exp
                 prefixexp
                  a
               )
          )
      end
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        64
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          true
      end
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        64
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          nil
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             T
             .
             querytab
             args
              (
              explist
               exp
                prefixexp
                 a
              )
          ==
          exp
           number
            64
        )
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          32
        ]
      =
      explist
       exp
        true
     stat
      ;
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          48
        ]
      =
      explist
       exp
        true
     stat
      ;
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          51
        ]
      =
      explist
       exp
        true
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           #
           exp
            prefixexp
             a
          ==
          exp
           number
            48
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             select
             args
              (
              explist
               exp
                number
                 4
               ,
               exp
                prefixexp
                 functioncall
                  T
                  .
                  querytab
                  args
                   (
                   explist
                    exp
                     prefixexp
                      a
                   )
              )
          ==
          exp
           number
            48
        )
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         number
          50
        ]
      =
      explist
       exp
        true
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             select
             args
              (
              explist
               exp
                number
                 4
               ,
               exp
                prefixexp
                 functioncall
                  T
                  .
                  querytab
                  args
                   (
                   explist
                    exp
                     prefixexp
                      a
                   )
              )
          ==
          exp
           number
            50
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           #
           exp
            prefixexp
             a
          ==
          exp
           number
            51
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         #
         exp
          tableconstructor
           {
           }
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         #
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              nil
           }
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         #
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              nil
            fieldsep
             ,
            field
             exp
              nil
           }
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         #
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              nil
            fieldsep
             ,
            field
             exp
              nil
            fieldsep
             ,
            field
             exp
              nil
           }
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         #
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              nil
            fieldsep
             ,
            field
             exp
              nil
            fieldsep
             ,
            field
             exp
              nil
            fieldsep
             ,
            field
             exp
              nil
           }
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         #
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              number
               1
            fieldsep
             ,
            field
             exp
              number
               2
            fieldsep
             ,
            field
             exp
              number
               3
            fieldsep
             ,
            field
             exp
              nil
            fieldsep
             ,
            field
             exp
              nil
           }
        ==
        exp
         number
          3
      )
   stat
    functioncall
     print
     args
      string
       '+'
   stat
    local
    attnamelist
     nofind
     attrib
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    varlist
     var
      a
     ,
     var
      b
     ,
     var
      c
    =
    explist
     exp
      number
       1
     ,
     exp
      number
       2
     ,
     exp
      number
       3
   stat
    varlist
     var
      a
     ,
     var
      b
     ,
     var
      c
    =
    explist
     exp
      nil
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           next
           args
            tableconstructor
             {
             }
        ==
        exp
         prefixexp
          functioncall
           next
           args
            tableconstructor
             {
             }
      )
   stat
    local
    function
    find
    funcbody
     (
     parlist
      namelist
       name
     )
     block
      stat
       local
       attnamelist
        n
        attrib
        ,
        v
        attrib
      stat
       while
       exp
        number
         1
       do
       block
        stat
         varlist
          var
           n
          ,
          var
           v
         =
         explist
          exp
           prefixexp
            functioncall
             next
             args
              (
              explist
               exp
                prefixexp
                 _G
               ,
               exp
                prefixexp
                 n
              )
        stat
         if
         exp
          not
          exp
           prefixexp
            n
         then
         block
          retstat
           return
           explist
            exp
             prefixexp
              nofind
         end
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               _G
               [
               exp
                prefixexp
                 n
               ]
             ~=
             exp
              prefixexp
               undef
           )
        stat
         if
         exp
          exp
           prefixexp
            n
          ==
          exp
           prefixexp
            name
         then
         block
          retstat
           return
           explist
            exp
             prefixexp
              v
         end
       end
     end
   stat
    local
    function
    find1
    funcbody
     (
     parlist
      namelist
       name
     )
     block
      stat
       for
       namelist
        n
        ,
        v
       in
       explist
        exp
         prefixexp
          functioncall
           pairs
           args
            (
            explist
             exp
              prefixexp
               _G
            )
       do
       block
        stat
         if
         exp
          exp
           prefixexp
            n
          ==
          exp
           prefixexp
            name
         then
         block
          retstat
           return
           explist
            exp
             prefixexp
              v
         end
       end
      retstat
       return
       explist
        exp
         nil
     end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           print
         ==
         exp
          prefixexp
           functioncall
            find
            args
             (
             explist
              exp
               string
                "print"
             )
        and
        exp
         exp
          prefixexp
           print
         ==
         exp
          prefixexp
           functioncall
            find1
            args
             (
             explist
              exp
               string
                "print"
             )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          _G
          [
          exp
           string
            "print"
          ]
        ==
        exp
         prefixexp
          functioncall
           find
           args
            (
            explist
             exp
              string
               "print"
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          assert
        ==
        exp
         prefixexp
          functioncall
           find1
           args
            (
            explist
             exp
              string
               "assert"
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          nofind
        ==
        exp
         prefixexp
          functioncall
           find
           args
            (
            explist
             exp
              string
               "return"
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           find1
           args
            (
            explist
             exp
              string
               "return"
            )
      )
   stat
    varlist
     var
      prefixexp
       _G
      [
      exp
       exp
        string
         "ret"
       ..
       exp
        string
         "urn"
      ]
    =
    explist
     exp
      prefixexp
       undef
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          nofind
        ==
        exp
         prefixexp
          functioncall
           find
           args
            (
            explist
             exp
              string
               "return"
            )
      )
   stat
    varlist
     var
      prefixexp
       _G
      [
      exp
       string
        "xxx"
      ]
    =
    explist
     exp
      number
       1
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          xxx
        ==
        exp
         prefixexp
          functioncall
           find
           args
            (
            explist
             exp
              string
               "xxx"
            )
      )
   stat
    functioncall
     checkerror
     args
      (
      explist
       exp
        string
         "invalid key"
       ,
       exp
        prefixexp
         next
       ,
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            number
             10
          fieldsep
           ,
          field
           exp
            number
             20
         }
       ,
       exp
        number
         3
      )
   stat
    functioncall
     checkerror
     args
      (
      explist
       exp
        string
         "bad argument"
       ,
       exp
        prefixexp
         pairs
      )
   stat
    functioncall
     checkerror
     args
      (
      explist
       exp
        string
         "bad argument"
       ,
       exp
        prefixexp
         ipairs
      )
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         '+'
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    for
    i
    =
    exp
     number
      0
    ,
    exp
     number
      10000
    do
    block
     stat
      if
      exp
       exp
        prefixexp
         functioncall
          math
          .
          fmod
          args
           (
           explist
            exp
             prefixexp
              i
            ,
            exp
             number
              10
           )
       ~=
       exp
        number
         0
      then
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           exp
            string
             'x'
           ..
           exp
            prefixexp
             i
          ]
        =
        explist
         exp
          prefixexp
           i
      end
    end
   stat
    varlist
     var
      n
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         n
         =
         exp
          number
           0
       }
   stat
    for
    namelist
     i
     ,
     v
    in
    explist
     exp
      prefixexp
       functioncall
        pairs
        args
         (
         explist
          exp
           prefixexp
            a
         )
    do
    block
     stat
      varlist
       var
        prefixexp
         n
        .
        n
      =
      explist
       exp
        exp
         prefixexp
          n
          .
          n
        +
        exp
         number
          1
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             i
           and
           exp
            prefixexp
             v
          and
          exp
           exp
            prefixexp
             a
             [
             exp
              prefixexp
               i
             ]
           ==
           exp
            prefixexp
             v
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          n
          .
          n
        ==
        exp
         number
          9000
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      nil
   stat
    do
    block
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      namelist
       n
       ,
       v
      in
      explist
       exp
        prefixexp
         functioncall
          pairs
          args
           (
           explist
            exp
             prefixexp
              _G
           )
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            n
          ]
        =
        explist
         exp
          prefixexp
           v
      end
     stat
      for
      namelist
       n
       ,
       v
      in
      explist
       exp
        prefixexp
         functioncall
          pairs
          args
           (
           explist
            exp
             prefixexp
              a
           )
      do
      block
       stat
        if
        exp
         exp
          exp
           not
           exp
            prefixexp
             package
             .
             loaded
             [
             exp
              prefixexp
               n
             ]
          and
          exp
           exp
            prefixexp
             functioncall
              type
              args
               (
               explist
                exp
                 prefixexp
                  v
               )
           ~=
           exp
            string
             "function"
         and
         exp
          not
          exp
           prefixexp
            functioncall
             string
             .
             find
             args
              (
              explist
               exp
                prefixexp
                 n
               ,
               exp
                string
                 "^[%u_]"
              )
        then
        block
         stat
          varlist
           var
            prefixexp
             _G
            [
            exp
             prefixexp
              n
            ]
          =
          explist
           exp
            prefixexp
             undef
        end
       stat
        functioncall
         collectgarbage
         args
          (
          )
      end
    end
   stat
    local
    function
    checknext
    funcbody
     (
     parlist
      namelist
       a
     )
     block
      stat
       local
       attnamelist
        b
        attrib
       =
       explist
        exp
         tableconstructor
          {
          }
      stat
       do
       block
        stat
         local
         attnamelist
          k
          attrib
          ,
          v
          attrib
         =
         explist
          exp
           prefixexp
            functioncall
             next
             args
              (
              explist
               exp
                prefixexp
                 a
              )
        stat
         ;
        stat
         while
         exp
          prefixexp
           k
         do
         block
          stat
           varlist
            var
             prefixexp
              b
             [
             exp
              prefixexp
               k
             ]
           =
           explist
            exp
             prefixexp
              v
          stat
           ;
          stat
           varlist
            var
             k
            ,
            var
             v
           =
           explist
            exp
             prefixexp
              functioncall
               next
               args
                (
                explist
                 exp
                  prefixexp
                   a
                 ,
                 exp
                  prefixexp
                   k
                )
         end
       end
      stat
       for
       namelist
        k
        ,
        v
       in
       explist
        exp
         prefixexp
          functioncall
           pairs
           args
            (
            explist
             exp
              prefixexp
               b
            )
       do
       block
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               a
               [
               exp
                prefixexp
                 k
               ]
             ==
             exp
              prefixexp
               v
           )
       end
      stat
       for
       namelist
        k
        ,
        v
       in
       explist
        exp
         prefixexp
          functioncall
           pairs
           args
            (
            explist
             exp
              prefixexp
               a
            )
       do
       block
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               b
               [
               exp
                prefixexp
                 k
               ]
             ==
             exp
              prefixexp
               v
           )
       end
     end
   stat
    functioncall
     checknext
     args
      tableconstructor
       {
       fieldlist
        field
         exp
          number
           1
        fieldsep
         ,
        field
         x
         =
         exp
          number
           1
        fieldsep
         ,
        field
         y
         =
         exp
          number
           2
        fieldsep
         ,
        field
         z
         =
         exp
          number
           3
       }
   stat
    functioncall
     checknext
     args
      tableconstructor
       {
       fieldlist
        field
         exp
          number
           1
        fieldsep
         ,
        field
         exp
          number
           2
        fieldsep
         ,
        field
         x
         =
         exp
          number
           1
        fieldsep
         ,
        field
         y
         =
         exp
          number
           2
        fieldsep
         ,
        field
         z
         =
         exp
          number
           3
       }
   stat
    functioncall
     checknext
     args
      tableconstructor
       {
       fieldlist
        field
         exp
          number
           1
        fieldsep
         ,
        field
         exp
          number
           2
        fieldsep
         ,
        field
         exp
          number
           3
        fieldsep
         ,
        field
         x
         =
         exp
          number
           1
        fieldsep
         ,
        field
         y
         =
         exp
          number
           2
        fieldsep
         ,
        field
         z
         =
         exp
          number
           3
       }
   stat
    functioncall
     checknext
     args
      tableconstructor
       {
       fieldlist
        field
         exp
          number
           1
        fieldsep
         ,
        field
         exp
          number
           2
        fieldsep
         ,
        field
         exp
          number
           3
        fieldsep
         ,
        field
         exp
          number
           4
        fieldsep
         ,
        field
         x
         =
         exp
          number
           1
        fieldsep
         ,
        field
         y
         =
         exp
          number
           2
        fieldsep
         ,
        field
         z
         =
         exp
          number
           3
       }
   stat
    functioncall
     checknext
     args
      tableconstructor
       {
       fieldlist
        field
         exp
          number
           1
        fieldsep
         ,
        field
         exp
          number
           2
        fieldsep
         ,
        field
         exp
          number
           3
        fieldsep
         ,
        field
         exp
          number
           4
        fieldsep
         ,
        field
         exp
          number
           5
        fieldsep
         ,
        field
         x
         =
         exp
          number
           1
        fieldsep
         ,
        field
         y
         =
         exp
          number
           2
        fieldsep
         ,
        field
         z
         =
         exp
          number
           3
       }
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         #
         exp
          tableconstructor
           {
           }
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         #
         exp
          tableconstructor
           {
           fieldlist
            field
             [
             exp
              -
              exp
               number
                1
             ]
             =
             exp
              number
               2
           }
        ==
        exp
         number
          0
      )
   stat
    for
    i
    =
    exp
     number
      0
    ,
    exp
     number
      40
    do
    block
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      for
      j
      =
      exp
       number
        1
      ,
      exp
       prefixexp
        i
      do
      block
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            j
          ]
        =
        explist
         exp
          prefixexp
           j
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           #
           exp
            prefixexp
             a
          ==
          exp
           prefixexp
            i
        )
    end
   stat
    function
    funcname
     table
     .
     maxn
    funcbody
     (
     parlist
      namelist
       t
     )
     block
      stat
       local
       attnamelist
        max
        attrib
       =
       explist
        exp
         number
          0
      stat
       for
       namelist
        k
       in
       explist
        exp
         prefixexp
          functioncall
           pairs
           args
            (
            explist
             exp
              prefixexp
               t
            )
       do
       block
        stat
         varlist
          var
           max
         =
         explist
          exp
           exp
            exp
             prefixexp
              (
              exp
               exp
                prefixexp
                 functioncall
                  type
                  args
                   (
                   explist
                    exp
                     prefixexp
                      k
                   )
               ==
               exp
                string
                 'number'
              )
            and
            exp
             prefixexp
              functioncall
               math
               .
               max
               args
                (
                explist
                 exp
                  prefixexp
                   max
                 ,
                 exp
                  prefixexp
                   k
                )
           or
           exp
            prefixexp
             max
       end
      retstat
       return
       explist
        exp
         prefixexp
          max
     end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           maxn
           args
            tableconstructor
             {
             }
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           maxn
           args
            tableconstructor
             {
             fieldlist
              field
               [
               exp
                string
                 "1000"
               ]
               =
               exp
                true
             }
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           maxn
           args
            tableconstructor
             {
             fieldlist
              field
               [
               exp
                string
                 "1000"
               ]
               =
               exp
                true
              fieldsep
               ,
              field
               [
               exp
                number
                 24.5
               ]
               =
               exp
                number
                 3
             }
        ==
        exp
         number
          24.5
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           maxn
           args
            tableconstructor
             {
             fieldlist
              field
               [
               exp
                number
                 1000
               ]
               =
               exp
                true
             }
        ==
        exp
         number
          1000
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           maxn
           args
            tableconstructor
             {
             fieldlist
              field
               [
               exp
                number
                 10
               ]
               =
               exp
                true
              fieldsep
               ,
              field
               [
               exp
                exp
                 number
                  100
                *
                exp
                 prefixexp
                  math
                  .
                  pi
               ]
               =
               exp
                prefixexp
                 print
             }
        ==
        exp
         exp
          number
           100
         *
         exp
          prefixexp
           math
           .
           pi
      )
   stat
    varlist
     var
      prefixexp
       table
      .
      maxn
    =
    explist
     exp
      nil
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    for
    i
    =
    exp
     number
      0
    ,
    exp
     number
      50
    do
    block
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         exp
          number
           2
         ^
         exp
          prefixexp
           i
        ]
      =
      explist
       exp
        true
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         a
         [
         exp
          #
          exp
           prefixexp
            a
         ]
      )
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         '+'
      )
   stat
    do
    block
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           [
           exp
            number
             1
           ]
           =
           exp
            number
             1
          fieldsep
           ,
          field
           [
           exp
            number
             1.1
           ]
           =
           exp
            number
             2
          fieldsep
           ,
          field
           [
           exp
            string
             'x'
           ]
           =
           exp
            number
             3
          fieldsep
           ,
          field
           [
           exp
            prefixexp
             functioncall
              string
              .
              rep
              args
               (
               explist
                exp
                 string
                  'x'
                ,
                exp
                 number
                  1000
               )
           ]
           =
           exp
            number
             4
          fieldsep
           ,
          field
           [
           exp
            prefixexp
             print
           ]
           =
           exp
            number
             5
          fieldsep
           ,
          field
           [
           exp
            prefixexp
             checkerror
           ]
           =
           exp
            number
             6
          fieldsep
           ,
          field
           [
           exp
            prefixexp
             functioncall
              coroutine
              .
              running
              args
               (
               )
           ]
           =
           exp
            number
             7
          fieldsep
           ,
          field
           [
           exp
            true
           ]
           =
           exp
            number
             8
          fieldsep
           ,
          field
           [
           exp
            prefixexp
             io
             .
             stdin
           ]
           =
           exp
            number
             9
          fieldsep
           ,
          field
           [
           exp
            tableconstructor
             {
             }
           ]
           =
           exp
            number
             10
          fieldsep
           ,
         }
     stat
      local
      attnamelist
       b
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        10
      do
      block
       stat
        varlist
         var
          prefixexp
           b
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          true
      end
     stat
      for
      namelist
       k
       ,
       v
      in
      explist
       exp
        prefixexp
         functioncall
          pairs
          args
           (
           explist
            exp
             prefixexp
              a
           )
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            prefixexp
             b
             [
             exp
              prefixexp
               v
             ]
          )
       stat
        ;
       stat
        varlist
         var
          prefixexp
           b
          [
          exp
           prefixexp
            v
          ]
        =
        explist
         exp
          prefixexp
           undef
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             next
             args
              (
              explist
               exp
                prefixexp
                 b
              )
          ==
          exp
           nil
        )
    end
   stat
    local
    attnamelist
     t
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         [
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              number
               1
           }
         ]
         =
         exp
          number
           1
        fieldsep
         ,
        field
         [
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              number
               2
           }
         ]
         =
         exp
          number
           2
        fieldsep
         ,
        field
         [
         exp
          prefixexp
           functioncall
            string
            .
            rep
            args
             (
             explist
              exp
               string
                "x "
              ,
              exp
               number
                4
             )
         ]
         =
         exp
          number
           3
        fieldsep
         ,
        field
         [
         exp
          number
           100.3
         ]
         =
         exp
          number
           4
        fieldsep
         ,
        field
         [
         exp
          number
           4
         ]
         =
         exp
          number
           5
       }
   stat
    local
    attnamelist
     n
     attrib
    =
    explist
     exp
      number
       0
   stat
    for
    namelist
     k
     ,
     v
    in
    explist
     exp
      prefixexp
       functioncall
        pairs
        args
         (
         explist
          exp
           prefixexp
            t
         )
    do
    block
     stat
      varlist
       var
        n
      =
      explist
       exp
        exp
         prefixexp
          n
        +
        exp
         number
          1
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            t
            [
            exp
             prefixexp
              k
            ]
          ==
          exp
           prefixexp
            v
        )
     stat
      varlist
       var
        prefixexp
         t
        [
        exp
         prefixexp
          k
        ]
      =
      explist
       exp
        prefixexp
         undef
     stat
      functioncall
       collectgarbage
       args
        (
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            t
            [
            exp
             prefixexp
              k
            ]
          ==
          exp
           prefixexp
            undef
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          n
        ==
        exp
         number
          5
      )
   stat
    do
    block
     stat
      functioncall
       print
       args
        (
        explist
         exp
          string
           "testing next x GC of deleted keys"
        )
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
                namelist
                 t
               )
               block
                stat
                 for
                 namelist
                  k
                  ,
                  v
                 in
                 explist
                  exp
                   prefixexp
                    functioncall
                     pairs
                     args
                      (
                      explist
                       exp
                        prefixexp
                         t
                      )
                 do
                 block
                  stat
                   local
                   attnamelist
                    k1
                    attrib
                   =
                   explist
                    exp
                     prefixexp
                      functioncall
                       next
                       args
                        (
                        explist
                         exp
                          prefixexp
                           t
                        )
                  stat
                   functioncall
                    assert
                    args
                     (
                     explist
                      exp
                       exp
                        prefixexp
                         k
                       ==
                       exp
                        prefixexp
                         k1
                     )
                  stat
                   varlist
                    var
                     prefixexp
                      t
                     [
                     exp
                      prefixexp
                       k
                     ]
                   =
                   explist
                    exp
                     nil
                  stat
                   local
                   attnamelist
                    expected
                    attrib
                   =
                   explist
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        exp
                         exp
                          exp
                           prefixexp
                            functioncall
                             type
                             args
                              (
                              explist
                               exp
                                prefixexp
                                 k
                              )
                          ==
                          exp
                           string
                            "table"
                         and
                         exp
                          prefixexp
                           k
                           [
                           exp
                            number
                             1
                           ]
                        or
                        exp
                         exp
                          exp
                           prefixexp
                            functioncall
                             type
                             args
                              (
                              explist
                               exp
                                prefixexp
                                 k
                              )
                          ==
                          exp
                           string
                            "function"
                         and
                         exp
                          prefixexp
                           functioncall
                            k
                            args
                             (
                             )
                       or
                       exp
                        prefixexp
                         functioncall
                          string
                          .
                          sub
                          args
                           (
                           explist
                            exp
                             prefixexp
                              k
                            ,
                            exp
                             number
                              1
                            ,
                            exp
                             number
                              1
                           )
                      )
                  stat
                   functioncall
                    assert
                    args
                     (
                     explist
                      exp
                       exp
                        prefixexp
                         expected
                       ==
                       exp
                        prefixexp
                         v
                     )
                  stat
                   functioncall
                    coroutine
                    .
                    yield
                    args
                     (
                     explist
                      exp
                       prefixexp
                        v
                     )
                 end
               end
           )
     stat
      local
      attnamelist
       t
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      varlist
       var
        prefixexp
         t
        [
        exp
         tableconstructor
          {
          fieldlist
           field
            exp
             number
              1
          }
        ]
      =
      explist
       exp
        number
         1
     stat
      varlist
       var
        prefixexp
         t
        [
        exp
         tableconstructor
          {
          fieldlist
           field
            exp
             number
              2
          }
        ]
      =
      explist
       exp
        number
         2
     stat
      varlist
       var
        prefixexp
         t
        [
        exp
         prefixexp
          functioncall
           string
           .
           rep
           args
            (
            explist
             exp
              string
               "a"
             ,
             exp
              number
               50
            )
        ]
      =
      explist
       exp
        string
         "a"
     stat
      varlist
       var
        prefixexp
         t
        [
        exp
         prefixexp
          functioncall
           string
           .
           rep
           args
            (
            explist
             exp
              string
               "b"
             ,
             exp
              number
               50
            )
        ]
      =
      explist
       exp
        string
         "b"
     stat
      varlist
       var
        prefixexp
         t
        [
        exp
         tableconstructor
          {
          fieldlist
           field
            exp
             number
              3
          }
        ]
      =
      explist
       exp
        number
         3
     stat
      varlist
       var
        prefixexp
         t
        [
        exp
         prefixexp
          functioncall
           string
           .
           rep
           args
            (
            explist
             exp
              string
               "c"
             ,
             exp
              number
               10
            )
        ]
      =
      explist
       exp
        string
         "c"
     stat
      varlist
       var
        prefixexp
         t
        [
        exp
         functiondef
          function
          funcbody
           (
           parlist
           )
           block
            retstat
             return
             explist
              exp
               number
                10
           end
        ]
      =
      explist
       exp
        number
         10
     stat
      local
      attnamelist
       count
       attrib
      =
      explist
       exp
        number
         7
     stat
      while
      exp
       prefixexp
        functioncall
         co
         args
          (
          explist
           exp
            prefixexp
             t
          )
      do
      block
       stat
        functioncall
         collectgarbage
         args
          (
          explist
           exp
            string
             "collect"
          )
       stat
        varlist
         var
          count
        =
        explist
         exp
          exp
           prefixexp
            count
          -
          exp
           number
            1
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             count
           ==
           exp
            number
             0
          and
          exp
           exp
            prefixexp
             functioncall
              next
              args
               (
               explist
                exp
                 prefixexp
                  t
               )
           ==
           exp
            nil
        )
    end
   stat
    local
    function
    test
    funcbody
     (
     parlist
      namelist
       a
     )
     block
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           not
           exp
            prefixexp
             functioncall
              pcall
              args
               (
               explist
                exp
                 prefixexp
                  table
                  .
                  insert
                ,
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  2
                ,
                exp
                 number
                  20
               )
         )
      stat
       ;
      stat
       functioncall
        table
        .
        insert
        args
         (
         explist
          exp
           prefixexp
            a
          ,
          exp
           number
            10
         )
      stat
       ;
      stat
       functioncall
        table
        .
        insert
        args
         (
         explist
          exp
           prefixexp
            a
          ,
          exp
           number
            2
          ,
          exp
           number
            20
         )
      stat
       ;
      stat
       functioncall
        table
        .
        insert
        args
         (
         explist
          exp
           prefixexp
            a
          ,
          exp
           number
            1
          ,
          exp
           -
           exp
            number
             1
         )
      stat
       ;
      stat
       functioncall
        table
        .
        insert
        args
         (
         explist
          exp
           prefixexp
            a
          ,
          exp
           number
            40
         )
      stat
       ;
      stat
       functioncall
        table
        .
        insert
        args
         (
         explist
          exp
           prefixexp
            a
          ,
          exp
           exp
            #
            exp
             prefixexp
              a
           +
           exp
            number
             1
          ,
          exp
           number
            50
         )
      stat
       functioncall
        table
        .
        insert
        args
         (
         explist
          exp
           prefixexp
            a
          ,
          exp
           number
            2
          ,
          exp
           -
           exp
            number
             2
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             a
             [
             exp
              number
               2
             ]
           ~=
           exp
            prefixexp
             undef
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             a
             [
             exp
              string
               "2"
             ]
           ==
           exp
            prefixexp
             undef
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           not
           exp
            prefixexp
             functioncall
              pcall
              args
               (
               explist
                exp
                 prefixexp
                  table
                  .
                  insert
                ,
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  0
                ,
                exp
                 number
                  20
               )
         )
      stat
       ;
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           not
           exp
            prefixexp
             functioncall
              pcall
              args
               (
               explist
                exp
                 prefixexp
                  table
                  .
                  insert
                ,
                exp
                 prefixexp
                  a
                ,
                exp
                 exp
                  #
                  exp
                   prefixexp
                    a
                 +
                 exp
                  number
                   2
                ,
                exp
                 number
                  20
               )
         )
      stat
       ;
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  1
               )
           ==
           exp
            -
            exp
             number
              1
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  1
               )
           ==
           exp
            -
            exp
             number
              2
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  1
               )
           ==
           exp
            number
             10
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  1
               )
           ==
           exp
            number
             20
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  1
               )
           ==
           exp
            number
             40
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  1
               )
           ==
           exp
            number
             50
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
                ,
                exp
                 number
                  1
               )
           ==
           exp
            nil
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
               )
           ==
           exp
            nil
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              table
              .
              remove
              args
               (
               explist
                exp
                 prefixexp
                  a
                ,
                exp
                 #
                 exp
                  prefixexp
                   a
               )
           ==
           exp
            nil
         )
     end
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         n
         =
         exp
          number
           0
        fieldsep
         ,
        field
         [
         exp
          -
          exp
           number
            7
         ]
         =
         exp
          string
           "ban"
       }
   stat
    functioncall
     test
     args
      (
      explist
       exp
        prefixexp
         a
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           a
           .
           n
         ==
         exp
          number
           0
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            -
            exp
             number
              7
           ]
         ==
         exp
          string
           "ban"
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         [
         exp
          -
          exp
           number
            7
         ]
         =
         exp
          string
           "ban"
       }
   stat
    ;
   stat
    functioncall
     test
     args
      (
      explist
       exp
        prefixexp
         a
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            a
            .
            n
          ==
          exp
           nil
         and
         exp
          exp
           #
           exp
            prefixexp
             a
          ==
          exp
           number
            0
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            -
            exp
             number
              7
           ]
         ==
         exp
          string
           "ban"
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         [
         exp
          -
          exp
           number
            1
         ]
         =
         exp
          string
           "ban"
       }
   stat
    functioncall
     test
     args
      (
      explist
       exp
        prefixexp
         a
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           #
           exp
            prefixexp
             a
          ==
          exp
           number
            0
         and
         exp
          exp
           prefixexp
            functioncall
             table
             .
             remove
             args
              (
              explist
               exp
                prefixexp
                 a
              )
          ==
          exp
           nil
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            -
            exp
             number
              1
           ]
         ==
         exp
          string
           "ban"
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         [
         exp
          number
           0
         ]
         =
         exp
          string
           "ban"
       }
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           #
           exp
            prefixexp
             a
          ==
          exp
           number
            0
         and
         exp
          exp
           prefixexp
            functioncall
             table
             .
             remove
             args
              (
              explist
               exp
                prefixexp
                 a
              )
          ==
          exp
           string
            "ban"
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             0
           ]
         ==
         exp
          prefixexp
           undef
      )
   stat
    functioncall
     table
     .
     insert
     args
      (
      explist
       exp
        prefixexp
         a
       ,
       exp
        number
         1
       ,
       exp
        number
         10
      )
   stat
    ;
   stat
    functioncall
     table
     .
     insert
     args
      (
      explist
       exp
        prefixexp
         a
       ,
       exp
        number
         1
       ,
       exp
        number
         20
      )
   stat
    ;
   stat
    functioncall
     table
     .
     insert
     args
      (
      explist
       exp
        prefixexp
         a
       ,
       exp
        number
         1
       ,
       exp
        -
        exp
         number
          1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
            )
        ==
        exp
         number
          10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
            )
        ==
        exp
         number
          20
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
            )
        ==
        exp
         -
         exp
          number
           1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
            )
        ==
        exp
         nil
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          string
           'c'
        fieldsep
         ,
        field
         exp
          string
           'd'
       }
   stat
    functioncall
     table
     .
     insert
     args
      (
      explist
       exp
        prefixexp
         a
       ,
       exp
        number
         3
       ,
       exp
        string
         'a'
      )
   stat
    functioncall
     table
     .
     insert
     args
      (
      explist
       exp
        prefixexp
         a
       ,
       exp
        string
         'b'
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              number
               1
            )
        ==
        exp
         string
          'c'
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              number
               1
            )
        ==
        exp
         string
          'd'
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              number
               1
            )
        ==
        exp
         string
          'a'
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              number
               1
            )
        ==
        exp
         string
          'b'
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              number
               1
            )
        ==
        exp
         nil
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          #
          exp
           prefixexp
            a
         ==
         exp
          number
           0
        and
        exp
         exp
          prefixexp
           a
           .
           n
         ==
         exp
          nil
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          number
           10
        fieldsep
         ,
        field
         exp
          number
           20
        fieldsep
         ,
        field
         exp
          number
           30
        fieldsep
         ,
        field
         exp
          number
           40
       }
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              exp
               #
               exp
                prefixexp
                 a
              +
              exp
               number
                1
            )
        ==
        exp
         nil
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               table
               .
               remove
             ,
             exp
              prefixexp
               a
             ,
             exp
              number
               0
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
          [
          exp
           #
           exp
            prefixexp
             a
          ]
        ==
        exp
         number
          40
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              #
              exp
               prefixexp
                a
            )
        ==
        exp
         number
          40
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
          [
          exp
           #
           exp
            prefixexp
             a
          ]
        ==
        exp
         number
          30
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           table
           .
           remove
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              number
               2
            )
        ==
        exp
         number
          20
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           a
           [
           exp
            #
            exp
             prefixexp
              a
           ]
         ==
         exp
          number
           30
        and
        exp
         exp
          #
          exp
           prefixexp
            a
         ==
         exp
          number
           2
      )
   stat
    do
    block
     stat
      local
      function
      test
      funcbody
       (
       parlist
        namelist
         proxy
         ,
         t
       )
       block
        stat
         for
         i
         =
         exp
          number
           1
         ,
         exp
          number
           10
         do
         block
          stat
           functioncall
            table
            .
            insert
            args
             (
             explist
              exp
               prefixexp
                proxy
              ,
              exp
               number
                1
              ,
              exp
               prefixexp
                i
             )
         end
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              exp
               exp
                #
                exp
                 prefixexp
                  proxy
               ==
               exp
                number
                 10
              and
              exp
               exp
                #
                exp
                 prefixexp
                  t
               ==
               exp
                number
                 10
             and
             exp
              exp
               prefixexp
                proxy
                [
                exp
                 number
                  1
                ]
              ~=
              exp
               prefixexp
                undef
           )
        stat
         for
         i
         =
         exp
          number
           1
         ,
         exp
          number
           10
         do
         block
          stat
           functioncall
            assert
            args
             (
             explist
              exp
               exp
                prefixexp
                 t
                 [
                 exp
                  prefixexp
                   i
                 ]
               ==
               exp
                exp
                 number
                  11
                -
                exp
                 prefixexp
                  i
             )
         end
        stat
         functioncall
          table
          .
          sort
          args
           (
           explist
            exp
             prefixexp
              proxy
           )
        stat
         for
         i
         =
         exp
          number
           1
         ,
         exp
          number
           10
         do
         block
          stat
           functioncall
            assert
            args
             (
             explist
              exp
               exp
                exp
                 prefixexp
                  t
                  [
                  exp
                   prefixexp
                    i
                  ]
                ==
                exp
                 prefixexp
                  i
               and
               exp
                exp
                 prefixexp
                  proxy
                  [
                  exp
                   prefixexp
                    i
                  ]
                ==
                exp
                 prefixexp
                  i
             )
         end
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               functioncall
                table
                .
                concat
                args
                 (
                 explist
                  exp
                   prefixexp
                    proxy
                  ,
                  exp
                   string
                    ","
                 )
             ==
             exp
              string
               "1,2,3,4,5,6,7,8,9,10"
           )
        stat
         for
         i
         =
         exp
          number
           1
         ,
         exp
          number
           8
         do
         block
          stat
           functioncall
            assert
            args
             (
             explist
              exp
               exp
                prefixexp
                 functioncall
                  table
                  .
                  remove
                  args
                   (
                   explist
                    exp
                     prefixexp
                      proxy
                    ,
                    exp
                     number
                      1
                   )
               ==
               exp
                prefixexp
                 i
             )
         end
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              exp
               #
               exp
                prefixexp
                 proxy
              ==
              exp
               number
                2
             and
             exp
              exp
               #
               exp
                prefixexp
                 t
              ==
              exp
               number
                2
           )
        stat
         local
         attnamelist
          a
          attrib
          ,
          b
          attrib
          ,
          c
          attrib
         =
         explist
          exp
           prefixexp
            functioncall
             table
             .
             unpack
             args
              (
              explist
               exp
                prefixexp
                 proxy
              )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              exp
               exp
                prefixexp
                 a
               ==
               exp
                number
                 9
              and
              exp
               exp
                prefixexp
                 b
               ==
               exp
                number
                 10
             and
             exp
              exp
               prefixexp
                c
              ==
              exp
               nil
           )
       end
     stat
      local
      attnamelist
       t
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      local
      attnamelist
       proxy
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          setmetatable
          args
           (
           explist
            exp
             tableconstructor
              {
              }
            ,
            exp
             tableconstructor
              {
              fieldlist
               field
                __len
                =
                exp
                 functiondef
                  function
                  funcbody
                   (
                   parlist
                   )
                   block
                    retstat
                     return
                     explist
                      exp
                       #
                       exp
                        prefixexp
                         t
                   end
               fieldsep
                ,
               field
                __index
                =
                exp
                 prefixexp
                  t
               fieldsep
                ,
               field
                __newindex
                =
                exp
                 prefixexp
                  t
               fieldsep
                ,
              }
           )
     stat
      functioncall
       test
       args
        (
        explist
         exp
          prefixexp
           proxy
         ,
         exp
          prefixexp
           t
        )
     stat
      local
      attnamelist
       count
       attrib
      =
      explist
       exp
        number
         0
     stat
      varlist
       var
        t
      =
      explist
       exp
        prefixexp
         functioncall
          setmetatable
          args
           (
           explist
            exp
             tableconstructor
              {
              }
            ,
            exp
             tableconstructor
              {
              fieldlist
               field
                __newindex
                =
                exp
                 functiondef
                  function
                  funcbody
                   (
                   parlist
                    namelist
                     t
                     ,
                     k
                     ,
                     v
                   )
                   block
                    stat
                     varlist
                      var
                       count
                     =
                     explist
                      exp
                       exp
                        prefixexp
                         count
                       +
                       exp
                        number
                         1
                    stat
                     ;
                    stat
                     functioncall
                      rawset
                      args
                       (
                       explist
                        exp
                         prefixexp
                          t
                        ,
                        exp
                         prefixexp
                          k
                        ,
                        exp
                         prefixexp
                          v
                       )
                   end
              }
           )
     stat
      functioncall
       test
       args
        (
        explist
         exp
          prefixexp
           t
         ,
         exp
          prefixexp
           t
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            count
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        t
      =
      explist
       exp
        prefixexp
         functioncall
          setmetatable
          args
           (
           explist
            exp
             tableconstructor
              {
              }
            ,
            exp
             tableconstructor
              {
              fieldlist
               field
                __index
                =
                exp
                 functiondef
                  function
                  funcbody
                   (
                   parlist
                    namelist
                     _
                     ,
                     k
                   )
                   block
                    retstat
                     return
                     explist
                      exp
                       exp
                        prefixexp
                         k
                       +
                       exp
                        number
                         1
                   end
               fieldsep
                ,
               field
                __len
                =
                exp
                 functiondef
                  function
                  funcbody
                   (
                   parlist
                    namelist
                     _
                   )
                   block
                    retstat
                     return
                     explist
                      exp
                       number
                        5
                   end
              }
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             table
             .
             concat
             args
              (
              explist
               exp
                prefixexp
                 t
               ,
               exp
                string
                 ";"
              )
          ==
          exp
           string
            "2;3;4;5;6"
        )
    end
   stat
    do
    block
     stat
      local
      attnamelist
       t
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          setmetatable
          args
           (
           explist
            exp
             tableconstructor
              {
              }
            ,
            exp
             tableconstructor
              {
              fieldlist
               field
                __len
                =
                exp
                 functiondef
                  function
                  funcbody
                   (
                   parlist
                   )
                   block
                    retstat
                     return
                     explist
                      exp
                       prefixexp
                        math
                        .
                        maxinteger
                   end
              }
           )
     stat
      functioncall
       table
       .
       insert
       args
        (
        explist
         exp
          prefixexp
           t
         ,
         exp
          number
           20
        )
     stat
      local
      attnamelist
       k
       attrib
       ,
       v
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          next
          args
           (
           explist
            exp
             prefixexp
              t
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             k
           ==
           exp
            prefixexp
             math
             .
             mininteger
          and
          exp
           exp
            prefixexp
             v
           ==
           exp
            number
             20
        )
    end
   stat
    if
    exp
     not
     exp
      prefixexp
       T
    then
    block
     stat
      functioncall
       (
       exp
        exp
         prefixexp
          Message
        or
        exp
         prefixexp
          print
       )
       args
        (
        explist
         exp
          string
           '\n >>> testC not active: skipping tests for table library on non-tables <<<\n'
        )
    else
    block
     stat
      local
      attnamelist
       debug
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          require
          args
           string
            'debug'
     stat
      local
      attnamelist
       tab
       attrib
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            number
             10
          fieldsep
           ,
          field
           exp
            number
             20
          fieldsep
           ,
          field
           exp
            number
             30
         }
     stat
      local
      attnamelist
       mt
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      local
      attnamelist
       u
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          T
          .
          newuserdata
          args
           (
           explist
            exp
             number
              0
           )
     stat
      functioncall
       checkerror
       args
        (
        explist
         exp
          string
           "table expected"
         ,
         exp
          prefixexp
           table
           .
           insert
         ,
         exp
          prefixexp
           u
         ,
         exp
          number
           40
        )
     stat
      functioncall
       checkerror
       args
        (
        explist
         exp
          string
           "table expected"
         ,
         exp
          prefixexp
           table
           .
           remove
         ,
         exp
          prefixexp
           u
        )
     stat
      functioncall
       debug
       .
       setmetatable
       args
        (
        explist
         exp
          prefixexp
           u
         ,
         exp
          prefixexp
           mt
        )
     stat
      functioncall
       checkerror
       args
        (
        explist
         exp
          string
           "table expected"
         ,
         exp
          prefixexp
           table
           .
           insert
         ,
         exp
          prefixexp
           u
         ,
         exp
          number
           40
        )
     stat
      functioncall
       checkerror
       args
        (
        explist
         exp
          string
           "table expected"
         ,
         exp
          prefixexp
           table
           .
           remove
         ,
         exp
          prefixexp
           u
        )
     stat
      varlist
       var
        prefixexp
         mt
        .
        __index
      =
      explist
       exp
        prefixexp
         tab
     stat
      functioncall
       checkerror
       args
        (
        explist
         exp
          string
           "table expected"
         ,
         exp
          prefixexp
           table
           .
           insert
         ,
         exp
          prefixexp
           u
         ,
         exp
          number
           40
        )
     stat
      functioncall
       checkerror
       args
        (
        explist
         exp
          string
           "table expected"
         ,
         exp
          prefixexp
           table
           .
           remove
         ,
         exp
          prefixexp
           u
        )
     stat
      varlist
       var
        prefixexp
         mt
        .
        __newindex
      =
      explist
       exp
        prefixexp
         tab
     stat
      functioncall
       checkerror
       args
        (
        explist
         exp
          string
           "table expected"
         ,
         exp
          prefixexp
           table
           .
           insert
         ,
         exp
          prefixexp
           u
         ,
         exp
          number
           40
        )
     stat
      functioncall
       checkerror
       args
        (
        explist
         exp
          string
           "table expected"
         ,
         exp
          prefixexp
           table
           .
           remove
         ,
         exp
          prefixexp
           u
        )
     stat
      varlist
       var
        prefixexp
         mt
        .
        __len
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           retstat
            return
            explist
             exp
              #
              exp
               prefixexp
                tab
          end
     stat
      functioncall
       table
       .
       insert
       args
        (
        explist
         exp
          prefixexp
           u
         ,
         exp
          number
           40
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             exp
              #
              exp
               prefixexp
                u
             ==
             exp
              number
               4
            and
            exp
             exp
              #
              exp
               prefixexp
                tab
             ==
             exp
              number
               4
           and
           exp
            exp
             prefixexp
              u
              [
              exp
               number
                4
              ]
            ==
            exp
             number
              40
          and
          exp
           exp
            prefixexp
             tab
             [
             exp
              number
               4
             ]
           ==
           exp
            number
             40
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             table
             .
             remove
             args
              (
              explist
               exp
                prefixexp
                 u
              )
          ==
          exp
           number
            40
        )
     stat
      functioncall
       table
       .
       insert
       args
        (
        explist
         exp
          prefixexp
           u
         ,
         exp
          number
           1
         ,
         exp
          number
           50
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             exp
              #
              exp
               prefixexp
                u
             ==
             exp
              number
               4
            and
            exp
             exp
              #
              exp
               prefixexp
                tab
             ==
             exp
              number
               4
           and
           exp
            exp
             prefixexp
              u
              [
              exp
               number
                4
              ]
            ==
            exp
             number
              30
          and
          exp
           exp
            prefixexp
             tab
             [
             exp
              number
               1
             ]
           ==
           exp
            number
             50
        )
     stat
      varlist
       var
        prefixexp
         mt
        .
        __newindex
      =
      explist
       exp
        nil
     stat
      varlist
       var
        prefixexp
         mt
        .
        __len
      =
      explist
       exp
        nil
     stat
      local
      attnamelist
       tab2
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      local
      attnamelist
       u2
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          T
          .
          newuserdata
          args
           (
           explist
            exp
             number
              0
           )
     stat
      functioncall
       debug
       .
       setmetatable
       args
        (
        explist
         exp
          prefixexp
           u2
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             __newindex
             =
             exp
              functiondef
               function
               funcbody
                (
                parlist
                 namelist
                  _
                  ,
                  k
                  ,
                  v
                )
                block
                 stat
                  varlist
                   var
                    prefixexp
                     tab2
                    [
                    exp
                     prefixexp
                      k
                    ]
                  =
                  explist
                   exp
                    prefixexp
                     v
                end
           }
        )
     stat
      functioncall
       table
       .
       move
       args
        (
        explist
         exp
          prefixexp
           u
         ,
         exp
          number
           1
         ,
         exp
          number
           4
         ,
         exp
          number
           1
         ,
         exp
          prefixexp
           u2
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             #
             exp
              prefixexp
               tab2
            ==
            exp
             number
              4
           and
           exp
            exp
             prefixexp
              tab2
              [
              exp
               number
                1
              ]
            ==
            exp
             prefixexp
              tab
              [
              exp
               number
                1
              ]
          and
          exp
           exp
            prefixexp
             tab2
             [
             exp
              number
               4
             ]
           ==
           exp
            prefixexp
             tab
             [
             exp
              number
               4
             ]
        )
    end
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         '+'
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      1000
    do
    block
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         prefixexp
          i
        ]
      =
      explist
       exp
        prefixexp
         i
     stat
      ;
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         exp
          prefixexp
           i
         -
         exp
          number
           1
        ]
      =
      explist
       exp
        prefixexp
         undef
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            next
            args
             (
             explist
              exp
               prefixexp
                a
              ,
              exp
               nil
             )
         ==
         exp
          number
           1000
        and
        exp
         exp
          prefixexp
           functioncall
            next
            args
             (
             explist
              exp
               prefixexp
                a
              ,
              exp
               number
                1000
             )
         ==
         exp
          nil
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           next
           args
            (
            explist
             exp
              tableconstructor
               {
               }
            )
        ==
        exp
         nil
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           next
           args
            (
            explist
             exp
              tableconstructor
               {
               }
             ,
             exp
              nil
            )
        ==
        exp
         nil
      )
   stat
    for
    namelist
     a
     ,
     b
    in
    explist
     exp
      prefixexp
       functioncall
        pairs
        args
         tableconstructor
          {
          }
    do
    block
     stat
      functioncall
       error
       args
        string
         "not here"
    end
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      0
    do
    block
     stat
      functioncall
       error
       args
        string
         'not here'
    end
   stat
    for
    i
    =
    exp
     number
      0
    ,
    exp
     number
      1
    ,
    exp
     -
     exp
      number
       1
    do
    block
     stat
      functioncall
       error
       args
        string
         'not here'
    end
   stat
    varlist
     var
      a
    =
    explist
     exp
      nil
   stat
    ;
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      1
    do
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          not
          exp
           prefixexp
            a
        )
     stat
      ;
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         1
    end
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         a
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      nil
   stat
    ;
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      1
    ,
    exp
     -
     exp
      number
       1
    do
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          not
          exp
           prefixexp
            a
        )
     stat
      ;
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         1
    end
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         a
      )
   stat
    do
    block
     stat
      functioncall
       print
       args
        (
        explist
         exp
          string
           "testing floats in numeric for"
        )
     stat
      local
      attnamelist
       a
       attrib
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        1
      ,
      exp
       number
        1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            1
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        10000
      ,
      exp
       number
        1e4
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            1
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        0.99999
      ,
      exp
       number
        1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            0
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        9999
      ,
      exp
       number
        1e4
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            0
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        0.99999
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            1
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        0
      ,
      exp
       number
        0.999999999
      ,
      exp
       number
        0.1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1.0
      ,
      exp
       number
        1
      ,
      exp
       number
        1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            1
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       -
       exp
        number
         1.5
      ,
      exp
       -
       exp
        number
         1.5
      ,
      exp
       number
        1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            1
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1e6
      ,
      exp
       number
        1e6
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            1
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1.0
      ,
      exp
       number
        0.99999
      ,
      exp
       number
        1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            0
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        99999
      ,
      exp
       number
        1e5
      ,
      exp
       -
       exp
        number
         1.0
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            0
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1.0
      ,
      exp
       number
        0.99999
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            1
        )
    end
   stat
    do
    block
     stat
      local
      attnamelist
       a
       attrib
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        10
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
       stat
        ;
       stat
        varlist
         var
          i
        =
        explist
         exp
          string
           "x"
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        a
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        10.0
      ,
      exp
       number
        1
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        varlist
         var
          a
        =
        explist
         exp
          exp
           prefixexp
            a
          +
          exp
           number
            1
       stat
        ;
       stat
        varlist
         var
          i
        =
        explist
         exp
          string
           "x"
      end
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            10
        )
    end
   stat
    varlist
     var
      a
    =
    explist
     exp
      number
       0
   stat
    ;
   stat
    for
    i
    =
    exp
     string
      "10"
    ,
    exp
     string
      "1"
    ,
    exp
     string
      "-2"
    do
    block
     stat
      varlist
       var
        a
      =
      explist
       exp
        exp
         prefixexp
          a
        +
        exp
         number
          1
    end
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
        ==
        exp
         number
          5
      )
   stat
    do
    block
     stat
      local
      attnamelist
       c
       attrib
     stat
      local
      function
      checkfloat
      funcbody
       (
       parlist
        namelist
         i
       )
       block
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               functioncall
                math
                .
                type
                args
                 (
                 explist
                  exp
                   prefixexp
                    i
                 )
             ==
             exp
              string
               "float"
           )
        stat
         varlist
          var
           c
         =
         explist
          exp
           exp
            prefixexp
             c
           +
           exp
            number
             1
       end
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1.0
      ,
      exp
       number
        10
      do
      block
       stat
        functioncall
         checkfloat
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       -
       exp
        number
         1
      ,
      exp
       -
       exp
        number
         10
      ,
      exp
       -
       exp
        number
         1.0
      do
      block
       stat
        functioncall
         checkfloat
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            10
        )
     stat
      local
      function
      checkint
      funcbody
       (
       parlist
        namelist
         i
       )
       block
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               functioncall
                math
                .
                type
                args
                 (
                 explist
                  exp
                   prefixexp
                    i
                 )
             ==
             exp
              string
               "integer"
           )
        stat
         varlist
          var
           c
         =
         explist
          exp
           exp
            prefixexp
             c
           +
           exp
            number
             1
       end
     stat
      local
      attnamelist
       m
       attrib
      =
      explist
       exp
        prefixexp
         math
         .
         maxinteger
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       prefixexp
        m
      ,
      exp
       exp
        prefixexp
         m
       -
       exp
        number
         10
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            11
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       number
        10.9
      do
      block
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        10
      ,
      exp
       number
        0.001
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       string
        "10.8"
      do
      block
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        9
      ,
      exp
       string
        "3.4"
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            6
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        0
      ,
      exp
       string
        " -3.4  "
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            4
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        100
      ,
      exp
       string
        "96.3"
      ,
      exp
       -
       exp
        number
         2
      do
      block
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            2
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       prefixexp
        math
        .
        huge
      do
      block
       stat
        if
        exp
         exp
          prefixexp
           i
         >
         exp
          number
           10
        then
        block
         stat
          break
        end
       stat
        ;
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        c
      =
      explist
       exp
        number
         0
     stat
      ;
     stat
      for
      i
      =
      exp
       -
       exp
        number
         1
      ,
      exp
       -
       exp
        prefixexp
         math
         .
         huge
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        if
        exp
         exp
          prefixexp
           i
         <
         exp
          -
          exp
           number
            10
        then
        block
         stat
          break
        end
       stat
        ;
       stat
        functioncall
         checkint
         args
          (
          explist
           exp
            prefixexp
             i
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            10
        )
     stat
      for
      i
      =
      exp
       prefixexp
        math
        .
        mininteger
      ,
      exp
       -
       exp
        number
         10e100
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            false
          )
      end
     stat
      for
      i
      =
      exp
       prefixexp
        math
        .
        maxinteger
      ,
      exp
       number
        10e100
      ,
      exp
       -
       exp
        number
         1
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            false
          )
      end
    end
   stat
    do
    block
     stat
      local
      function
      checkfor
      funcbody
       (
       parlist
        namelist
         from
         ,
         to
         ,
         step
         ,
         t
       )
       block
        stat
         local
         attnamelist
          c
          attrib
         =
         explist
          exp
           number
            0
        stat
         for
         i
         =
         exp
          prefixexp
           from
         ,
         exp
          prefixexp
           to
         ,
         exp
          prefixexp
           step
         do
         block
          stat
           varlist
            var
             c
           =
           explist
            exp
             exp
              prefixexp
               c
             +
             exp
              number
               1
          stat
           functioncall
            assert
            args
             (
             explist
              exp
               exp
                prefixexp
                 i
               ==
               exp
                prefixexp
                 t
                 [
                 exp
                  prefixexp
                   c
                 ]
             )
         end
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               c
             ==
             exp
              #
              exp
               prefixexp
                t
           )
       end
     stat
      local
      attnamelist
       maxi
       attrib
      =
      explist
       exp
        prefixexp
         math
         .
         maxinteger
     stat
      local
      attnamelist
       mini
       attrib
      =
      explist
       exp
        prefixexp
         math
         .
         mininteger
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           mini
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               mini
            fieldsep
             ,
            field
             exp
              -
              exp
               number
                1
            fieldsep
             ,
            field
             exp
              exp
               prefixexp
                maxi
              -
              exp
               number
                1
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           mini
         ,
         exp
          prefixexp
           math
           .
           huge
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               mini
            fieldsep
             ,
            field
             exp
              -
              exp
               number
                1
            fieldsep
             ,
            field
             exp
              exp
               prefixexp
                maxi
              -
              exp
               number
                1
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           maxi
         ,
         exp
          prefixexp
           mini
         ,
         exp
          prefixexp
           mini
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               maxi
            fieldsep
             ,
            field
             exp
              -
              exp
               number
                1
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           maxi
         ,
         exp
          prefixexp
           mini
         ,
         exp
          -
          exp
           prefixexp
            maxi
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               maxi
            fieldsep
             ,
            field
             exp
              number
               0
            fieldsep
             ,
            field
             exp
              -
              exp
               prefixexp
                maxi
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           maxi
         ,
         exp
          -
          exp
           prefixexp
            math
            .
            huge
         ,
         exp
          prefixexp
           mini
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               maxi
            fieldsep
             ,
            field
             exp
              -
              exp
               number
                1
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           maxi
         ,
         exp
          prefixexp
           mini
         ,
         exp
          number
           1
         ,
         exp
          tableconstructor
           {
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           mini
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          -
          exp
           number
            1
         ,
         exp
          tableconstructor
           {
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          exp
           prefixexp
            maxi
          -
          exp
           number
            6
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          number
           3
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              exp
               prefixexp
                maxi
              -
              exp
               number
                6
            fieldsep
             ,
            field
             exp
              exp
               prefixexp
                maxi
              -
              exp
               number
                3
            fieldsep
             ,
            field
             exp
              prefixexp
               maxi
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          exp
           prefixexp
            mini
          +
          exp
           number
            4
         ,
         exp
          prefixexp
           mini
         ,
         exp
          -
          exp
           number
            2
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              exp
               prefixexp
                mini
              +
              exp
               number
                4
            fieldsep
             ,
            field
             exp
              exp
               prefixexp
                mini
              +
              exp
               number
                2
            fieldsep
             ,
            field
             exp
              prefixexp
               mini
           }
        )
     stat
      local
      attnamelist
       step
       attrib
      =
      explist
       exp
        exp
         prefixexp
          maxi
        //
        exp
         number
          10
     stat
      local
      attnamelist
       c
       attrib
      =
      explist
       exp
        prefixexp
         mini
     stat
      for
      i
      =
      exp
       prefixexp
        mini
      ,
      exp
       prefixexp
        maxi
      ,
      exp
       prefixexp
        step
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              i
            ==
            exp
             prefixexp
              c
          )
       stat
        varlist
         var
          c
        =
        explist
         exp
          exp
           prefixexp
            c
          +
          exp
           prefixexp
            step
      end
     stat
      varlist
       var
        c
      =
      explist
       exp
        prefixexp
         maxi
     stat
      for
      i
      =
      exp
       prefixexp
        maxi
      ,
      exp
       prefixexp
        mini
      ,
      exp
       -
       exp
        prefixexp
         step
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              i
            ==
            exp
             prefixexp
              c
          )
       stat
        varlist
         var
          c
        =
        explist
         exp
          exp
           prefixexp
            c
          -
          exp
           prefixexp
            step
      end
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           maxi
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               maxi
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           maxi
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          prefixexp
           mini
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               maxi
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           mini
         ,
         exp
          prefixexp
           mini
         ,
         exp
          prefixexp
           maxi
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               mini
           }
        )
     stat
      functioncall
       checkfor
       args
        (
        explist
         exp
          prefixexp
           mini
         ,
         exp
          prefixexp
           mini
         ,
         exp
          prefixexp
           mini
         ,
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               mini
           }
        )
    end
   stat
    functioncall
     checkerror
     args
      (
      explist
       exp
        string
         "'for' step is zero"
       ,
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           stat
            for
            i
            =
            exp
             number
              1
            ,
            exp
             number
              10
            ,
            exp
             number
              0
            do
            block
            end
          end
      )
   stat
    functioncall
     checkerror
     args
      (
      explist
       exp
        string
         "'for' step is zero"
       ,
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           stat
            for
            i
            =
            exp
             number
              1
            ,
            exp
             -
             exp
              number
               10
            ,
            exp
             number
              0
            do
            block
            end
          end
      )
   stat
    functioncall
     checkerror
     args
      (
      explist
       exp
        string
         "'for' step is zero"
       ,
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           stat
            for
            i
            =
            exp
             number
              1.0
            ,
            exp
             -
             exp
              number
               10
            ,
            exp
             number
              0.0
            do
            block
            end
          end
      )
   stat
    functioncall
     collectgarbage
     args
      (
      )
   stat
    local
    function
    f
    funcbody
     (
     parlist
      namelist
       n
       ,
       p
     )
     block
      stat
       local
       attnamelist
        t
        attrib
       =
       explist
        exp
         tableconstructor
          {
          }
      stat
       ;
      stat
       for
       i
       =
       exp
        number
         1
       ,
       exp
        prefixexp
         p
       do
       block
        stat
         varlist
          var
           prefixexp
            t
           [
           exp
            prefixexp
             i
           ]
         =
         explist
          exp
           exp
            prefixexp
             i
           *
           exp
            number
             10
       end
      retstat
       return
       explist
        exp
         functiondef
          function
          funcbody
           (
           parlist
            namelist
             _
             ,
             n
            ,
            ...
           )
           block
            stat
             functioncall
              assert
              args
               (
               explist
                exp
                 exp
                  prefixexp
                   functioncall
                    select
                    args
                     (
                     explist
                      exp
                       string
                        "#"
                      ,
                      exp
                       ...
                     )
                 ==
                 exp
                  number
                   0
               )
            stat
             if
             exp
              exp
               prefixexp
                n
              >
              exp
               number
                0
             then
             block
              stat
               varlist
                var
                 n
               =
               explist
                exp
                 exp
                  prefixexp
                   n
                 -
                 exp
                  number
                   1
              retstat
               return
               explist
                exp
                 prefixexp
                  n
                ,
                exp
                 prefixexp
                  functioncall
                   table
                   .
                   unpack
                   args
                    (
                    explist
                     exp
                      prefixexp
                       t
                    )
             end
           end
        ,
        exp
         nil
        ,
        exp
         prefixexp
          n
     end
   stat
    local
    attnamelist
     x
     attrib
    =
    explist
     exp
      number
       0
   stat
    for
    namelist
     n
     ,
     a
     ,
     b
     ,
     c
     ,
     d
    in
    explist
     exp
      prefixexp
       functioncall
        f
        args
         (
         explist
          exp
           number
            5
          ,
          exp
           number
            3
         )
    do
    block
     stat
      varlist
       var
        x
      =
      explist
       exp
        exp
         prefixexp
          x
        +
        exp
         number
          1
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             exp
              prefixexp
               a
             ==
             exp
              number
               10
            and
            exp
             exp
              prefixexp
               b
             ==
             exp
              number
               20
           and
           exp
            exp
             prefixexp
              c
            ==
            exp
             number
              30
          and
          exp
           exp
            prefixexp
             d
           ==
           exp
            nil
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          x
        ==
        exp
         number
          5
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    do
    block
     stat
      local
      attnamelist
       x
       attrib
       ,
       y
       attrib
       ,
       z
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          pairs
          args
           (
           explist
            exp
             prefixexp
              a
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             prefixexp
              functioncall
               type
               args
                (
                explist
                 exp
                  prefixexp
                   x
                )
            ==
            exp
             string
              'function'
           and
           exp
            exp
             prefixexp
              y
            ==
            exp
             prefixexp
              a
          and
          exp
           exp
            prefixexp
             z
           ==
           exp
            nil
        )
    end
   stat
    local
    function
    foo
    funcbody
     (
     parlist
      namelist
       e
       ,
       i
     )
     block
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             e
           ==
           exp
            prefixexp
             a
         )
      stat
       if
       exp
        exp
         prefixexp
          i
        <=
        exp
         number
          10
       then
       block
        retstat
         return
         explist
          exp
           exp
            prefixexp
             i
           +
           exp
            number
             1
          ,
          exp
           exp
            prefixexp
             i
           +
           exp
            number
             2
       end
     end
   stat
    local
    function
    foo1
    funcbody
     (
     parlist
      namelist
       e
       ,
       i
     )
     block
      stat
       varlist
        var
         i
       =
       explist
        exp
         exp
          prefixexp
           i
         +
         exp
          number
           1
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             e
           ==
           exp
            prefixexp
             a
         )
      stat
       if
       exp
        exp
         prefixexp
          i
        <=
        exp
         prefixexp
          e
          .
          n
       then
       block
        retstat
         return
         explist
          exp
           prefixexp
            i
          ,
          exp
           prefixexp
            a
            [
            exp
             prefixexp
              i
            ]
       end
     end
   stat
    functioncall
     setmetatable
     args
      (
      explist
       exp
        prefixexp
         a
       ,
       exp
        tableconstructor
         {
         fieldlist
          field
           __pairs
           =
           exp
            functiondef
             function
             funcbody
              (
              parlist
               namelist
                x
              )
              block
               retstat
                return
                explist
                 exp
                  prefixexp
                   foo
                 ,
                 exp
                  prefixexp
                   x
                 ,
                 exp
                  number
                   0
              end
         }
      )
   stat
    local
    attnamelist
     i
     attrib
    =
    explist
     exp
      number
       0
   stat
    for
    namelist
     k
     ,
     v
    in
    explist
     exp
      prefixexp
       functioncall
        pairs
        args
         (
         explist
          exp
           prefixexp
            a
         )
    do
    block
     stat
      varlist
       var
        i
      =
      explist
       exp
        exp
         prefixexp
          i
        +
        exp
         number
          1
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             k
           ==
           exp
            prefixexp
             i
          and
          exp
           exp
            prefixexp
             v
           ==
           exp
            exp
             prefixexp
              k
            +
            exp
             number
              1
        )
    end
   stat
    varlist
     var
      prefixexp
       a
      .
      n
    =
    explist
     exp
      number
       5
   stat
    varlist
     var
      prefixexp
       a
      [
      exp
       number
        3
      ]
    =
    explist
     exp
      number
       30
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         n
         =
         exp
          number
           10
       }
   stat
    functioncall
     setmetatable
     args
      (
      explist
       exp
        prefixexp
         a
       ,
       exp
        tableconstructor
         {
         fieldlist
          field
           __index
           =
           exp
            functiondef
             function
             funcbody
              (
              parlist
               namelist
                t
                ,
                k
              )
              block
               stat
                if
                exp
                 exp
                  prefixexp
                   k
                 <=
                 exp
                  prefixexp
                   t
                   .
                   n
                then
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      k
                    *
                    exp
                     number
                      10
                end
              end
         }
      )
   stat
    varlist
     var
      i
    =
    explist
     exp
      number
       0
   stat
    for
    namelist
     k
     ,
     v
    in
    explist
     exp
      prefixexp
       functioncall
        ipairs
        args
         (
         explist
          exp
           prefixexp
            a
         )
    do
    block
     stat
      varlist
       var
        i
      =
      explist
       exp
        exp
         prefixexp
          i
        +
        exp
         number
          1
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             k
           ==
           exp
            prefixexp
             i
          and
          exp
           exp
            prefixexp
             v
           ==
           exp
            exp
             prefixexp
              i
            *
            exp
             number
              10
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          i
        ==
        exp
         prefixexp
          a
          .
          n
      )
   stat
    do
    block
     stat
      local
      attnamelist
       t
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          setmetatable
          args
           (
           explist
            exp
             tableconstructor
              {
              fieldlist
               field
                exp
                 number
                  10
               fieldsep
                ,
               field
                exp
                 number
                  20
               fieldsep
                ,
               field
                exp
                 number
                  30
              }
            ,
            exp
             tableconstructor
              {
              fieldlist
               field
                __pairs
                =
                exp
                 functiondef
                  function
                  funcbody
                   (
                   parlist
                    namelist
                     t
                   )
                   block
                    stat
                     local
                     attnamelist
                      inc
                      attrib
                     =
                     explist
                      exp
                       prefixexp
                        functioncall
                         coroutine
                         .
                         yield
                         args
                          (
                          )
                    retstat
                     return
                     explist
                      exp
                       functiondef
                        function
                        funcbody
                         (
                         parlist
                          namelist
                           t
                           ,
                           i
                         )
                         block
                          stat
                           if
                           exp
                            exp
                             prefixexp
                              i
                            >
                            exp
                             number
                              1
                           then
                           block
                            retstat
                             return
                             explist
                              exp
                               exp
                                prefixexp
                                 i
                               -
                               exp
                                prefixexp
                                 inc
                              ,
                              exp
                               prefixexp
                                t
                                [
                                exp
                                 exp
                                  prefixexp
                                   i
                                 -
                                 exp
                                  prefixexp
                                   inc
                                ]
                           else
                           block
                            retstat
                             return
                             explist
                              exp
                               nil
                           end
                         end
                      ,
                      exp
                       prefixexp
                        t
                      ,
                      exp
                       exp
                        #
                        exp
                         prefixexp
                          t
                       +
                       exp
                        number
                         1
                   end
              }
           )
     stat
      local
      attnamelist
       res
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 for
                 namelist
                  i
                  ,
                  p
                 in
                 explist
                  exp
                   prefixexp
                    functioncall
                     pairs
                     args
                      (
                      explist
                       exp
                        prefixexp
                         t
                      )
                 do
                 block
                  stat
                   varlist
                    var
                     prefixexp
                      res
                     [
                     exp
                      exp
                       #
                       exp
                        prefixexp
                         res
                      +
                      exp
                       number
                        1
                     ]
                   =
                   explist
                    exp
                     prefixexp
                      p
                 end
               end
           )
     stat
      functioncall
       co
       args
        (
        )
     stat
      functioncall
       co
       args
        (
        explist
         exp
          number
           1
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             exp
              prefixexp
               res
               [
               exp
                number
                 1
               ]
             ==
             exp
              number
               30
            and
            exp
             exp
              prefixexp
               res
               [
               exp
                number
                 2
               ]
             ==
             exp
              number
               20
           and
           exp
            exp
             prefixexp
              res
              [
              exp
               number
                3
              ]
            ==
            exp
             number
              10
          and
          exp
           exp
            #
            exp
             prefixexp
              res
           ==
           exp
            number
             3
        )
    end
   stat
    functioncall
     print
     args
      string
       "OK"
 <EOF>
