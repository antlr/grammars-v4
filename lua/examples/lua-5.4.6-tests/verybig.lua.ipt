start_
 chunk
  block
   stat
    functioncall
     print
     args
      string
       "testing RK"
   stat
    local
    function
    foo
    funcbody
     (
     parlist
     )
     block
      stat
       local
       attnamelist
        dummy
        attrib
       =
       explist
        exp
         tableconstructor
          {
          fieldlist
           field
            exp
             number
              1
           fieldsep
            ,
           field
            exp
             number
              2
           fieldsep
            ,
           field
            exp
             number
              3
           fieldsep
            ,
           field
            exp
             number
              4
           fieldsep
            ,
           field
            exp
             number
              5
           fieldsep
            ,
           field
            exp
             number
              6
           fieldsep
            ,
           field
            exp
             number
              7
           fieldsep
            ,
           field
            exp
             number
              8
           fieldsep
            ,
           field
            exp
             number
              9
           fieldsep
            ,
           field
            exp
             number
              10
           fieldsep
            ,
           field
            exp
             number
              11
           fieldsep
            ,
           field
            exp
             number
              12
           fieldsep
            ,
           field
            exp
             number
              13
           fieldsep
            ,
           field
            exp
             number
              14
           fieldsep
            ,
           field
            exp
             number
              15
           fieldsep
            ,
           field
            exp
             number
              16
           fieldsep
            ,
           field
            exp
             number
              17
           fieldsep
            ,
           field
            exp
             number
              18
           fieldsep
            ,
           field
            exp
             number
              19
           fieldsep
            ,
           field
            exp
             number
              20
           fieldsep
            ,
           field
            exp
             number
              21
           fieldsep
            ,
           field
            exp
             number
              22
           fieldsep
            ,
           field
            exp
             number
              23
           fieldsep
            ,
           field
            exp
             number
              24
           fieldsep
            ,
           field
            exp
             number
              25
           fieldsep
            ,
           field
            exp
             number
              26
           fieldsep
            ,
           field
            exp
             number
              27
           fieldsep
            ,
           field
            exp
             number
              28
           fieldsep
            ,
           field
            exp
             number
              29
           fieldsep
            ,
           field
            exp
             number
              30
           fieldsep
            ,
           field
            exp
             number
              31
           fieldsep
            ,
           field
            exp
             number
              32
           fieldsep
            ,
           field
            exp
             number
              33
           fieldsep
            ,
           field
            exp
             number
              34
           fieldsep
            ,
           field
            exp
             number
              35
           fieldsep
            ,
           field
            exp
             number
              36
           fieldsep
            ,
           field
            exp
             number
              37
           fieldsep
            ,
           field
            exp
             number
              38
           fieldsep
            ,
           field
            exp
             number
              39
           fieldsep
            ,
           field
            exp
             number
              40
           fieldsep
            ,
           field
            exp
             number
              41
           fieldsep
            ,
           field
            exp
             number
              42
           fieldsep
            ,
           field
            exp
             number
              43
           fieldsep
            ,
           field
            exp
             number
              44
           fieldsep
            ,
           field
            exp
             number
              45
           fieldsep
            ,
           field
            exp
             number
              46
           fieldsep
            ,
           field
            exp
             number
              47
           fieldsep
            ,
           field
            exp
             number
              48
           fieldsep
            ,
           field
            exp
             number
              49
           fieldsep
            ,
           field
            exp
             number
              50
           fieldsep
            ,
           field
            exp
             number
              51
           fieldsep
            ,
           field
            exp
             number
              52
           fieldsep
            ,
           field
            exp
             number
              53
           fieldsep
            ,
           field
            exp
             number
              54
           fieldsep
            ,
           field
            exp
             number
              55
           fieldsep
            ,
           field
            exp
             number
              56
           fieldsep
            ,
           field
            exp
             number
              57
           fieldsep
            ,
           field
            exp
             number
              58
           fieldsep
            ,
           field
            exp
             number
              59
           fieldsep
            ,
           field
            exp
             number
              60
           fieldsep
            ,
           field
            exp
             number
              61
           fieldsep
            ,
           field
            exp
             number
              62
           fieldsep
            ,
           field
            exp
             number
              63
           fieldsep
            ,
           field
            exp
             number
              64
           fieldsep
            ,
           field
            exp
             number
              65
           fieldsep
            ,
           field
            exp
             number
              66
           fieldsep
            ,
           field
            exp
             number
              67
           fieldsep
            ,
           field
            exp
             number
              68
           fieldsep
            ,
           field
            exp
             number
              69
           fieldsep
            ,
           field
            exp
             number
              70
           fieldsep
            ,
           field
            exp
             number
              71
           fieldsep
            ,
           field
            exp
             number
              72
           fieldsep
            ,
           field
            exp
             number
              73
           fieldsep
            ,
           field
            exp
             number
              74
           fieldsep
            ,
           field
            exp
             number
              75
           fieldsep
            ,
           field
            exp
             number
              76
           fieldsep
            ,
           field
            exp
             number
              77
           fieldsep
            ,
           field
            exp
             number
              78
           fieldsep
            ,
           field
            exp
             number
              79
           fieldsep
            ,
           field
            exp
             number
              80
           fieldsep
            ,
           field
            exp
             number
              81
           fieldsep
            ,
           field
            exp
             number
              82
           fieldsep
            ,
           field
            exp
             number
              83
           fieldsep
            ,
           field
            exp
             number
              84
           fieldsep
            ,
           field
            exp
             number
              85
           fieldsep
            ,
           field
            exp
             number
              86
           fieldsep
            ,
           field
            exp
             number
              87
           fieldsep
            ,
           field
            exp
             number
              88
           fieldsep
            ,
           field
            exp
             number
              89
           fieldsep
            ,
           field
            exp
             number
              90
           fieldsep
            ,
           field
            exp
             number
              91
           fieldsep
            ,
           field
            exp
             number
              92
           fieldsep
            ,
           field
            exp
             number
              93
           fieldsep
            ,
           field
            exp
             number
              94
           fieldsep
            ,
           field
            exp
             number
              95
           fieldsep
            ,
           field
            exp
             number
              96
           fieldsep
            ,
           field
            exp
             number
              97
           fieldsep
            ,
           field
            exp
             number
              98
           fieldsep
            ,
           field
            exp
             number
              99
           fieldsep
            ,
           field
            exp
             number
              100
           fieldsep
            ,
           field
            exp
             number
              101
           fieldsep
            ,
           field
            exp
             number
              102
           fieldsep
            ,
           field
            exp
             number
              103
           fieldsep
            ,
           field
            exp
             number
              104
           fieldsep
            ,
           field
            exp
             number
              105
           fieldsep
            ,
           field
            exp
             number
              106
           fieldsep
            ,
           field
            exp
             number
              107
           fieldsep
            ,
           field
            exp
             number
              108
           fieldsep
            ,
           field
            exp
             number
              109
           fieldsep
            ,
           field
            exp
             number
              110
           fieldsep
            ,
           field
            exp
             number
              111
           fieldsep
            ,
           field
            exp
             number
              112
           fieldsep
            ,
           field
            exp
             number
              113
           fieldsep
            ,
           field
            exp
             number
              114
           fieldsep
            ,
           field
            exp
             number
              115
           fieldsep
            ,
           field
            exp
             number
              116
           fieldsep
            ,
           field
            exp
             number
              117
           fieldsep
            ,
           field
            exp
             number
              118
           fieldsep
            ,
           field
            exp
             number
              119
           fieldsep
            ,
           field
            exp
             number
              120
           fieldsep
            ,
           field
            exp
             number
              121
           fieldsep
            ,
           field
            exp
             number
              122
           fieldsep
            ,
           field
            exp
             number
              123
           fieldsep
            ,
           field
            exp
             number
              124
           fieldsep
            ,
           field
            exp
             number
              125
           fieldsep
            ,
           field
            exp
             number
              126
           fieldsep
            ,
           field
            exp
             number
              127
           fieldsep
            ,
           field
            exp
             number
              128
           fieldsep
            ,
           field
            exp
             number
              129
           fieldsep
            ,
           field
            exp
             number
              130
           fieldsep
            ,
           field
            exp
             number
              131
           fieldsep
            ,
           field
            exp
             number
              132
           fieldsep
            ,
           field
            exp
             number
              133
           fieldsep
            ,
           field
            exp
             number
              134
           fieldsep
            ,
           field
            exp
             number
              135
           fieldsep
            ,
           field
            exp
             number
              136
           fieldsep
            ,
           field
            exp
             number
              137
           fieldsep
            ,
           field
            exp
             number
              138
           fieldsep
            ,
           field
            exp
             number
              139
           fieldsep
            ,
           field
            exp
             number
              140
           fieldsep
            ,
           field
            exp
             number
              141
           fieldsep
            ,
           field
            exp
             number
              142
           fieldsep
            ,
           field
            exp
             number
              143
           fieldsep
            ,
           field
            exp
             number
              144
           fieldsep
            ,
           field
            exp
             number
              145
           fieldsep
            ,
           field
            exp
             number
              146
           fieldsep
            ,
           field
            exp
             number
              147
           fieldsep
            ,
           field
            exp
             number
              148
           fieldsep
            ,
           field
            exp
             number
              149
           fieldsep
            ,
           field
            exp
             number
              150
           fieldsep
            ,
           field
            exp
             number
              151
           fieldsep
            ,
           field
            exp
             number
              152
           fieldsep
            ,
           field
            exp
             number
              153
           fieldsep
            ,
           field
            exp
             number
              154
           fieldsep
            ,
           field
            exp
             number
              155
           fieldsep
            ,
           field
            exp
             number
              156
           fieldsep
            ,
           field
            exp
             number
              157
           fieldsep
            ,
           field
            exp
             number
              158
           fieldsep
            ,
           field
            exp
             number
              159
           fieldsep
            ,
           field
            exp
             number
              160
           fieldsep
            ,
           field
            exp
             number
              161
           fieldsep
            ,
           field
            exp
             number
              162
           fieldsep
            ,
           field
            exp
             number
              163
           fieldsep
            ,
           field
            exp
             number
              164
           fieldsep
            ,
           field
            exp
             number
              165
           fieldsep
            ,
           field
            exp
             number
              166
           fieldsep
            ,
           field
            exp
             number
              167
           fieldsep
            ,
           field
            exp
             number
              168
           fieldsep
            ,
           field
            exp
             number
              169
           fieldsep
            ,
           field
            exp
             number
              170
           fieldsep
            ,
           field
            exp
             number
              171
           fieldsep
            ,
           field
            exp
             number
              172
           fieldsep
            ,
           field
            exp
             number
              173
           fieldsep
            ,
           field
            exp
             number
              174
           fieldsep
            ,
           field
            exp
             number
              175
           fieldsep
            ,
           field
            exp
             number
              176
           fieldsep
            ,
           field
            exp
             number
              177
           fieldsep
            ,
           field
            exp
             number
              178
           fieldsep
            ,
           field
            exp
             number
              179
           fieldsep
            ,
           field
            exp
             number
              180
           fieldsep
            ,
           field
            exp
             number
              181
           fieldsep
            ,
           field
            exp
             number
              182
           fieldsep
            ,
           field
            exp
             number
              183
           fieldsep
            ,
           field
            exp
             number
              184
           fieldsep
            ,
           field
            exp
             number
              185
           fieldsep
            ,
           field
            exp
             number
              186
           fieldsep
            ,
           field
            exp
             number
              187
           fieldsep
            ,
           field
            exp
             number
              188
           fieldsep
            ,
           field
            exp
             number
              189
           fieldsep
            ,
           field
            exp
             number
              190
           fieldsep
            ,
           field
            exp
             number
              191
           fieldsep
            ,
           field
            exp
             number
              192
           fieldsep
            ,
           field
            exp
             number
              193
           fieldsep
            ,
           field
            exp
             number
              194
           fieldsep
            ,
           field
            exp
             number
              195
           fieldsep
            ,
           field
            exp
             number
              196
           fieldsep
            ,
           field
            exp
             number
              197
           fieldsep
            ,
           field
            exp
             number
              198
           fieldsep
            ,
           field
            exp
             number
              199
           fieldsep
            ,
           field
            exp
             number
              200
           fieldsep
            ,
           field
            exp
             number
              201
           fieldsep
            ,
           field
            exp
             number
              202
           fieldsep
            ,
           field
            exp
             number
              203
           fieldsep
            ,
           field
            exp
             number
              204
           fieldsep
            ,
           field
            exp
             number
              205
           fieldsep
            ,
           field
            exp
             number
              206
           fieldsep
            ,
           field
            exp
             number
              207
           fieldsep
            ,
           field
            exp
             number
              208
           fieldsep
            ,
           field
            exp
             number
              209
           fieldsep
            ,
           field
            exp
             number
              210
           fieldsep
            ,
           field
            exp
             number
              211
           fieldsep
            ,
           field
            exp
             number
              212
           fieldsep
            ,
           field
            exp
             number
              213
           fieldsep
            ,
           field
            exp
             number
              214
           fieldsep
            ,
           field
            exp
             number
              215
           fieldsep
            ,
           field
            exp
             number
              216
           fieldsep
            ,
           field
            exp
             number
              217
           fieldsep
            ,
           field
            exp
             number
              218
           fieldsep
            ,
           field
            exp
             number
              219
           fieldsep
            ,
           field
            exp
             number
              220
           fieldsep
            ,
           field
            exp
             number
              221
           fieldsep
            ,
           field
            exp
             number
              222
           fieldsep
            ,
           field
            exp
             number
              223
           fieldsep
            ,
           field
            exp
             number
              224
           fieldsep
            ,
           field
            exp
             number
              225
           fieldsep
            ,
           field
            exp
             number
              226
           fieldsep
            ,
           field
            exp
             number
              227
           fieldsep
            ,
           field
            exp
             number
              228
           fieldsep
            ,
           field
            exp
             number
              229
           fieldsep
            ,
           field
            exp
             number
              230
           fieldsep
            ,
           field
            exp
             number
              231
           fieldsep
            ,
           field
            exp
             number
              232
           fieldsep
            ,
           field
            exp
             number
              233
           fieldsep
            ,
           field
            exp
             number
              234
           fieldsep
            ,
           field
            exp
             number
              235
           fieldsep
            ,
           field
            exp
             number
              236
           fieldsep
            ,
           field
            exp
             number
              237
           fieldsep
            ,
           field
            exp
             number
              238
           fieldsep
            ,
           field
            exp
             number
              239
           fieldsep
            ,
           field
            exp
             number
              240
           fieldsep
            ,
           field
            exp
             number
              241
           fieldsep
            ,
           field
            exp
             number
              242
           fieldsep
            ,
           field
            exp
             number
              243
           fieldsep
            ,
           field
            exp
             number
              244
           fieldsep
            ,
           field
            exp
             number
              245
           fieldsep
            ,
           field
            exp
             number
              246
           fieldsep
            ,
           field
            exp
             number
              247
           fieldsep
            ,
           field
            exp
             number
              248
           fieldsep
            ,
           field
            exp
             number
              249
           fieldsep
            ,
           field
            exp
             number
              250
           fieldsep
            ,
           field
            exp
             number
              251
           fieldsep
            ,
           field
            exp
             number
              252
           fieldsep
            ,
           field
            exp
             number
              253
           fieldsep
            ,
           field
            exp
             number
              254
           fieldsep
            ,
           field
            exp
             number
              255
           fieldsep
            ,
           field
            exp
             number
              256
           fieldsep
            ,
          }
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            exp
             number
              24.5
            +
            exp
             number
              0.6
           ==
           exp
            number
             25.1
         )
      stat
       local
       attnamelist
        t
        attrib
       =
       explist
        exp
         tableconstructor
          {
          fieldlist
           field
            foo
            =
            exp
             functiondef
              function
              funcbody
               (
               parlist
                namelist
                 self
                 ,
                 x
               )
               block
                retstat
                 return
                 explist
                  exp
                   exp
                    prefixexp
                     x
                   +
                   exp
                    prefixexp
                     self
                     .
                     x
               end
           fieldsep
            ,
           field
            x
            =
            exp
             number
              10
          }
      stat
       varlist
        var
         prefixexp
          t
         .
         t
       =
       explist
        exp
         prefixexp
          t
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              t
              :
              foo
              args
               (
               explist
                exp
                 number
                  1.5
               )
           ==
           exp
            number
             11.5
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              t
              .
              t
              :
              foo
              args
               (
               explist
                exp
                 number
                  0.5
               )
           ==
           exp
            number
             10.5
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            number
             24.3
           ==
           exp
            number
             24.3
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              (
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     prefixexp
                      t
                      .
                      x
                 end
              )
              args
               (
               )
           ==
           exp
            number
             10
         )
     end
   stat
    functioncall
     foo
     args
      (
      )
   stat
    varlist
     var
      foo
    =
    explist
     exp
      nil
   stat
    if
    exp
     prefixexp
      _soft
    then
    block
     retstat
      return
      explist
       exp
        number
         10
    end
   stat
    functioncall
     print
     args
      string
       "testing large programs (>64k)"
   stat
    local
    attnamelist
     prog
     attrib
    =
    explist
     exp
      string
       [[$\n\nlocal a,b\n\nb = {$1$\n  b30009 = 65534,\n  b30010 = 65535,\n  b30011 = 65536,\n  b30012 = 65537,\n  b30013 = 16777214,\n  b30014 = 16777215,\n  b30015 = 16777216,\n  b30016 = 16777217,\n  b30017 = 0x7fffff,\n  b30018 = -0x7fffff,\n  b30019 = 0x1ffffff,\n  b30020 = -0x1ffffd,\n  b30021 = -65534,\n  b30022 = -65535,\n  b30023 = -65536,\n  b30024 = -0xffffff,\n  b30025 = 15012.5,\n  $2$\n};\n\nassert(b.a50008 == 25004 and b["a11"] == -5.5)\nassert(b.a33007 == -16503.5 and b.a50009 == -25004.5)\nassert(b["b"..30024] == -0xffffff)\n\nfunction b:xxx (a,b) return a+b end\nassert(b:xxx(10, 12) == 22)   -- pushself with non-constant index\nb["xxx"] = undef\n\nlocal s = 0; local n=0\nfor a,b in pairs(b) do s=s+b; n=n+1 end\n-- with 32-bit floats, exact value of 's' depends on summation order\nassert(81800000.0 < s and s < 81860000 and n == 70001)\n\na = nil; b = nil\nprint'+'\n\nlocal function f(x) b=x end\n\na = f{$3$} or 10\n\nassert(a==10)\nassert(b[1] == "a10" and b[2] == 5 and b[#b-1] == "a50009")\n\n\nfunction xxxx (x) return b[x] end\n\nassert(xxxx(3) == "a11")\n\na = nil; b=nil\nxxxx = nil\n\nreturn 10\n\n]]
   stat
    local
    function
    sig
    funcbody
     (
     parlist
      namelist
       x
     )
     block
      retstat
       return
       explist
        exp
         exp
          exp
           prefixexp
            (
            exp
             exp
              exp
               prefixexp
                x
              %
              exp
               number
                2
             ==
             exp
              number
               0
            )
          and
          exp
           string
            ''
         or
         exp
          string
           '-'
     end
   stat
    local
    attnamelist
     F
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          functiondef
           function
           funcbody
            (
            parlist
            )
            block
             stat
              for
              i
              =
              exp
               number
                10
              ,
              exp
               number
                50009
              do
              block
               stat
                functioncall
                 io
                 .
                 write
                 args
                  (
                  explist
                   exp
                    string
                     'a'
                   ,
                   exp
                    prefixexp
                     i
                   ,
                   exp
                    string
                     ' = '
                   ,
                   exp
                    prefixexp
                     functioncall
                      sig
                      args
                       (
                       explist
                        exp
                         prefixexp
                          i
                       )
                   ,
                   exp
                    exp
                     number
                      5
                    +
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         (
                         exp
                          exp
                           prefixexp
                            i
                          -
                          exp
                           number
                            10
                         )
                       /
                       exp
                        number
                         2
                      )
                   ,
                   exp
                    string
                     ',\n'
                  )
              end
            end
        fieldsep
         ,
        field
         exp
          functiondef
           function
           funcbody
            (
            parlist
            )
            block
             stat
              for
              i
              =
              exp
               number
                30026
              ,
              exp
               number
                50009
              do
              block
               stat
                functioncall
                 io
                 .
                 write
                 args
                  (
                  explist
                   exp
                    string
                     'b'
                   ,
                   exp
                    prefixexp
                     i
                   ,
                   exp
                    string
                     ' = '
                   ,
                   exp
                    prefixexp
                     functioncall
                      sig
                      args
                       (
                       explist
                        exp
                         prefixexp
                          i
                       )
                   ,
                   exp
                    exp
                     number
                      15013
                    +
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         (
                         exp
                          exp
                           prefixexp
                            i
                          -
                          exp
                           number
                            30026
                         )
                       /
                       exp
                        number
                         2
                      )
                   ,
                   exp
                    string
                     ',\n'
                  )
              end
            end
        fieldsep
         ,
        field
         exp
          functiondef
           function
           funcbody
            (
            parlist
            )
            block
             stat
              for
              i
              =
              exp
               number
                10
              ,
              exp
               number
                50009
              do
              block
               stat
                functioncall
                 io
                 .
                 write
                 args
                  (
                  explist
                   exp
                    string
                     '"a'
                   ,
                   exp
                    prefixexp
                     i
                   ,
                   exp
                    string
                     '", '
                   ,
                   exp
                    prefixexp
                     functioncall
                      sig
                      args
                       (
                       explist
                        exp
                         prefixexp
                          i
                       )
                   ,
                   exp
                    exp
                     number
                      5
                    +
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         (
                         exp
                          exp
                           prefixexp
                            i
                          -
                          exp
                           number
                            10
                         )
                       /
                       exp
                        number
                         2
                      )
                   ,
                   exp
                    string
                     ',\n'
                  )
              end
            end
        fieldsep
         ,
       }
   stat
    local
    attnamelist
     file
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        os
        .
        tmpname
        args
         (
         )
   stat
    functioncall
     io
     .
     output
     args
      (
      explist
       exp
        prefixexp
         file
      )
   stat
    for
    namelist
     s
    in
    explist
     exp
      prefixexp
       functioncall
        string
        .
        gmatch
        args
         (
         explist
          exp
           prefixexp
            prog
          ,
          exp
           string
            "$([^$]+)"
         )
    do
    block
     stat
      local
      attnamelist
       n
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          tonumber
          args
           (
           explist
            exp
             prefixexp
              s
           )
     stat
      if
      exp
       not
       exp
        prefixexp
         n
      then
      block
       stat
        functioncall
         io
         .
         write
         args
          (
          explist
           exp
            prefixexp
             s
          )
      else
      block
       stat
        functioncall
         F
         [
         exp
          prefixexp
           n
         ]
         args
          (
          )
      end
    end
   stat
    functioncall
     io
     .
     close
     args
      (
      )
   stat
    local
    attnamelist
     result
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        dofile
        args
         (
         explist
          exp
           prefixexp
            file
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         functioncall
          os
          .
          remove
          args
           (
           explist
            exp
             prefixexp
              file
           )
      )
   stat
    functioncall
     print
     args
      string
       'OK'
   retstat
    return
    explist
     exp
      prefixexp
       result
 <EOF>
