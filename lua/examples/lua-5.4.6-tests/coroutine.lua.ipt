start_
 chunk
  block
   stat
    functioncall
     print
     args
      string
       "testing coroutines"
   stat
    local
    attnamelist
     debug
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        require
        args
         string
          'debug'
   stat
    local
    attnamelist
     f
     attrib
   stat
    local
    attnamelist
     main
     attrib
     ,
     ismain
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        running
        args
         (
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            type
            args
             (
             explist
              exp
               prefixexp
                main
             )
         ==
         exp
          string
           "thread"
        and
        exp
         prefixexp
          ismain
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           coroutine
           .
           resume
           args
            (
            explist
             exp
              prefixexp
               main
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         not
         exp
          prefixexp
           functioncall
            coroutine
            .
            isyieldable
            args
             (
             explist
              exp
               prefixexp
                main
             )
        and
        exp
         not
         exp
          prefixexp
           functioncall
            coroutine
            .
            isyieldable
            args
             (
             )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               coroutine
               .
               yield
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               coroutine
               .
               resume
             ,
             exp
              number
               0
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               coroutine
               .
               status
             ,
             exp
              number
               0
            )
      )
   stat
    local
    function
    eqtab
    funcbody
     (
     parlist
      namelist
       t1
       ,
       t2
     )
     block
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            #
            exp
             prefixexp
              t1
           ==
           exp
            #
            exp
             prefixexp
              t2
         )
      stat
       for
       i
       =
       exp
        number
         1
       ,
       exp
        #
        exp
         prefixexp
          t1
       do
       block
        stat
         local
         attnamelist
          v
          attrib
         =
         explist
          exp
           prefixexp
            t1
            [
            exp
             prefixexp
              i
            ]
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               t2
               [
               exp
                prefixexp
                 i
               ]
             ==
             exp
              prefixexp
               v
           )
       end
     end
   stat
    varlist
     var
      prefixexp
       _G
      .
      x
    =
    explist
     exp
      nil
   stat
    varlist
     var
      prefixexp
       _G
      .
      f
    =
    explist
     exp
      nil
   stat
    local
    function
    foo
    funcbody
     (
     parlist
      namelist
       a
      ,
      ...
     )
     block
      stat
       local
       attnamelist
        x
        attrib
        ,
        y
        attrib
       =
       explist
        exp
         prefixexp
          functioncall
           coroutine
           .
           running
           args
            (
            )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            exp
             prefixexp
              x
            ==
            exp
             prefixexp
              f
           and
           exp
            exp
             prefixexp
              y
            ==
            exp
             false
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              coroutine
              .
              resume
              args
               (
               explist
                exp
                 prefixexp
                  f
               )
           ==
           exp
            false
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              coroutine
              .
              status
              args
               (
               explist
                exp
                 prefixexp
                  f
               )
           ==
           exp
            string
             "running"
         )
      stat
       local
       attnamelist
        arg
        attrib
       =
       explist
        exp
         tableconstructor
          {
          fieldlist
           field
            exp
             ...
          }
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           prefixexp
            functioncall
             coroutine
             .
             isyieldable
             args
              (
              explist
               exp
                prefixexp
                 x
              )
         )
      stat
       for
       i
       =
       exp
        number
         1
       ,
       exp
        #
        exp
         prefixexp
          arg
       do
       block
        stat
         varlist
          var
           prefixexp
            _G
           .
           x
         =
         explist
          exp
           tableconstructor
            {
            fieldlist
             field
              exp
               prefixexp
                functioncall
                 coroutine
                 .
                 yield
                 args
                  (
                  explist
                   exp
                    prefixexp
                     functioncall
                      table
                      .
                      unpack
                      args
                       (
                       explist
                        exp
                         prefixexp
                          arg
                          [
                          exp
                           prefixexp
                            i
                          ]
                       )
                  )
            }
       end
      retstat
       return
       explist
        exp
         prefixexp
          functioncall
           table
           .
           unpack
           args
            (
            explist
             exp
              prefixexp
               a
            )
     end
   stat
    varlist
     var
      f
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        create
        args
         (
         explist
          exp
           prefixexp
            foo
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          isyieldable
          args
           (
           explist
            exp
             prefixexp
              f
           )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            type
            args
             (
             explist
              exp
               prefixexp
                f
             )
         ==
         exp
          string
           "thread"
        and
        exp
         exp
          prefixexp
           functioncall
            coroutine
            .
            status
            args
             (
             explist
              exp
               prefixexp
                f
             )
         ==
         exp
          string
           "suspended"
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         functioncall
          string
          .
          find
          args
           (
           explist
            exp
             prefixexp
              functioncall
               tostring
               args
                (
                explist
                 exp
                  prefixexp
                   f
                )
            ,
            exp
             string
              "thread"
           )
      )
   stat
    local
    attnamelist
     s
     attrib
     ,
     a
     attrib
     ,
     b
     attrib
     ,
     c
     attrib
     ,
     d
     attrib
   stat
    varlist
     var
      s
     ,
     var
      a
     ,
     var
      b
     ,
     var
      c
     ,
     var
      d
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            f
          ,
          exp
           tableconstructor
            {
            fieldlist
             field
              exp
               number
                1
             fieldsep
              ,
             field
              exp
               number
                2
             fieldsep
              ,
             field
              exp
               number
                3
            }
          ,
          exp
           tableconstructor
            {
            }
          ,
          exp
           tableconstructor
            {
            fieldlist
             field
              exp
               number
                1
            }
          ,
          exp
           tableconstructor
            {
            fieldlist
             field
              exp
               string
                'a'
             fieldsep
              ,
             field
              exp
               string
                'b'
             fieldsep
              ,
             field
              exp
               string
                'c'
            }
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          isyieldable
          args
           (
           explist
            exp
             prefixexp
              f
           )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           s
         and
         exp
          exp
           prefixexp
            a
          ==
          exp
           nil
        and
        exp
         exp
          prefixexp
           functioncall
            coroutine
            .
            status
            args
             (
             explist
              exp
               prefixexp
                f
             )
         ==
         exp
          string
           "suspended"
      )
   stat
    varlist
     var
      s
     ,
     var
      a
     ,
     var
      b
     ,
     var
      c
     ,
     var
      d
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            f
         )
   stat
    functioncall
     eqtab
     args
      (
      explist
       exp
        prefixexp
         _G
         .
         x
       ,
       exp
        tableconstructor
         {
         }
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           s
         and
         exp
          exp
           prefixexp
            a
          ==
          exp
           number
            1
        and
        exp
         exp
          prefixexp
           b
         ==
         exp
          nil
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          isyieldable
          args
           (
           explist
            exp
             prefixexp
              f
           )
      )
   stat
    varlist
     var
      s
     ,
     var
      a
     ,
     var
      b
     ,
     var
      c
     ,
     var
      d
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            f
          ,
          exp
           number
            1
          ,
          exp
           number
            2
          ,
          exp
           number
            3
         )
   stat
    functioncall
     eqtab
     args
      (
      explist
       exp
        prefixexp
         _G
         .
         x
       ,
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            number
             1
          fieldsep
           ,
          field
           exp
            number
             2
          fieldsep
           ,
          field
           exp
            number
             3
         }
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            prefixexp
             s
           and
           exp
            exp
             prefixexp
              a
            ==
            exp
             string
              'a'
          and
          exp
           exp
            prefixexp
             b
           ==
           exp
            string
             'b'
         and
         exp
          exp
           prefixexp
            c
          ==
          exp
           string
            'c'
        and
        exp
         exp
          prefixexp
           d
         ==
         exp
          nil
      )
   stat
    varlist
     var
      s
     ,
     var
      a
     ,
     var
      b
     ,
     var
      c
     ,
     var
      d
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            f
          ,
          exp
           string
            "xuxu"
         )
   stat
    functioncall
     eqtab
     args
      (
      explist
       exp
        prefixexp
         _G
         .
         x
       ,
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            string
             "xuxu"
         }
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            prefixexp
             s
           and
           exp
            exp
             prefixexp
              a
            ==
            exp
             number
              1
          and
          exp
           exp
            prefixexp
             b
           ==
           exp
            number
             2
         and
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            3
        and
        exp
         exp
          prefixexp
           d
         ==
         exp
          nil
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           coroutine
           .
           status
           args
            (
            explist
             exp
              prefixexp
               f
            )
        ==
        exp
         string
          "dead"
      )
   stat
    varlist
     var
      s
     ,
     var
      a
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            f
          ,
          exp
           string
            "xuxu"
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          not
          exp
           prefixexp
            s
         and
         exp
          prefixexp
           functioncall
            string
            .
            find
            args
             (
             explist
              exp
               prefixexp
                a
              ,
              exp
               string
                "dead"
             )
        and
        exp
         exp
          prefixexp
           functioncall
            coroutine
            .
            status
            args
             (
             explist
              exp
               prefixexp
                f
             )
         ==
         exp
          string
           "dead"
      )
   stat
    varlist
     var
      prefixexp
       _G
      .
      f
    =
    explist
     exp
      nil
   stat
    local
    function
    foo
    funcbody
     (
     parlist
      namelist
       i
     )
     block
      retstat
       return
       explist
        exp
         prefixexp
          functioncall
           coroutine
           .
           yield
           args
            (
            explist
             exp
              prefixexp
               i
            )
     end
   stat
    local
    attnamelist
     f
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               for
               i
               =
               exp
                number
                 1
               ,
               exp
                number
                 10
               do
               block
                stat
                 functioncall
                  assert
                  args
                   (
                   explist
                    exp
                     exp
                      prefixexp
                       functioncall
                        foo
                        args
                         (
                         explist
                          exp
                           prefixexp
                            i
                         )
                     ==
                     exp
                      prefixexp
                       _G
                       .
                       x
                   )
               end
              retstat
               return
               explist
                exp
                 string
                  'a'
             end
         )
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      10
    do
    block
     stat
      varlist
       var
        prefixexp
         _G
        .
        x
      =
      explist
       exp
        prefixexp
         i
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             f
             args
              (
              explist
               exp
                prefixexp
                 i
              )
          ==
          exp
           prefixexp
            i
        )
    end
   stat
    varlist
     var
      prefixexp
       _G
      .
      x
    =
    explist
     exp
      string
       'xuxu'
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           f
           args
            (
            explist
             exp
              string
               'xuxu'
            )
        ==
        exp
         string
          'a'
      )
   stat
    varlist
     var
      prefixexp
       _G
      .
      x
    =
    explist
     exp
      nil
   stat
    local
    function
    pf
    funcbody
     (
     parlist
      namelist
       n
       ,
       i
     )
     block
      stat
       functioncall
        coroutine
        .
        yield
        args
         (
         explist
          exp
           prefixexp
            n
         )
      stat
       functioncall
        pf
        args
         (
         explist
          exp
           exp
            prefixexp
             n
           *
           exp
            prefixexp
             i
          ,
          exp
           exp
            prefixexp
             i
           +
           exp
            number
             1
         )
     end
   stat
    varlist
     var
      f
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           prefixexp
            pf
         )
   stat
    local
    attnamelist
     s
     attrib
    =
    explist
     exp
      number
       1
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      10
    do
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             f
             args
              (
              explist
               exp
                number
                 1
               ,
               exp
                number
                 1
              )
          ==
          exp
           prefixexp
            s
        )
     stat
      varlist
       var
        s
      =
      explist
       exp
        exp
         prefixexp
          s
        *
        exp
         prefixexp
          i
    end
   stat
    local
    function
    gen
    funcbody
     (
     parlist
      namelist
       n
     )
     block
      retstat
       return
       explist
        exp
         prefixexp
          functioncall
           coroutine
           .
           wrap
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 stat
                  for
                  i
                  =
                  exp
                   number
                    2
                  ,
                  exp
                   prefixexp
                    n
                  do
                  block
                   stat
                    functioncall
                     coroutine
                     .
                     yield
                     args
                      (
                      explist
                       exp
                        prefixexp
                         i
                      )
                  end
                end
            )
     end
   stat
    local
    function
    filter
    funcbody
     (
     parlist
      namelist
       p
       ,
       g
     )
     block
      retstat
       return
       explist
        exp
         prefixexp
          functioncall
           coroutine
           .
           wrap
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 stat
                  while
                  exp
                   number
                    1
                  do
                  block
                   stat
                    local
                    attnamelist
                     n
                     attrib
                    =
                    explist
                     exp
                      prefixexp
                       functioncall
                        g
                        args
                         (
                         )
                   stat
                    if
                    exp
                     exp
                      prefixexp
                       n
                     ==
                     exp
                      nil
                    then
                    block
                     retstat
                      return
                    end
                   stat
                    if
                    exp
                     exp
                      prefixexp
                       functioncall
                        math
                        .
                        fmod
                        args
                         (
                         explist
                          exp
                           prefixexp
                            n
                          ,
                          exp
                           prefixexp
                            p
                         )
                     ~=
                     exp
                      number
                       0
                    then
                    block
                     stat
                      functioncall
                       coroutine
                       .
                       yield
                       args
                        (
                        explist
                         exp
                          prefixexp
                           n
                        )
                    end
                  end
                end
            )
     end
   stat
    local
    attnamelist
     x
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        gen
        args
         (
         explist
          exp
           number
            80
         )
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    while
    exp
     number
      1
    do
    block
     stat
      local
      attnamelist
       n
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          x
          args
           (
           )
     stat
      if
      exp
       exp
        prefixexp
         n
       ==
       exp
        nil
      then
      block
       stat
        break
      end
     stat
      functioncall
       table
       .
       insert
       args
        (
        explist
         exp
          prefixexp
           a
         ,
         exp
          prefixexp
           n
        )
     stat
      varlist
       var
        x
      =
      explist
       exp
        prefixexp
         functioncall
          filter
          args
           (
           explist
            exp
             prefixexp
              n
            ,
            exp
             prefixexp
              x
           )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          #
          exp
           prefixexp
            a
         ==
         exp
          number
           22
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            #
            exp
             prefixexp
              a
           ]
         ==
         exp
          number
           79
      )
   stat
    varlist
     var
      x
     ,
     var
      a
    =
    explist
     exp
      nil
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         "to-be-closed variables in coroutines"
      )
   stat
    local
    function
    func2close
    funcbody
     (
     parlist
      namelist
       f
     )
     block
      retstat
       return
       explist
        exp
         prefixexp
          functioncall
           setmetatable
           args
            (
            explist
             exp
              tableconstructor
               {
               }
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 __close
                 =
                 exp
                  prefixexp
                   f
               }
            )
     end
   stat
    do
    block
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             prefixexp
              print
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            resume
            args
             (
             explist
              exp
               prefixexp
                co
              ,
              exp
               string
                "testing 'coroutine.close'"
             )
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             coroutine
             .
             status
             args
              (
              explist
               exp
                prefixexp
                 co
              )
          ==
          exp
           string
            "dead"
        )
     stat
      local
      attnamelist
       st
       attrib
       ,
       msg
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          close
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            st
          and
          exp
           exp
            prefixexp
             msg
           ==
           exp
            nil
        )
     stat
      varlist
       var
        st
       ,
       var
        msg
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          close
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            st
          and
          exp
           exp
            prefixexp
             msg
           ==
           exp
            nil
        )
     stat
      local
      attnamelist
       st
       attrib
       ,
       msg
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          pcall
          args
           (
           explist
            exp
             prefixexp
              coroutine
              .
              close
            ,
            exp
             prefixexp
              functioncall
               coroutine
               .
               running
               args
                (
                )
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           not
           exp
            prefixexp
             st
          and
          exp
           prefixexp
            functioncall
             string
             .
             find
             args
              (
              explist
               exp
                prefixexp
                 msg
               ,
               exp
                string
                 "running"
              )
        )
     stat
      local
      attnamelist
       main
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          running
          args
           (
           )
     stat
      ;
     stat
      functioncall
       (
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 local
                 attnamelist
                  st
                  attrib
                  ,
                  msg
                  attrib
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     pcall
                     args
                      (
                      explist
                       exp
                        prefixexp
                         coroutine
                         .
                         close
                       ,
                       exp
                        prefixexp
                         main
                      )
                stat
                 functioncall
                  assert
                  args
                   (
                   explist
                    exp
                     exp
                      not
                      exp
                       prefixexp
                        st
                     and
                     exp
                      prefixexp
                       functioncall
                        string
                        .
                        find
                        args
                         (
                         explist
                          exp
                           prefixexp
                            msg
                          ,
                          exp
                           string
                            "normal"
                         )
                   )
               end
           )
       )
       args
        (
        )
     stat
      do
      block
       stat
        local
        attnamelist
         co
         attrib
       stat
        varlist
         var
          co
        =
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            create
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  stat
                   local
                   attnamelist
                    x
                    attrib
                     <
                     close
                     >
                   =
                   explist
                    exp
                     prefixexp
                      functioncall
                       func2close
                       args
                        (
                        explist
                         exp
                          functiondef
                           function
                           funcbody
                            (
                            parlist
                            )
                            block
                             stat
                              functioncall
                               coroutine
                               .
                               close
                               args
                                (
                                explist
                                 exp
                                  prefixexp
                                   co
                                )
                            end
                        )
                  stat
                   functioncall
                    coroutine
                    .
                    yield
                    args
                     (
                     explist
                      exp
                       number
                        20
                     )
                 end
             )
       stat
        local
        attnamelist
         st
         attrib
         ,
         msg
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            resume
            args
             (
             explist
              exp
               prefixexp
                co
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              st
            and
            exp
             exp
              prefixexp
               msg
             ==
             exp
              number
               20
          )
       stat
        varlist
         var
          st
         ,
         var
          msg
        =
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            close
            args
             (
             explist
              exp
               prefixexp
                co
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             not
             exp
              prefixexp
               st
            and
            exp
             prefixexp
              functioncall
               string
               .
               find
               args
                (
                explist
                 exp
                  prefixexp
                   msg
                 ,
                 exp
                  string
                   "running coroutine"
                )
          )
      end
     stat
      local
      attnamelist
       X
       attrib
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             prefixexp
              error
           )
     stat
      local
      attnamelist
       st
       attrib
       ,
       msg
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          resume
          args
           (
           explist
            exp
             prefixexp
              co
            ,
            exp
             number
              100
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           not
           exp
            prefixexp
             st
          and
          exp
           exp
            prefixexp
             msg
           ==
           exp
            number
             100
        )
     stat
      varlist
       var
        st
       ,
       var
        msg
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          close
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           not
           exp
            prefixexp
             st
          and
          exp
           exp
            prefixexp
             msg
           ==
           exp
            number
             100
        )
     stat
      varlist
       var
        st
       ,
       var
        msg
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          close
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            st
          and
          exp
           exp
            prefixexp
             msg
           ==
           exp
            nil
        )
     stat
      varlist
       var
        co
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 local
                 attnamelist
                  x
                  attrib
                   <
                   close
                   >
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     func2close
                     args
                      (
                      explist
                       exp
                        functiondef
                         function
                         funcbody
                          (
                          parlist
                           namelist
                            self
                            ,
                            err
                          )
                          block
                           stat
                            functioncall
                             assert
                             args
                              (
                              explist
                               exp
                                exp
                                 prefixexp
                                  err
                                ==
                                exp
                                 nil
                              )
                           stat
                            ;
                           stat
                            varlist
                             var
                              X
                            =
                            explist
                             exp
                              false
                          end
                      )
                stat
                 varlist
                  var
                   X
                 =
                 explist
                  exp
                   true
                stat
                 functioncall
                  coroutine
                  .
                  yield
                  args
                   (
                   )
               end
           )
     stat
      functioncall
       coroutine
       .
       resume
       args
        (
        explist
         exp
          prefixexp
           co
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          prefixexp
           X
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            close
            args
             (
             explist
              exp
               prefixexp
                co
             )
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           not
           exp
            prefixexp
             X
          and
          exp
           exp
            prefixexp
             functioncall
              coroutine
              .
              status
              args
               (
               explist
                exp
                 prefixexp
                  co
               )
           ==
           exp
            string
             "dead"
        )
     stat
      local
      attnamelist
       x
       attrib
      =
      explist
       exp
        number
         0
     stat
      varlist
       var
        co
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 local
                 attnamelist
                  y
                  attrib
                   <
                   close
                   >
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     func2close
                     args
                      (
                      explist
                       exp
                        functiondef
                         function
                         funcbody
                          (
                          parlist
                           namelist
                            self
                            ,
                            err
                          )
                          block
                           stat
                            functioncall
                             assert
                             args
                              (
                              explist
                               exp
                                exp
                                 prefixexp
                                  err
                                ==
                                exp
                                 number
                                  111
                              )
                           stat
                            varlist
                             var
                              x
                            =
                            explist
                             exp
                              number
                               200
                           stat
                            functioncall
                             error
                             args
                              (
                              explist
                               exp
                                number
                                 200
                              )
                          end
                      )
                stat
                 local
                 attnamelist
                  x
                  attrib
                   <
                   close
                   >
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     func2close
                     args
                      (
                      explist
                       exp
                        functiondef
                         function
                         funcbody
                          (
                          parlist
                           namelist
                            self
                            ,
                            err
                          )
                          block
                           stat
                            functioncall
                             assert
                             args
                              (
                              explist
                               exp
                                exp
                                 prefixexp
                                  err
                                ==
                                exp
                                 nil
                              )
                           stat
                            ;
                           stat
                            functioncall
                             error
                             args
                              (
                              explist
                               exp
                                number
                                 111
                              )
                          end
                      )
                stat
                 functioncall
                  coroutine
                  .
                  yield
                  args
                   (
                   )
               end
           )
     stat
      functioncall
       coroutine
       .
       resume
       args
        (
        explist
         exp
          prefixexp
           co
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            x
          ==
          exp
           number
            0
        )
     stat
      local
      attnamelist
       st
       attrib
       ,
       msg
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          close
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             prefixexp
              st
            ==
            exp
             false
           and
           exp
            exp
             prefixexp
              functioncall
               coroutine
               .
               status
               args
                (
                explist
                 exp
                  prefixexp
                   co
                )
            ==
            exp
             string
              "dead"
          and
          exp
           exp
            prefixexp
             msg
           ==
           exp
            number
             200
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            x
          ==
          exp
           number
            200
        )
     stat
      varlist
       var
        st
       ,
       var
        msg
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          close
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            st
          and
          exp
           exp
            prefixexp
             msg
           ==
           exp
            nil
        )
    end
   stat
    do
    block
     stat
      local
      attnamelist
       X
       attrib
      =
      explist
       exp
        false
     stat
      local
      attnamelist
       Y
       attrib
      =
      explist
       exp
        false
     stat
      local
      function
      foo
      funcbody
       (
       parlist
       )
       block
        stat
         local
         attnamelist
          x
          attrib
           <
           close
           >
         =
         explist
          exp
           prefixexp
            functioncall
             func2close
             args
              (
              explist
               exp
                functiondef
                 function
                 funcbody
                  (
                  parlist
                   namelist
                    self
                    ,
                    err
                  )
                  block
                   stat
                    varlist
                     var
                      Y
                    =
                    explist
                     exp
                      prefixexp
                       functioncall
                        debug
                        .
                        getinfo
                        args
                         (
                         explist
                          exp
                           number
                            2
                         )
                   stat
                    varlist
                     var
                      X
                    =
                    explist
                     exp
                      prefixexp
                       err
                  end
              )
        stat
         functioncall
          error
          args
           (
           explist
            exp
             number
              43
           )
       end
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                retstat
                 return
                 explist
                  exp
                   prefixexp
                    functioncall
                     pcall
                     args
                      (
                      explist
                       exp
                        prefixexp
                         foo
                      )
               end
           )
     stat
      local
      attnamelist
       st1
       attrib
       ,
       st2
       attrib
       ,
       err
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          resume
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             st1
           and
           exp
            not
            exp
             prefixexp
              st2
          and
          exp
           exp
            prefixexp
             err
           ==
           exp
            number
             43
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             X
           ==
           exp
            number
             43
          and
          exp
           exp
            prefixexp
             Y
             .
             what
           ==
           exp
            string
             "C"
        )
     stat
      local
      attnamelist
       track
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      local
      function
      h
      funcbody
       (
       parlist
        namelist
         o
       )
       block
        stat
         local
         attnamelist
          hv
          attrib
           <
           close
           >
         =
         explist
          exp
           prefixexp
            o
        retstat
         return
         explist
          exp
           number
            1
       end
     stat
      local
      function
      foo
      funcbody
       (
       parlist
       )
       block
        stat
         local
         attnamelist
          x
          attrib
           <
           close
           >
         =
         explist
          exp
           prefixexp
            functioncall
             func2close
             args
              (
              explist
               exp
                functiondef
                 function
                 funcbody
                  (
                  parlist
                   namelist
                    _
                    ,
                    msg
                  )
                  block
                   stat
                    varlist
                     var
                      prefixexp
                       track
                      [
                      exp
                       exp
                        #
                        exp
                         prefixexp
                          track
                       +
                       exp
                        number
                         1
                      ]
                    =
                    explist
                     exp
                      exp
                       prefixexp
                        msg
                      or
                      exp
                       false
                   stat
                    functioncall
                     error
                     args
                      (
                      explist
                       exp
                        number
                         20
                      )
                  end
              )
        stat
         local
         attnamelist
          y
          attrib
           <
           close
           >
         =
         explist
          exp
           prefixexp
            functioncall
             func2close
             args
              (
              explist
               exp
                functiondef
                 function
                 funcbody
                  (
                  parlist
                   namelist
                    _
                    ,
                    msg
                  )
                  block
                   stat
                    varlist
                     var
                      prefixexp
                       track
                      [
                      exp
                       exp
                        #
                        exp
                         prefixexp
                          track
                       +
                       exp
                        number
                         1
                      ]
                    =
                    explist
                     exp
                      exp
                       prefixexp
                        msg
                      or
                      exp
                       false
                   retstat
                    return
                    explist
                     exp
                      number
                       1000
                  end
              )
        stat
         local
         attnamelist
          z
          attrib
           <
           close
           >
         =
         explist
          exp
           prefixexp
            functioncall
             func2close
             args
              (
              explist
               exp
                functiondef
                 function
                 funcbody
                  (
                  parlist
                   namelist
                    _
                    ,
                    msg
                  )
                  block
                   stat
                    varlist
                     var
                      prefixexp
                       track
                      [
                      exp
                       exp
                        #
                        exp
                         prefixexp
                          track
                       +
                       exp
                        number
                         1
                      ]
                    =
                    explist
                     exp
                      exp
                       prefixexp
                        msg
                      or
                      exp
                       false
                   stat
                    functioncall
                     error
                     args
                      (
                      explist
                       exp
                        number
                         10
                      )
                  end
              )
        stat
         functioncall
          coroutine
          .
          yield
          args
           (
           explist
            exp
             number
              1
           )
        stat
         functioncall
          h
          args
           (
           explist
            exp
             prefixexp
              functioncall
               func2close
               args
                (
                explist
                 exp
                  functiondef
                   function
                   funcbody
                    (
                    parlist
                     namelist
                      _
                      ,
                      msg
                    )
                    block
                     stat
                      varlist
                       var
                        prefixexp
                         track
                        [
                        exp
                         exp
                          #
                          exp
                           prefixexp
                            track
                         +
                         exp
                          number
                           1
                        ]
                      =
                      explist
                       exp
                        exp
                         prefixexp
                          msg
                        or
                        exp
                         false
                     stat
                      functioncall
                       error
                       args
                        (
                        explist
                         exp
                          number
                           2
                        )
                    end
                )
           )
       end
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             prefixexp
              pcall
           )
     stat
      local
      attnamelist
       st
       attrib
       ,
       res
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          resume
          args
           (
           explist
            exp
             prefixexp
              co
            ,
            exp
             prefixexp
              foo
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            st
          and
          exp
           exp
            prefixexp
             res
           ==
           exp
            number
             1
        )
     stat
      local
      attnamelist
       st
       attrib
       ,
       res1
       attrib
       ,
       res2
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          resume
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             coroutine
             .
             status
             args
              (
              explist
               exp
                prefixexp
                 co
              )
          ==
          exp
           string
            "dead"
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             st
           and
           exp
            not
            exp
             prefixexp
              res1
          and
          exp
           exp
            prefixexp
             res2
           ==
           exp
            number
             20
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             exp
              prefixexp
               track
               [
               exp
                number
                 1
               ]
             ==
             exp
              false
            and
            exp
             exp
              prefixexp
               track
               [
               exp
                number
                 2
               ]
             ==
             exp
              number
               2
           and
           exp
            exp
             prefixexp
              track
              [
              exp
               number
                3
              ]
            ==
            exp
             number
              10
          and
          exp
           exp
            prefixexp
             track
             [
             exp
              number
               4
             ]
           ==
           exp
            number
             10
        )
    end
   stat
    local
    attnamelist
     co
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               functioncall
                assert
                args
                 (
                 explist
                  exp
                   not
                   exp
                    prefixexp
                     functioncall
                      pcall
                      args
                       (
                       explist
                        exp
                         prefixexp
                          table
                          .
                          sort
                        ,
                        exp
                         tableconstructor
                          {
                          fieldlist
                           field
                            exp
                             number
                              1
                           fieldsep
                            ,
                           field
                            exp
                             number
                              2
                           fieldsep
                            ,
                           field
                            exp
                             number
                              3
                          }
                        ,
                        exp
                         prefixexp
                          coroutine
                          .
                          yield
                       )
                 )
              stat
               functioncall
                assert
                args
                 (
                 explist
                  exp
                   prefixexp
                    functioncall
                     coroutine
                     .
                     isyieldable
                     args
                      (
                      )
                 )
              stat
               functioncall
                coroutine
                .
                yield
                args
                 (
                 explist
                  exp
                   number
                    20
                 )
              retstat
               return
               explist
                exp
                 number
                  30
             end
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            )
        ==
        exp
         number
          20
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            )
        ==
        exp
         number
          30
      )
   stat
    local
    attnamelist
     f
     attrib
    =
    explist
     exp
      functiondef
       function
       funcbody
        (
        parlist
         namelist
          s
          ,
          i
        )
        block
         retstat
          return
          explist
           exp
            prefixexp
             functioncall
              coroutine
              .
              yield
              args
               (
               explist
                exp
                 prefixexp
                  i
               )
        end
   stat
    local
    attnamelist
     f1
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              retstat
               return
               explist
                exp
                 prefixexp
                  functioncall
                   xpcall
                   args
                    (
                    explist
                     exp
                      prefixexp
                       pcall
                     ,
                     exp
                      functiondef
                       function
                       funcbody
                        (
                        parlist
                         ...
                        )
                        block
                         retstat
                          return
                          explist
                           exp
                            ...
                        end
                     ,
                     exp
                      functiondef
                       function
                       funcbody
                        (
                        parlist
                        )
                        block
                         stat
                          local
                          attnamelist
                           s
                           attrib
                          =
                          explist
                           exp
                            number
                             0
                         stat
                          for
                          namelist
                           i
                          in
                          explist
                           exp
                            prefixexp
                             f
                           ,
                           exp
                            nil
                           ,
                           exp
                            number
                             1
                          do
                          block
                           stat
                            functioncall
                             pcall
                             args
                              (
                              explist
                               exp
                                functiondef
                                 function
                                 funcbody
                                  (
                                  parlist
                                  )
                                  block
                                   stat
                                    varlist
                                     var
                                      s
                                    =
                                    explist
                                     exp
                                      exp
                                       prefixexp
                                        s
                                      +
                                      exp
                                       prefixexp
                                        i
                                  end
                              )
                          end
                         stat
                          functioncall
                           error
                           args
                            (
                            explist
                             exp
                              tableconstructor
                               {
                               fieldlist
                                field
                                 exp
                                  prefixexp
                                   s
                               }
                            )
                        end
                    )
             end
         )
   stat
    functioncall
     f1
     args
      (
      )
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      10
    do
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             f1
             args
              (
              explist
               exp
                prefixexp
                 i
              )
          ==
          exp
           prefixexp
            i
        )
    end
   stat
    local
    attnamelist
     r1
     attrib
     ,
     r2
     attrib
     ,
     v
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        f1
        args
         (
         explist
          exp
           nil
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           r1
         and
         exp
          not
          exp
           prefixexp
            r2
        and
        exp
         exp
          prefixexp
           v
           [
           exp
            number
             1
           ]
         ==
         exp
          exp
           exp
            prefixexp
             (
             exp
              exp
               number
                10
              +
              exp
               number
                1
             )
           *
           exp
            number
             10
          /
          exp
           number
            2
      )
   stat
    local
    function
    f
    funcbody
     (
     parlist
      namelist
       a
       ,
       b
     )
     block
      stat
       varlist
        var
         a
       =
       explist
        exp
         prefixexp
          functioncall
           coroutine
           .
           yield
           args
            (
            explist
             exp
              prefixexp
               a
            )
      stat
       ;
      stat
       functioncall
        error
        args
         tableconstructor
          {
          fieldlist
           field
            exp
             exp
              prefixexp
               a
             +
             exp
              prefixexp
               b
          }
     end
   stat
    local
    function
    g
    funcbody
     (
     parlist
      namelist
       x
     )
     block
      retstat
       return
       explist
        exp
         exp
          prefixexp
           x
           [
           exp
            number
             1
           ]
         *
         exp
          number
           2
     end
   stat
    varlist
     var
      co
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               functioncall
                coroutine
                .
                yield
                args
                 (
                 explist
                  exp
                   prefixexp
                    functioncall
                     xpcall
                     args
                      (
                      explist
                       exp
                        prefixexp
                         f
                       ,
                       exp
                        prefixexp
                         g
                       ,
                       exp
                        number
                         10
                       ,
                       exp
                        number
                         20
                      )
                 )
             end
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            )
        ==
        exp
         number
          10
      )
   stat
    local
    attnamelist
     r
     attrib
     ,
     msg
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        co
        args
         (
         explist
          exp
           number
            100
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         not
         exp
          prefixexp
           r
        and
        exp
         exp
          prefixexp
           msg
         ==
         exp
          number
           240
      )
   stat
    do
    block
     stat
      local
      function
      f
      funcbody
       (
       parlist
        namelist
         c
       )
       block
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             not
             exp
              prefixexp
               functioncall
                coroutine
                .
                isyieldable
                args
                 (
                 )
           )
        retstat
         return
         explist
          exp
           exp
            prefixexp
             c
           ..
           exp
            prefixexp
             c
       end
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
                namelist
                 c
               )
               block
                stat
                 functioncall
                  assert
                  args
                   (
                   explist
                    exp
                     prefixexp
                      functioncall
                       coroutine
                       .
                       isyieldable
                       args
                        (
                        )
                   )
                stat
                 local
                 attnamelist
                  s
                  attrib
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     string
                     .
                     gsub
                     args
                      (
                      explist
                       exp
                        string
                         "a"
                       ,
                       exp
                        string
                         "."
                       ,
                       exp
                        prefixexp
                         f
                      )
                retstat
                 return
                 explist
                  exp
                   prefixexp
                    s
               end
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             co
             args
              (
              )
          ==
          exp
           string
            "aa"
        )
    end
   stat
    do
    block
     stat
      local
      attnamelist
       X
       attrib
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 functioncall
                  coroutine
                  .
                  yield
                  args
                   (
                   explist
                    exp
                     number
                      10
                   )
                retstat
                 return
                 explist
                  exp
                   number
                    20
                 ;
               end
           )
     stat
      local
      attnamelist
       trace
       attrib
      =
      explist
       exp
        tableconstructor
         {
         }
     stat
      local
      function
      dotrace
      funcbody
       (
       parlist
        namelist
         event
       )
       block
        stat
         varlist
          var
           prefixexp
            trace
           [
           exp
            exp
             #
             exp
              prefixexp
               trace
            +
            exp
             number
              1
           ]
         =
         explist
          exp
           prefixexp
            event
       end
     stat
      functioncall
       debug
       .
       sethook
       args
        (
        explist
         exp
          prefixexp
           co
         ,
         exp
          prefixexp
           dotrace
         ,
         exp
          string
           "clr"
        )
     stat
      repeat
      block
      until
      exp
       not
       exp
        prefixexp
         functioncall
          coroutine
          .
          resume
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      local
      attnamelist
       correcttrace
       attrib
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            string
             "call"
          fieldsep
           ,
          field
           exp
            string
             "line"
          fieldsep
           ,
          field
           exp
            string
             "call"
          fieldsep
           ,
          field
           exp
            string
             "return"
          fieldsep
           ,
          field
           exp
            string
             "line"
          fieldsep
           ,
          field
           exp
            string
             "return"
         }
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           #
           exp
            prefixexp
             trace
          ==
          exp
           #
           exp
            prefixexp
             correcttrace
        )
     stat
      for
      namelist
       k
       ,
       v
      in
      explist
       exp
        prefixexp
         functioncall
          pairs
          args
           (
           explist
            exp
             prefixexp
              trace
           )
      do
      block
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              v
            ==
            exp
             prefixexp
              correcttrace
              [
              exp
               prefixexp
                k
              ]
          )
      end
    end
   stat
    function
    funcname
     foo
    funcbody
     (
     parlist
     )
     block
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              debug
              .
              getinfo
              args
               (
               explist
                exp
                 number
                  1
               )
             .
             currentline
           ==
           exp
            exp
             prefixexp
              functioncall
               debug
               .
               getinfo
               args
                (
                explist
                 exp
                  prefixexp
                   foo
                )
              .
              linedefined
            +
            exp
             number
              1
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              debug
              .
              getinfo
              args
               (
               explist
                exp
                 number
                  2
               )
             .
             currentline
           ==
           exp
            prefixexp
             functioncall
              debug
              .
              getinfo
              args
               (
               explist
                exp
                 prefixexp
                  goo
               )
             .
             linedefined
         )
      stat
       functioncall
        coroutine
        .
        yield
        args
         (
         explist
          exp
           number
            3
         )
      stat
       functioncall
        error
        args
         (
         explist
          exp
           prefixexp
            foo
         )
     end
   stat
    function
    funcname
     goo
    funcbody
     (
     parlist
     )
     block
      stat
       functioncall
        foo
        args
         (
         )
     end
   stat
    varlist
     var
      x
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           prefixexp
            goo
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           x
           args
            (
            )
        ==
        exp
         number
          3
      )
   stat
    local
    attnamelist
     a
     attrib
     ,
     b
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        pcall
        args
         (
         explist
          exp
           prefixexp
            x
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         not
         exp
          prefixexp
           a
        and
        exp
         exp
          prefixexp
           b
         ==
         exp
          prefixexp
           foo
      )
   stat
    varlist
     var
      x
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        create
        args
         (
         explist
          exp
           prefixexp
            goo
         )
   stat
    varlist
     var
      a
     ,
     var
      b
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            x
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
        and
        exp
         exp
          prefixexp
           b
         ==
         exp
          number
           3
      )
   stat
    varlist
     var
      a
     ,
     var
      b
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            x
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          not
          exp
           prefixexp
            a
         and
         exp
          exp
           prefixexp
            b
          ==
          exp
           prefixexp
            foo
        and
        exp
         exp
          prefixexp
           functioncall
            coroutine
            .
            status
            args
             (
             explist
              exp
               prefixexp
                x
             )
         ==
         exp
          string
           "dead"
      )
   stat
    varlist
     var
      a
     ,
     var
      b
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            x
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          not
          exp
           prefixexp
            a
         and
         exp
          prefixexp
           functioncall
            string
            .
            find
            args
             (
             explist
              exp
               prefixexp
                b
              ,
              exp
               string
                "dead"
             )
        and
        exp
         exp
          prefixexp
           functioncall
            coroutine
            .
            status
            args
             (
             explist
              exp
               prefixexp
                x
             )
         ==
         exp
          string
           "dead"
      )
   stat
    varlist
     var
      goo
    =
    explist
     exp
      nil
   stat
    local
    function
    all
    funcbody
     (
     parlist
      namelist
       a
       ,
       n
       ,
       k
     )
     block
      stat
       if
       exp
        exp
         prefixexp
          k
        ==
        exp
         number
          0
       then
       block
        stat
         functioncall
          coroutine
          .
          yield
          args
           (
           explist
            exp
             prefixexp
              a
           )
       else
       block
        stat
         for
         i
         =
         exp
          number
           1
         ,
         exp
          prefixexp
           n
         do
         block
          stat
           varlist
            var
             prefixexp
              a
             [
             exp
              prefixexp
               k
             ]
           =
           explist
            exp
             prefixexp
              i
          stat
           functioncall
            all
            args
             (
             explist
              exp
               prefixexp
                a
              ,
              exp
               prefixexp
                n
              ,
              exp
               exp
                prefixexp
                 k
               -
               exp
                number
                 1
             )
         end
       end
     end
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      number
       0
   stat
    for
    namelist
     t
    in
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               functioncall
                all
                args
                 (
                 explist
                  exp
                   tableconstructor
                    {
                    }
                  ,
                  exp
                   number
                    5
                  ,
                  exp
                   number
                    4
                 )
             end
         )
    do
    block
     stat
      varlist
       var
        a
      =
      explist
       exp
        exp
         prefixexp
          a
        +
        exp
         number
          1
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
        ==
        exp
         exp
          number
           5
         ^
         exp
          number
           4
      )
   stat
    local
    attnamelist
     C
     attrib
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    ;
   stat
    functioncall
     setmetatable
     args
      (
      explist
       exp
        prefixexp
         C
       ,
       exp
        tableconstructor
         {
         fieldlist
          field
           __mode
           =
           exp
            string
             "kv"
         }
      )
   stat
    local
    attnamelist
     x
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               local
               attnamelist
                a
                attrib
               =
               explist
                exp
                 number
                  10
              stat
               local
               function
               f
               funcbody
                (
                parlist
                )
                block
                 stat
                  varlist
                   var
                    a
                  =
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    +
                    exp
                     number
                      10
                 stat
                  ;
                 retstat
                  return
                  explist
                   exp
                    prefixexp
                     a
                end
              stat
               while
               exp
                true
               do
               block
                stat
                 varlist
                  var
                   a
                 =
                 explist
                  exp
                   exp
                    prefixexp
                     a
                   +
                   exp
                    number
                     1
                stat
                 functioncall
                  coroutine
                  .
                  yield
                  args
                   (
                   explist
                    exp
                     prefixexp
                      f
                   )
               end
             end
         )
   stat
    varlist
     var
      prefixexp
       C
      [
      exp
       number
        1
      ]
    =
    explist
     exp
      prefixexp
       x
   stat
    ;
   stat
    local
    attnamelist
     f
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        x
        args
         (
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            functioncall
             f
             args
              (
              )
          ==
          exp
           number
            21
         and
         exp
          exp
           prefixexp
            functioncall
             functioncall
              x
              args
               (
               )
             args
              (
              )
          ==
          exp
           number
            32
        and
        exp
         exp
          prefixexp
           functioncall
            x
            args
             (
             )
         ==
         exp
          prefixexp
           f
      )
   stat
    varlist
     var
      x
    =
    explist
     exp
      nil
   stat
    functioncall
     collectgarbage
     args
      (
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          C
          [
          exp
           number
            1
          ]
        ==
        exp
         prefixexp
          undef
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            f
            args
             (
             )
         ==
         exp
          number
           43
        and
        exp
         exp
          prefixexp
           functioncall
            f
            args
             (
             )
         ==
         exp
          number
           53
      )
   stat
    local
    function
    co_func
    funcbody
     (
     parlist
      namelist
       current_co
     )
     block
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              coroutine
              .
              running
              args
               (
               )
           ==
           exp
            prefixexp
             current_co
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              coroutine
              .
              resume
              args
               (
               explist
                exp
                 prefixexp
                  current_co
               )
           ==
           exp
            false
         )
      stat
       functioncall
        coroutine
        .
        yield
        args
         (
         explist
          exp
           number
            10
          ,
          exp
           number
            20
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              coroutine
              .
              resume
              args
               (
               explist
                exp
                 prefixexp
                  current_co
               )
           ==
           exp
            false
         )
      stat
       functioncall
        coroutine
        .
        yield
        args
         (
         explist
          exp
           number
            23
         )
      retstat
       return
       explist
        exp
         number
          10
     end
   stat
    local
    attnamelist
     co
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        create
        args
         (
         explist
          exp
           prefixexp
            co_func
         )
   stat
    local
    attnamelist
     a
     attrib
     ,
     b
     attrib
     ,
     c
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            co
          ,
          exp
           prefixexp
            co
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            a
          ==
          exp
           true
         and
         exp
          exp
           prefixexp
            b
          ==
          exp
           number
            10
        and
        exp
         exp
          prefixexp
           c
         ==
         exp
          number
           20
      )
   stat
    varlist
     var
      a
     ,
     var
      b
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            co
          ,
          exp
           prefixexp
            co
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           a
         ==
         exp
          true
        and
        exp
         exp
          prefixexp
           b
         ==
         exp
          number
           23
      )
   stat
    varlist
     var
      a
     ,
     var
      b
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            co
          ,
          exp
           prefixexp
            co
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           a
         ==
         exp
          true
        and
        exp
         exp
          prefixexp
           b
         ==
         exp
          number
           10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           coroutine
           .
           resume
           args
            (
            explist
             exp
              prefixexp
               co
             ,
             exp
              prefixexp
               co
            )
        ==
        exp
         false
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           coroutine
           .
           resume
           args
            (
            explist
             exp
              prefixexp
               co
             ,
             exp
              prefixexp
               co
            )
        ==
        exp
         false
      )
   stat
    do
    block
     stat
      local
      attnamelist
       A
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          running
          args
           (
           )
     stat
      local
      attnamelist
       B
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                retstat
                 return
                 explist
                  exp
                   prefixexp
                    functioncall
                     coroutine
                     .
                     resume
                     args
                      (
                      explist
                       exp
                        prefixexp
                         A
                      )
               end
           )
     stat
      local
      attnamelist
       st
       attrib
       ,
       res
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          resume
          args
           (
           explist
            exp
             prefixexp
              B
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             st
           ==
           exp
            true
          and
          exp
           exp
            prefixexp
             res
           ==
           exp
            false
        )
     stat
      local
      attnamelist
       X
       attrib
      =
      explist
       exp
        false
     stat
      varlist
       var
        A
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 local
                 attnamelist
                  _
                  attrib
                   <
                   close
                   >
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     func2close
                     args
                      (
                      explist
                       exp
                        functiondef
                         function
                         funcbody
                          (
                          parlist
                          )
                          block
                           stat
                            varlist
                             var
                              X
                            =
                            explist
                             exp
                              true
                          end
                      )
                retstat
                 return
                 explist
                  exp
                   prefixexp
                    functioncall
                     pcall
                     args
                      (
                      explist
                       exp
                        prefixexp
                         A
                       ,
                       exp
                        number
                         1
                      )
               end
           )
     stat
      varlist
       var
        st
       ,
       var
        res
      =
      explist
       exp
        prefixexp
         functioncall
          A
          args
           (
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            not
            exp
             prefixexp
              st
           and
           exp
            prefixexp
             functioncall
              string
              .
              find
              args
               (
               explist
                exp
                 prefixexp
                  res
                ,
                exp
                 string
                  "non%-suspended"
               )
          and
          exp
           exp
            prefixexp
             X
           ==
           exp
            true
        )
    end
   stat
    do
    block
     stat
      local
      attnamelist
       co
       attrib
     stat
      varlist
       var
        co
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 local
                 attnamelist
                  x
                  attrib
                   <
                   close
                   >
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     func2close
                     args
                      (
                      explist
                       exp
                        functiondef
                         function
                         funcbody
                          (
                          parlist
                          )
                          block
                           retstat
                            return
                            explist
                             exp
                              prefixexp
                               functioncall
                                pcall
                                args
                                 (
                                 explist
                                  exp
                                   prefixexp
                                    co
                                 )
                          end
                      )
                stat
                 functioncall
                  error
                  args
                   (
                   explist
                    exp
                     number
                      111
                   )
               end
           )
     stat
      local
      attnamelist
       st
       attrib
       ,
       errobj
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          pcall
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           not
           exp
            prefixexp
             st
          and
          exp
           exp
            prefixexp
             errobj
           ==
           exp
            number
             111
        )
     stat
      varlist
       var
        st
       ,
       var
        errobj
      =
      explist
       exp
        prefixexp
         functioncall
          pcall
          args
           (
           explist
            exp
             prefixexp
              co
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           not
           exp
            prefixexp
             st
          and
          exp
           prefixexp
            functioncall
             string
             .
             find
             args
              (
              explist
               exp
                prefixexp
                 errobj
               ,
               exp
                string
                 "dead coroutine"
              )
        )
    end
   stat
    local
    attnamelist
     co1
     attrib
     ,
     co2
     attrib
   stat
    varlist
     var
      co1
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        create
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              retstat
               return
               explist
                exp
                 prefixexp
                  functioncall
                   co2
                   args
                    (
                    )
             end
         )
   stat
    varlist
     var
      co2
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               functioncall
                assert
                args
                 (
                 explist
                  exp
                   exp
                    prefixexp
                     functioncall
                      coroutine
                      .
                      status
                      args
                       (
                       explist
                        exp
                         prefixexp
                          co1
                       )
                   ==
                   exp
                    string
                     'normal'
                 )
              stat
               functioncall
                assert
                args
                 (
                 explist
                  exp
                   not
                   exp
                    prefixexp
                     functioncall
                      coroutine
                      .
                      resume
                      args
                       (
                       explist
                        exp
                         prefixexp
                          co1
                       )
                 )
              stat
               functioncall
                coroutine
                .
                yield
                args
                 (
                 explist
                  exp
                   number
                    3
                 )
             end
         )
   stat
    varlist
     var
      a
     ,
     var
      b
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        resume
        args
         (
         explist
          exp
           prefixexp
            co1
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
        and
        exp
         exp
          prefixexp
           b
         ==
         exp
          number
           3
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           coroutine
           .
           status
           args
            (
            explist
             exp
              prefixexp
               co1
            )
        ==
        exp
         string
          'dead'
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      functiondef
       function
       funcbody
        (
        parlist
         namelist
          a
        )
        block
         stat
          functioncall
           functioncall
            coroutine
            .
            wrap
            args
             (
             explist
              exp
               prefixexp
                a
             )
           args
            (
            explist
             exp
              prefixexp
               a
            )
        end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               a
             ,
             exp
              prefixexp
               a
            )
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      nil
   stat
    local
    attnamelist
     x
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        create
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               local
               attnamelist
                a
                attrib
               =
               explist
                exp
                 number
                  10
              stat
               varlist
                var
                 prefixexp
                  _G
                 .
                 F
               =
               explist
                exp
                 functiondef
                  function
                  funcbody
                   (
                   parlist
                   )
                   block
                    stat
                     varlist
                      var
                       a
                     =
                     explist
                      exp
                       exp
                        prefixexp
                         a
                       +
                       exp
                        number
                         1
                    stat
                     ;
                    retstat
                     return
                     explist
                      exp
                       prefixexp
                        a
                   end
              stat
               functioncall
                error
                args
                 (
                 explist
                  exp
                   string
                    'x'
                 )
             end
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           coroutine
           .
           resume
           args
            (
            explist
             exp
              prefixexp
               x
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           coroutine
           .
           resume
           args
            (
            explist
             exp
              prefixexp
               x
             ,
             exp
              number
               1
             ,
             exp
              number
               1
             ,
             exp
              number
               1
             ,
             exp
              number
               1
             ,
             exp
              number
               1
             ,
             exp
              number
               1
             ,
             exp
              number
               1
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           _G
           .
           F
           args
            (
            )
        ==
        exp
         number
          11
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           _G
           .
           F
           args
            (
            )
        ==
        exp
         number
          12
      )
   stat
    varlist
     var
      prefixexp
       _G
      .
      F
    =
    explist
     exp
      nil
   stat
    if
    exp
     not
     exp
      prefixexp
       T
    then
    block
     stat
      functioncall
       (
       exp
        exp
         prefixexp
          Message
        or
        exp
         prefixexp
          print
       )
       args
        (
        explist
         exp
          string
           '\n >>> testC not active: skipping coroutine API tests <<<\n'
        )
    else
    block
     stat
      functioncall
       print
       args
        string
         "testing yields inside hooks"
     stat
      local
      attnamelist
       turn
       attrib
     stat
      local
      function
      fact
      funcbody
       (
       parlist
        namelist
         t
         ,
         x
       )
       block
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               turn
             ==
             exp
              prefixexp
               t
           )
        stat
         if
         exp
          exp
           prefixexp
            x
          ==
          exp
           number
            0
         then
         block
          retstat
           return
           explist
            exp
             number
              1
         else
         block
          retstat
           return
           explist
            exp
             exp
              prefixexp
               x
             *
             exp
              prefixexp
               functioncall
                fact
                args
                 (
                 explist
                  exp
                   prefixexp
                    t
                  ,
                  exp
                   exp
                    prefixexp
                     x
                   -
                   exp
                    number
                     1
                 )
         end
       end
     stat
      local
      attnamelist
       A
       attrib
       ,
       B
       attrib
      =
      explist
       exp
        number
         0
       ,
       exp
        number
         0
     stat
      local
      attnamelist
       x
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 functioncall
                  T
                  .
                  sethook
                  args
                   (
                   explist
                    exp
                     string
                      "yield 0"
                    ,
                    exp
                     string
                      ""
                    ,
                    exp
                     number
                      2
                   )
                stat
                 varlist
                  var
                   A
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     fact
                     args
                      (
                      explist
                       exp
                        string
                         "A"
                       ,
                       exp
                        number
                         6
                      )
               end
           )
     stat
      local
      attnamelist
       y
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 functioncall
                  T
                  .
                  sethook
                  args
                   (
                   explist
                    exp
                     string
                      "yield 0"
                    ,
                    exp
                     string
                      ""
                    ,
                    exp
                     number
                      3
                   )
                stat
                 varlist
                  var
                   B
                 =
                 explist
                  exp
                   prefixexp
                    functioncall
                     fact
                     args
                      (
                      explist
                       exp
                        string
                         "B"
                       ,
                       exp
                        number
                         7
                      )
               end
           )
     stat
      while
      exp
       exp
        exp
         prefixexp
          A
        ==
        exp
         number
          0
       or
       exp
        exp
         prefixexp
          B
        ==
        exp
         number
          0
      do
      block
       stat
        if
        exp
         exp
          prefixexp
           A
         ==
         exp
          number
           0
        then
        block
         stat
          varlist
           var
            turn
          =
          explist
           exp
            string
             "A"
         stat
          ;
         stat
          functioncall
           assert
           args
            (
            explist
             exp
              prefixexp
               functioncall
                T
                .
                resume
                args
                 (
                 explist
                  exp
                   prefixexp
                    x
                 )
            )
        end
       stat
        if
        exp
         exp
          prefixexp
           B
         ==
         exp
          number
           0
        then
        block
         stat
          varlist
           var
            turn
          =
          explist
           exp
            string
             "B"
         stat
          ;
         stat
          functioncall
           assert
           args
            (
            explist
             exp
              prefixexp
               functioncall
                T
                .
                resume
                args
                 (
                 explist
                  exp
                   prefixexp
                    y
                 )
            )
        end
       stat
        functioncall
         debug
         .
         traceback
         args
          (
          explist
           exp
            prefixexp
             x
          )
       stat
        functioncall
         debug
         .
         traceback
         args
          (
          explist
           exp
            prefixexp
             y
          )
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             B
           //
           exp
            prefixexp
             A
          ==
          exp
           number
            7
        )
     stat
      do
      block
       stat
        local
        attnamelist
         done
         attrib
       stat
        local
        function
        test
        funcbody
         (
         parlist
          namelist
           n
         )
         block
          stat
           varlist
            var
             done
           =
           explist
            exp
             false
          retstat
           return
           explist
            exp
             prefixexp
              functioncall
               coroutine
               .
               wrap
               args
                (
                explist
                 exp
                  functiondef
                   function
                   funcbody
                    (
                    parlist
                    )
                    block
                     stat
                      local
                      attnamelist
                       a
                       attrib
                      =
                      explist
                       exp
                        tableconstructor
                         {
                         }
                     stat
                      for
                      i
                      =
                      exp
                       number
                        1
                      ,
                      exp
                       prefixexp
                        n
                      do
                      block
                       stat
                        varlist
                         var
                          prefixexp
                           a
                          [
                          exp
                           prefixexp
                            i
                          ]
                        =
                        explist
                         exp
                          prefixexp
                           i
                      end
                     stat
                      functioncall
                       T
                       .
                       sethook
                       args
                        (
                        explist
                         exp
                          string
                           "pushint 10; yield 0"
                         ,
                         exp
                          string
                           ""
                         ,
                         exp
                          number
                           1
                        )
                     stat
                      local
                      attnamelist
                       a1
                       attrib
                      =
                      explist
                       exp
                        tableconstructor
                         {
                         fieldlist
                          field
                           exp
                            prefixexp
                             functioncall
                              table
                              .
                              unpack
                              args
                               (
                               explist
                                exp
                                 prefixexp
                                  a
                               )
                         }
                     stat
                      functioncall
                       assert
                       args
                        (
                        explist
                         exp
                          exp
                           #
                           exp
                            prefixexp
                             a1
                          ==
                          exp
                           prefixexp
                            n
                        )
                     stat
                      for
                      i
                      =
                      exp
                       number
                        1
                      ,
                      exp
                       prefixexp
                        n
                      do
                      block
                       stat
                        functioncall
                         assert
                         args
                          (
                          explist
                           exp
                            exp
                             prefixexp
                              a
                              [
                              exp
                               prefixexp
                                i
                              ]
                            ==
                            exp
                             prefixexp
                              i
                          )
                      end
                     stat
                      varlist
                       var
                        done
                      =
                      explist
                       exp
                        true
                    end
                )
         end
       stat
        local
        attnamelist
         co
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            test
            args
             (
             explist
              exp
               number
                0
             )
       stat
        ;
       stat
        while
        exp
         not
         exp
          prefixexp
           done
        do
        block
         stat
          functioncall
           co
           args
            (
            explist
             exp
              number
               30
            )
        end
       stat
        varlist
         var
          co
        =
        explist
         exp
          prefixexp
           functioncall
            test
            args
             (
             explist
              exp
               number
                1
             )
       stat
        ;
       stat
        while
        exp
         not
         exp
          prefixexp
           done
        do
        block
         stat
          functioncall
           co
           args
            (
            explist
             exp
              number
               20
             ,
             exp
              number
               10
            )
        end
       stat
        varlist
         var
          co
        =
        explist
         exp
          prefixexp
           functioncall
            test
            args
             (
             explist
              exp
               number
                3
             )
       stat
        ;
       stat
        while
        exp
         not
         exp
          prefixexp
           done
        do
        block
         stat
          functioncall
           co
           args
            (
            )
        end
       stat
        varlist
         var
          co
        =
        explist
         exp
          prefixexp
           functioncall
            test
            args
             (
             explist
              exp
               number
                100
             )
       stat
        ;
       stat
        while
        exp
         not
         exp
          prefixexp
           done
        do
        block
         stat
          functioncall
           co
           args
            (
            )
        end
      end
     stat
      local
      attnamelist
       line
       attrib
      =
      explist
       exp
        exp
         prefixexp
          functioncall
           debug
           .
           getinfo
           args
            (
            explist
             exp
              number
               1
             ,
             exp
              string
               "l"
            )
          .
          currentline
        +
        exp
         number
          2
     stat
      local
      function
      foo
      funcbody
       (
       parlist
       )
       block
        stat
         local
         attnamelist
          x
          attrib
         =
         explist
          exp
           number
            10
        stat
         varlist
          var
           x
         =
         explist
          exp
           exp
            prefixexp
             x
           +
           exp
            number
             10
        stat
         varlist
          var
           prefixexp
            _G
           .
           XX
         =
         explist
          exp
           prefixexp
            x
       end
     stat
      local
      attnamelist
       co
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 functioncall
                  T
                  .
                  sethook
                  args
                   (
                   explist
                    exp
                     string
                      "setglobal X; yield 0"
                    ,
                    exp
                     string
                      "l"
                    ,
                    exp
                     number
                      0
                   )
                stat
                 ;
                stat
                 functioncall
                  foo
                  args
                   (
                   )
                stat
                 ;
                retstat
                 return
                 explist
                  exp
                   number
                    10
               end
           )
     stat
      varlist
       var
        prefixexp
         _G
        .
        XX
      =
      explist
       exp
        nil
     stat
      ;
     stat
      varlist
       var
        prefixexp
         _G
        .
        X
      =
      explist
       exp
        nil
     stat
      ;
     stat
      functioncall
       co
       args
        (
        )
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            _G
            .
            X
          ==
          exp
           prefixexp
            line
        )
     stat
      varlist
       var
        prefixexp
         _G
        .
        X
      =
      explist
       exp
        nil
     stat
      ;
     stat
      functioncall
       co
       args
        (
        )
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            _G
            .
            X
          ==
          exp
           exp
            prefixexp
             line
           +
           exp
            number
             1
        )
     stat
      varlist
       var
        prefixexp
         _G
        .
        X
      =
      explist
       exp
        nil
     stat
      ;
     stat
      functioncall
       co
       args
        (
        )
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             _G
             .
             X
           ==
           exp
            exp
             prefixexp
              line
            +
            exp
             number
              2
          and
          exp
           exp
            prefixexp
             _G
             .
             XX
           ==
           exp
            nil
        )
     stat
      varlist
       var
        prefixexp
         _G
        .
        X
      =
      explist
       exp
        nil
     stat
      ;
     stat
      functioncall
       co
       args
        (
        )
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             _G
             .
             X
           ==
           exp
            exp
             prefixexp
              line
            +
            exp
             number
              3
          and
          exp
           exp
            prefixexp
             _G
             .
             XX
           ==
           exp
            number
             20
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             co
             args
              (
              )
          ==
          exp
           number
            10
        )
     stat
      varlist
       var
        prefixexp
         _G
        .
        X
      =
      explist
       exp
        nil
     stat
      varlist
       var
        co
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 functioncall
                  T
                  .
                  sethook
                  args
                   (
                   explist
                    exp
                     string
                      "yield 0"
                    ,
                    exp
                     string
                      ""
                    ,
                    exp
                     number
                      1
                   )
                stat
                 ;
                stat
                 functioncall
                  foo
                  args
                   (
                   )
                stat
                 ;
                retstat
                 return
                 explist
                  exp
                   number
                    10
               end
           )
     stat
      varlist
       var
        prefixexp
         _G
        .
        XX
      =
      explist
       exp
        nil
     stat
      ;
     stat
      local
      attnamelist
       c
       attrib
      =
      explist
       exp
        number
         0
     stat
      repeat
      block
       stat
        varlist
         var
          c
        =
        explist
         exp
          exp
           prefixexp
            c
          +
          exp
           number
            1
       stat
        ;
       stat
        local
        attnamelist
         a
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            co
            args
             (
             )
      until
      exp
       exp
        prefixexp
         a
       ==
       exp
        number
         10
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             _G
             .
             XX
           ==
           exp
            number
             20
          and
          exp
           exp
            prefixexp
             c
           >=
           exp
            number
             5
        )
     stat
      varlist
       var
        co
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          wrap
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 functioncall
                  T
                  .
                  sethook
                  args
                   (
                   explist
                    exp
                     string
                      "yield 0"
                    ,
                    exp
                     string
                      ""
                    ,
                    exp
                     number
                      2
                   )
                stat
                 ;
                stat
                 functioncall
                  foo
                  args
                   (
                   )
                stat
                 ;
                retstat
                 return
                 explist
                  exp
                   number
                    10
               end
           )
     stat
      varlist
       var
        prefixexp
         _G
        .
        XX
      =
      explist
       exp
        nil
     stat
      ;
     stat
      local
      attnamelist
       c
       attrib
      =
      explist
       exp
        number
         0
     stat
      repeat
      block
       stat
        varlist
         var
          c
        =
        explist
         exp
          exp
           prefixexp
            c
          +
          exp
           number
            1
       stat
        ;
       stat
        local
        attnamelist
         a
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            co
            args
             (
             )
      until
      exp
       exp
        prefixexp
         a
       ==
       exp
        number
         10
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             _G
             .
             XX
           ==
           exp
            number
             20
          and
          exp
           exp
            prefixexp
             c
           >=
           exp
            number
             5
        )
     stat
      varlist
       var
        prefixexp
         _G
        .
        X
      =
      explist
       exp
        nil
     stat
      ;
     stat
      varlist
       var
        prefixexp
         _G
        .
        XX
      =
      explist
       exp
        nil
     stat
      do
      block
       stat
        varlist
         var
          c
        =
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            create
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                  namelist
                   a
                  ,
                  ...
                 )
                 block
                  stat
                   functioncall
                    T
                    .
                    sethook
                    args
                     (
                     explist
                      exp
                       string
                        "yield 0"
                      ,
                      exp
                       string
                        "l"
                     )
                  stat
                   functioncall
                    assert
                    args
                     (
                     explist
                      exp
                       exp
                        prefixexp
                         a
                       ==
                       exp
                        number
                         10
                     )
                  retstat
                   return
                   explist
                    exp
                     ...
                 end
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            prefixexp
             functioncall
              coroutine
              .
              resume
              args
               (
               explist
                exp
                 prefixexp
                  c
                ,
                exp
                 number
                  1
                ,
                exp
                 number
                  2
                ,
                exp
                 number
                  3
               )
          )
       stat
        local
        attnamelist
         n
         attrib
         ,
         v
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            debug
            .
            getlocal
            args
             (
             explist
              exp
               prefixexp
                c
              ,
              exp
               number
                0
              ,
              exp
               number
                1
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             exp
              prefixexp
               n
             ==
             exp
              string
               "a"
            and
            exp
             exp
              prefixexp
               v
             ==
             exp
              number
               1
          )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            prefixexp
             functioncall
              debug
              .
              setlocal
              args
               (
               explist
                exp
                 prefixexp
                  c
                ,
                exp
                 number
                  0
                ,
                exp
                 number
                  1
                ,
                exp
                 number
                  10
               )
          )
       stat
        local
        attnamelist
         t
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            debug
            .
            getinfo
            args
             (
             explist
              exp
               prefixexp
                c
              ,
              exp
               number
                0
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              t
              .
              currentline
            ==
            exp
             exp
              prefixexp
               t
               .
               linedefined
             +
             exp
              number
               1
          )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            not
            exp
             prefixexp
              functioncall
               debug
               .
               getinfo
               args
                (
                explist
                 exp
                  prefixexp
                   c
                 ,
                 exp
                  number
                   1
                )
          )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            prefixexp
             functioncall
              coroutine
              .
              resume
              args
               (
               explist
                exp
                 prefixexp
                  c
               )
          )
       stat
        varlist
         var
          v
        =
        explist
         exp
          tableconstructor
           {
           fieldlist
            field
             exp
              prefixexp
               functioncall
                coroutine
                .
                resume
                args
                 (
                 explist
                  exp
                   prefixexp
                    c
                 )
           }
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             exp
              exp
               exp
                prefixexp
                 v
                 [
                 exp
                  number
                   1
                 ]
               ==
               exp
                true
              and
              exp
               exp
                prefixexp
                 v
                 [
                 exp
                  number
                   2
                 ]
               ==
               exp
                number
                 2
             and
             exp
              exp
               prefixexp
                v
                [
                exp
                 number
                  3
                ]
              ==
              exp
               number
                3
            and
            exp
             exp
              prefixexp
               v
               [
               exp
                number
                 4
               ]
             ==
             exp
              prefixexp
               undef
          )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            not
            exp
             prefixexp
              functioncall
               coroutine
               .
               resume
               args
                (
                explist
                 exp
                  prefixexp
                   c
                )
          )
      end
     stat
      do
      block
       stat
        local
        attnamelist
         c
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            create
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  stat
                   functioncall
                    T
                    .
                    testC
                    args
                     (
                     explist
                      exp
                       string
                        "yield 1"
                      ,
                      exp
                       number
                        10
                      ,
                      exp
                       number
                        20
                     )
                 end
             )
       stat
        local
        attnamelist
         a
         attrib
         ,
         b
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            resume
            args
             (
             explist
              exp
               prefixexp
                c
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              a
            and
            exp
             exp
              prefixexp
               b
             ==
             exp
              number
               20
          )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              functioncall
               debug
               .
               getinfo
               args
                (
                explist
                 exp
                  prefixexp
                   c
                 ,
                 exp
                  number
                   0
                )
              .
              linedefined
            ==
            exp
             -
             exp
              number
               1
          )
       stat
        varlist
         var
          a
         ,
         var
          b
        =
        explist
         exp
          prefixexp
           functioncall
            debug
            .
            getlocal
            args
             (
             explist
              exp
               prefixexp
                c
              ,
              exp
               number
                0
              ,
              exp
               number
                2
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              b
            ==
            exp
             number
              10
          )
      end
     stat
      functioncall
       print
       args
        string
         "testing coroutine API"
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             T
             .
             testC
             args
              (
              explist
               exp
                string
                 [[\n    newthread      # create thread\n    pushvalue 2    # push body\n    pushstring 'a a a'  # push argument\n    xmove 0 3 2   # move values to new thread\n    resume -1, 1    # call it first time\n    pushstatus\n    xmove 3 0 0   # move results back to stack\n    setglobal X    # result\n    setglobal Y    # status\n    pushvalue 2     # push body (to call it again)\n    pushstring 'b b b'\n    xmove 0 3 2\n    resume -1, 1    # call it again\n    pushstatus\n    xmove 3 0 0\n    return 1        # return result\n  ]]
               ,
               exp
                functiondef
                 function
                 funcbody
                  (
                  parlist
                   ...
                  )
                  block
                   retstat
                    return
                    explist
                     exp
                      ...
                  end
              )
          ==
          exp
           string
            'b b b'
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             X
           ==
           exp
            string
             'a a a'
          and
          exp
           exp
            prefixexp
             Y
           ==
           exp
            string
             'OK'
        )
     stat
      varlist
       var
        X
       ,
       var
        Y
      =
      explist
       exp
        nil
     stat
      varlist
       var
        C
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          create
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                retstat
                 return
                 explist
                  exp
                   prefixexp
                    functioncall
                     T
                     .
                     testC
                     args
                      (
                      explist
                       exp
                        string
                         [[\n                 pushnum 10;\n                 pushnum 20;\n                 resume -3 2;\n                 pushstatus\n                 gettop;\n                 return 3]]
                       ,
                       exp
                        prefixexp
                         C
                      )
               end
           )
     stat
      local
      attnamelist
       a
       attrib
       ,
       b
       attrib
       ,
       c
       attrib
       ,
       d
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          coroutine
          .
          resume
          args
           (
           explist
            exp
             prefixexp
              C
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             exp
              prefixexp
               a
             ==
             exp
              true
            and
            exp
             prefixexp
              functioncall
               string
               .
               find
               args
                (
                explist
                 exp
                  prefixexp
                   b
                 ,
                 exp
                  string
                   "non%-suspended"
                )
           and
           exp
            exp
             prefixexp
              c
            ==
            exp
             string
              "ERRRUN"
          and
          exp
           exp
            prefixexp
             d
           ==
           exp
            number
             4
        )
     stat
      varlist
       var
        a
       ,
       var
        b
       ,
       var
        c
       ,
       var
        d
      =
      explist
       exp
        prefixexp
         functioncall
          T
          .
          testC
          args
           (
           explist
            exp
             string
              [[\n    rawgeti R 1    # get main thread\n    pushnum 10;\n    pushnum 20;\n    resume -3 2;\n    pushstatus\n    gettop;\n    return 4]]
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             exp
              prefixexp
               a
             ==
             exp
              prefixexp
               functioncall
                coroutine
                .
                running
                args
                 (
                 )
            and
            exp
             prefixexp
              functioncall
               string
               .
               find
               args
                (
                explist
                 exp
                  prefixexp
                   b
                 ,
                 exp
                  string
                   "non%-suspended"
                )
           and
           exp
            exp
             prefixexp
              c
            ==
            exp
             string
              "ERRRUN"
          and
          exp
           exp
            prefixexp
             d
           ==
           exp
            number
             4
        )
     stat
      local
      attnamelist
       state
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          T
          .
          newstate
          args
           (
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          prefixexp
           functioncall
            T
            .
            testC
            args
             (
             explist
              exp
               prefixexp
                state
              ,
              exp
               string
                "newthread; isyieldable -1; remove 1; return 1"
             )
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          not
          exp
           prefixexp
            functioncall
             T
             .
             testC
             args
              (
              explist
               exp
                prefixexp
                 state
               ,
               exp
                string
                 "rawgeti R 1; isyieldable -1; remove 1; return 1"
              )
        )
     stat
      functioncall
       T
       .
       testC
       args
        (
        explist
         exp
          prefixexp
           state
         ,
         exp
          string
           "settop 0"
        )
     stat
      functioncall
       T
       .
       loadlib
       args
        (
        explist
         exp
          prefixexp
           state
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          prefixexp
           functioncall
            T
            .
            doremote
            args
             (
             explist
              exp
               prefixexp
                state
              ,
              exp
               string
                [[\n    coroutine = require'coroutine';\n    X = function (x) coroutine.yield(x, 'BB'); return 'CC' end;\n    return 'ok']]
             )
        )
     stat
      local
      attnamelist
       t
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          table
          .
          pack
          args
           (
           explist
            exp
             prefixexp
              functioncall
               T
               .
               testC
               args
                (
                explist
                 exp
                  prefixexp
                   state
                 ,
                 exp
                  string
                   [[\n    rawgeti R 1     # get main thread\n    pushstring 'XX'\n    getglobal X    # get function for body\n    pushstring AA      # arg\n    resume 1 1      # 'resume' shadows previous stack!\n    gettop\n    setglobal T    # top\n    setglobal B    # second yielded value\n    setglobal A    # fist yielded value\n    rawgeti R 1     # get main thread\n    pushnum 5       # arg (noise)\n    resume 1 1      # after coroutine ends, previous stack is back\n    pushstatus\n    return *\n  ]]
                )
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            exp
             exp
              prefixexp
               t
               .
               n
             ==
             exp
              number
               4
            and
            exp
             exp
              prefixexp
               t
               [
               exp
                number
                 2
               ]
             ==
             exp
              string
               'XX'
           and
           exp
            exp
             prefixexp
              t
              [
              exp
               number
                3
              ]
            ==
            exp
             string
              'CC'
          and
          exp
           exp
            prefixexp
             t
             [
             exp
              number
               4
             ]
           ==
           exp
            string
             'OK'
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             T
             .
             doremote
             args
              (
              explist
               exp
                prefixexp
                 state
               ,
               exp
                string
                 "return T"
              )
          ==
          exp
           string
            '2'
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             T
             .
             doremote
             args
              (
              explist
               exp
                prefixexp
                 state
               ,
               exp
                string
                 "return A"
              )
          ==
          exp
           string
            'AA'
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             T
             .
             doremote
             args
              (
              explist
               exp
                prefixexp
                 state
               ,
               exp
                string
                 "return B"
              )
          ==
          exp
           string
            'BB'
        )
     stat
      functioncall
       T
       .
       closestate
       args
        (
        explist
         exp
          prefixexp
           state
        )
     stat
      functioncall
       print
       args
        string
         '+'
    end
   stat
    varlist
     var
      prefixexp
       _G
      .
      TO_SURVIVE
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               local
               attnamelist
                a
                attrib
               =
               explist
                exp
                 number
                  10
              stat
               local
               attnamelist
                x
                attrib
               =
               explist
                exp
                 functiondef
                  function
                  funcbody
                   (
                   parlist
                   )
                   block
                    stat
                     varlist
                      var
                       a
                     =
                     explist
                      exp
                       exp
                        prefixexp
                         a
                       +
                       exp
                        number
                         1
                   end
              stat
               functioncall
                coroutine
                .
                yield
                args
                 (
                 )
             end
         )
   stat
    functioncall
     _G
     .
     TO_SURVIVE
     args
      (
      )
   stat
    if
    exp
     not
     exp
      prefixexp
       _soft
    then
    block
     stat
      local
      attnamelist
       lim
       attrib
      =
      explist
       exp
        number
         1000000
     stat
      local
      attnamelist
       t
       attrib
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            exp
             prefixexp
              lim
            -
            exp
             number
              10
          fieldsep
           ,
          field
           exp
            exp
             prefixexp
              lim
            -
            exp
             number
              5
          fieldsep
           ,
          field
           exp
            exp
             prefixexp
              lim
            -
            exp
             number
              1
          fieldsep
           ,
          field
           exp
            prefixexp
             lim
          fieldsep
           ,
          field
           exp
            exp
             prefixexp
              lim
            +
            exp
             number
              1
          fieldsep
           ,
          field
           exp
            exp
             prefixexp
              lim
            +
            exp
             number
              5
         }
     stat
      for
      i
      =
      exp
       number
        1
      ,
      exp
       #
       exp
        prefixexp
         t
      do
      block
       stat
        local
        attnamelist
         j
         attrib
        =
        explist
         exp
          prefixexp
           t
           [
           exp
            prefixexp
             i
           ]
       stat
        local
        attnamelist
         co
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            create
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     prefixexp
                      functioncall
                       table
                       .
                       unpack
                       args
                        (
                        explist
                         exp
                          tableconstructor
                           {
                           }
                         ,
                         exp
                          number
                           1
                         ,
                         exp
                          prefixexp
                           j
                        )
                 end
             )
       stat
        local
        attnamelist
         r
         attrib
         ,
         msg
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            coroutine
            .
            resume
            args
             (
             explist
              exp
               prefixexp
                co
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             exp
              prefixexp
               j
             <
             exp
              prefixexp
               lim
            or
            exp
             not
             exp
              prefixexp
               r
          )
      end
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           coroutine
           .
           running
           args
            (
            )
        ==
        exp
         prefixexp
          main
      )
   stat
    functioncall
     print
     args
      string
       "+"
   stat
    functioncall
     print
     args
      string
       "testing yields inside metamethods"
   stat
    local
    function
    val
    funcbody
     (
     parlist
      namelist
       x
     )
     block
      stat
       if
       exp
        exp
         prefixexp
          functioncall
           type
           args
            (
            explist
             exp
              prefixexp
               x
            )
        ==
        exp
         string
          "table"
       then
       block
        retstat
         return
         explist
          exp
           prefixexp
            x
            .
            x
       else
       block
        retstat
         return
         explist
          exp
           prefixexp
            x
       end
     end
   stat
    local
    attnamelist
     mt
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         __eq
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "eq"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                ==
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __lt
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "lt"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                <
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __le
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "le"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 exp
                  prefixexp
                   a
                 -
                 exp
                  prefixexp
                   b
                <=
                exp
                 number
                  0
            end
        fieldsep
         ,
        field
         __add
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "add"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                +
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __sub
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "sub"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                -
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __mul
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "mul"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                *
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __div
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "div"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                /
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __idiv
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "idiv"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                //
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __pow
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "pow"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                ^
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __mod
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "mod"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                %
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __unm
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "unm"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                -
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
            end
        fieldsep
         ,
        field
         __bnot
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "bnot"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                ~
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
            end
        fieldsep
         ,
        field
         __shl
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "shl"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                <<
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __shr
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "shr"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                >>
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __band
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "band"
                )
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                &
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __bor
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "bor"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                |
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __bxor
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "bxor"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                ~
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __concat
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              a
              ,
              b
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "concat"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       a
                    )
                ..
                exp
                 prefixexp
                  functioncall
                   val
                   args
                    (
                    explist
                     exp
                      prefixexp
                       b
                    )
            end
        fieldsep
         ,
        field
         __index
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              t
              ,
              k
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "idx"
                )
             stat
              ;
             retstat
              return
              explist
               exp
                prefixexp
                 t
                 .
                 k
                 [
                 exp
                  prefixexp
                   k
                 ]
            end
        fieldsep
         ,
        field
         __newindex
         =
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              t
              ,
              k
              ,
              v
            )
            block
             stat
              functioncall
               coroutine
               .
               yield
               args
                (
                explist
                 exp
                  nil
                 ,
                 exp
                  string
                   "nidx"
                )
             stat
              ;
             stat
              varlist
               var
                prefixexp
                 t
                 .
                 k
                [
                exp
                 prefixexp
                  k
                ]
              =
              explist
               exp
                prefixexp
                 v
            end
        fieldsep
         ,
       }
   stat
    local
    function
    new
    funcbody
     (
     parlist
      namelist
       x
     )
     block
      retstat
       return
       explist
        exp
         prefixexp
          functioncall
           setmetatable
           args
            (
            explist
             exp
              tableconstructor
               {
               fieldlist
                field
                 x
                 =
                 exp
                  prefixexp
                   x
                fieldsep
                 ,
                field
                 k
                 =
                 exp
                  tableconstructor
                   {
                   }
               }
             ,
             exp
              prefixexp
               mt
            )
     end
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        new
        args
         (
         explist
          exp
           number
            10
         )
   stat
    local
    attnamelist
     b
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        new
        args
         (
         explist
          exp
           number
            12
         )
   stat
    local
    attnamelist
     c
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        new
        args
         string
          "hello"
   stat
    local
    function
    run
    funcbody
     (
     parlist
      namelist
       f
       ,
       t
     )
     block
      stat
       local
       attnamelist
        i
        attrib
       =
       explist
        exp
         number
          1
      stat
       local
       attnamelist
        c
        attrib
       =
       explist
        exp
         prefixexp
          functioncall
           coroutine
           .
           wrap
           args
            (
            explist
             exp
              prefixexp
               f
            )
      stat
       while
       exp
        true
       do
       block
        stat
         local
         attnamelist
          res
          attrib
          ,
          stat
          attrib
         =
         explist
          exp
           prefixexp
            functioncall
             c
             args
              (
              )
        stat
         if
         exp
          prefixexp
           res
         then
         block
          stat
           functioncall
            assert
            args
             (
             explist
              exp
               exp
                prefixexp
                 t
                 [
                 exp
                  prefixexp
                   i
                 ]
               ==
               exp
                prefixexp
                 undef
             )
          stat
           ;
          retstat
           return
           explist
            exp
             prefixexp
              res
            ,
            exp
             prefixexp
              t
         end
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               stat
             ==
             exp
              prefixexp
               t
               [
               exp
                prefixexp
                 i
               ]
           )
        stat
         varlist
          var
           i
         =
         explist
          exp
           exp
            prefixexp
             i
           +
           exp
            number
             1
       end
     end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 stat
                  if
                  exp
                   prefixexp
                    (
                    exp
                     exp
                      prefixexp
                       a
                     >=
                     exp
                      prefixexp
                       b
                    )
                  then
                  block
                   retstat
                    return
                    explist
                     exp
                      string
                       '>='
                  else
                  block
                   retstat
                    return
                    explist
                     exp
                      string
                       '<'
                  end
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "le"
                fieldsep
                 ,
                field
                 exp
                  string
                   "sub"
               }
            )
        ==
        exp
         string
          "<"
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 stat
                  if
                  exp
                   prefixexp
                    (
                    exp
                     exp
                      prefixexp
                       a
                     <=
                     exp
                      prefixexp
                       b
                    )
                  then
                  block
                   retstat
                    return
                    explist
                     exp
                      string
                       '<='
                  else
                  block
                   retstat
                    return
                    explist
                     exp
                      string
                       '>'
                  end
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "le"
                fieldsep
                 ,
                field
                 exp
                  string
                   "sub"
               }
            )
        ==
        exp
         string
          "<="
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 stat
                  if
                  exp
                   prefixexp
                    (
                    exp
                     exp
                      prefixexp
                       a
                     ==
                     exp
                      prefixexp
                       b
                    )
                  then
                  block
                   retstat
                    return
                    explist
                     exp
                      string
                       '=='
                  else
                  block
                   retstat
                    return
                    explist
                     exp
                      string
                       '~='
                  end
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "eq"
               }
            )
        ==
        exp
         string
          "~="
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    &
                    exp
                     exp
                      prefixexp
                       b
                     +
                     exp
                      prefixexp
                       a
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "add"
                fieldsep
                 ,
                field
                 exp
                  string
                   "band"
               }
            )
        ==
        exp
         number
          2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     number
                      1
                    +
                    exp
                     prefixexp
                      a
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "add"
               }
            )
        ==
        exp
         number
          11
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    -
                    exp
                     number
                      25
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "sub"
               }
            )
        ==
        exp
         -
         exp
          number
           15
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     number
                      2
                    *
                    exp
                     prefixexp
                      a
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "mul"
               }
            )
        ==
        exp
         number
          20
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    ^
                    exp
                     number
                      2
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "pow"
               }
            )
        ==
        exp
         number
          100
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    /
                    exp
                     number
                      2
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "div"
               }
            )
        ==
        exp
         number
          5
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    %
                    exp
                     number
                      6
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "mod"
               }
            )
        ==
        exp
         number
          4
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    //
                    exp
                     number
                      3
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "idiv"
               }
            )
        ==
        exp
         number
          3
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    +
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "add"
               }
            )
        ==
        exp
         number
          22
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    -
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "sub"
               }
            )
        ==
        exp
         -
         exp
          number
           2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    *
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "mul"
               }
            )
        ==
        exp
         number
          120
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    ^
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "pow"
               }
            )
        ==
        exp
         exp
          number
           10
         ^
         exp
          number
           12
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    /
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "div"
               }
            )
        ==
        exp
         exp
          number
           10
         /
         exp
          number
           12
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    %
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "mod"
               }
            )
        ==
        exp
         number
          10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    //
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "idiv"
               }
            )
        ==
        exp
         number
          0
      )
   stat
    local
    attnamelist
     a1000
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        new
        args
         (
         explist
          exp
           number
            1000
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a1000
                    +
                    exp
                     number
                      1000
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "add"
               }
            )
        ==
        exp
         number
          2000
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a1000
                    -
                    exp
                     number
                      25000
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "sub"
               }
            )
        ==
        exp
         -
         exp
          number
           24000
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     number
                      2000
                    *
                    exp
                     prefixexp
                      a
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "mul"
               }
            )
        ==
        exp
         number
          20000
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a1000
                    /
                    exp
                     number
                      1000
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "div"
               }
            )
        ==
        exp
         number
          1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a1000
                    %
                    exp
                     number
                      600
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "mod"
               }
            )
        ==
        exp
         number
          400
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a1000
                    //
                    exp
                     number
                      500
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "idiv"
               }
            )
        ==
        exp
         number
          2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    %
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "mod"
               }
            )
        ==
        exp
         number
          10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      ~
                      exp
                       prefixexp
                        a
                     &
                     exp
                      prefixexp
                       b
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "bnot"
                 fieldsep
                  ,
                 field
                  exp
                   string
                    "band"
                }
             )
         ==
         exp
          ~
          exp
           number
            10
        &
        exp
         number
          12
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      prefixexp
                       a
                     |
                     exp
                      prefixexp
                       b
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "bor"
                }
             )
         ==
         exp
          number
           10
        |
        exp
         number
          12
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      prefixexp
                       a
                     ~
                     exp
                      prefixexp
                       b
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "bxor"
                }
             )
         ==
         exp
          number
           10
        ~
        exp
         number
          12
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      prefixexp
                       a
                     <<
                     exp
                      prefixexp
                       b
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "shl"
                }
             )
         ==
         exp
          number
           10
        <<
        exp
         number
          12
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      prefixexp
                       a
                     >>
                     exp
                      prefixexp
                       b
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "shr"
                }
             )
         ==
         exp
          number
           10
        >>
        exp
         number
          12
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      number
                       10
                     &
                     exp
                      prefixexp
                       b
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "band"
                }
             )
         ==
         exp
          number
           10
        &
        exp
         number
          12
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      prefixexp
                       a
                     |
                     exp
                      number
                       2
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "bor"
                }
             )
         ==
         exp
          number
           10
        |
        exp
         number
          2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      prefixexp
                       a
                     ~
                     exp
                      number
                       2
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "bxor"
                }
             )
         ==
         exp
          number
           10
        ~
        exp
         number
          2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      prefixexp
                       a
                     >>
                     exp
                      number
                       2
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "shr"
                }
             )
         ==
         exp
          number
           10
        >>
        exp
         number
          2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      number
                       1
                     >>
                     exp
                      prefixexp
                       a
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "shr"
                }
             )
         ==
         exp
          number
           1
        >>
        exp
         number
          10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      prefixexp
                       a
                     <<
                     exp
                      number
                       2
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "shl"
                }
             )
         ==
         exp
          number
           10
        <<
        exp
         number
          2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      number
                       1
                     <<
                     exp
                      prefixexp
                       a
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "shl"
                }
             )
         ==
         exp
          number
           1
        <<
        exp
         number
          10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            run
            args
             (
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      number
                       2
                     ~
                     exp
                      prefixexp
                       a
                 end
              ,
              exp
               tableconstructor
                {
                fieldlist
                 field
                  exp
                   string
                    "bxor"
                }
             )
         ==
         exp
          number
           2
        ~
        exp
         number
          10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    ..
                    exp
                     prefixexp
                      b
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "concat"
               }
            )
        ==
        exp
         string
          "1012"
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     prefixexp
                      a
                    ..
                    exp
                     exp
                      prefixexp
                       b
                     ..
                     exp
                      exp
                       prefixexp
                        c
                      ..
                      exp
                       prefixexp
                        a
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "concat"
                fieldsep
                 ,
                field
                 exp
                  string
                   "concat"
                fieldsep
                 ,
                field
                 exp
                  string
                   "concat"
               }
            )
        ==
        exp
         string
          "1012hello10"
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     string
                      "a"
                    ..
                    exp
                     exp
                      string
                       "b"
                     ..
                     exp
                      exp
                       prefixexp
                        a
                      ..
                      exp
                       exp
                        string
                         "c"
                       ..
                       exp
                        exp
                         prefixexp
                          c
                        ..
                        exp
                         exp
                          prefixexp
                           b
                         ..
                         exp
                          string
                           "x"
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "concat"
                fieldsep
                 ,
                field
                 exp
                  string
                   "concat"
                fieldsep
                 ,
                field
                 exp
                  string
                   "concat"
               }
            )
        ==
        exp
         string
          "ab10chello12x"
      )
   stat
    do
    block
     stat
      local
      attnamelist
       mt1
       attrib
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           __le
           =
           exp
            functiondef
             function
             funcbody
              (
              parlist
               namelist
                a
                ,
                b
              )
              block
               stat
                functioncall
                 coroutine
                 .
                 yield
                 args
                  (
                  explist
                   exp
                    number
                     10
                  )
               retstat
                return
                explist
                 exp
                  prefixexp
                   (
                   exp
                    exp
                     prefixexp
                      functioncall
                       val
                       args
                        (
                        explist
                         exp
                          prefixexp
                           a
                        )
                    <=
                    exp
                     prefixexp
                      functioncall
                       val
                       args
                        (
                        explist
                         exp
                          prefixexp
                           b
                        )
                   )
              end
          fieldsep
           ,
          field
           __lt
           =
           exp
            functiondef
             function
             funcbody
              (
              parlist
               namelist
                a
                ,
                b
              )
              block
               stat
                functioncall
                 coroutine
                 .
                 yield
                 args
                  (
                  explist
                   exp
                    number
                     10
                  )
               retstat
                return
                explist
                 exp
                  exp
                   prefixexp
                    functioncall
                     val
                     args
                      (
                      explist
                       exp
                        prefixexp
                         a
                      )
                  <
                  exp
                   prefixexp
                    functioncall
                     val
                     args
                      (
                      explist
                       exp
                        prefixexp
                         b
                      )
              end
          fieldsep
           ,
         }
     stat
      local
      attnamelist
       mt2
       attrib
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           __lt
           =
           exp
            prefixexp
             mt1
             .
             __lt
          fieldsep
           ,
          field
           __le
           =
           exp
            prefixexp
             mt1
             .
             __le
         }
     stat
      local
      function
      run
      funcbody
       (
       parlist
        namelist
         f
       )
       block
        stat
         local
         attnamelist
          co
          attrib
         =
         explist
          exp
           prefixexp
            functioncall
             coroutine
             .
             wrap
             args
              (
              explist
               exp
                prefixexp
                 f
              )
        stat
         local
         attnamelist
          res
          attrib
        stat
         repeat
         block
          stat
           varlist
            var
             res
           =
           explist
            exp
             prefixexp
              functioncall
               co
               args
                (
                )
         until
         exp
          exp
           prefixexp
            res
          ~=
          exp
           number
            10
        retstat
         return
         explist
          exp
           prefixexp
            res
       end
     stat
      local
      function
      test
      funcbody
       (
       parlist
       )
       block
        stat
         local
         attnamelist
          a1
          attrib
         =
         explist
          exp
           prefixexp
            functioncall
             setmetatable
             args
              (
              explist
               exp
                tableconstructor
                 {
                 fieldlist
                  field
                   x
                   =
                   exp
                    number
                     1
                 }
               ,
               exp
                prefixexp
                 mt1
              )
        stat
         local
         attnamelist
          a2
          attrib
         =
         explist
          exp
           prefixexp
            functioncall
             setmetatable
             args
              (
              explist
               exp
                tableconstructor
                 {
                 fieldlist
                  field
                   x
                   =
                   exp
                    number
                     2
                 }
               ,
               exp
                prefixexp
                 mt2
              )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               a1
             <
             exp
              prefixexp
               a2
           )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              prefixexp
               a1
             <=
             exp
              prefixexp
               a2
           )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              number
               1
             <
             exp
              prefixexp
               a2
           )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              number
               1
             <=
             exp
              prefixexp
               a2
           )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              number
               2
             >
             exp
              prefixexp
               a1
           )
        stat
         functioncall
          assert
          args
           (
           explist
            exp
             exp
              number
               2
             >=
             exp
              prefixexp
               a2
           )
        retstat
         return
         explist
          exp
           true
       end
     stat
      functioncall
       run
       args
        (
        explist
         exp
          prefixexp
           test
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 stat
                  varlist
                   var
                    prefixexp
                     a
                    .
                    BB
                  =
                  explist
                   exp
                    prefixexp
                     print
                 retstat
                  return
                  explist
                   exp
                    prefixexp
                     a
                     .
                     BB
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "nidx"
                fieldsep
                 ,
                field
                 exp
                  string
                   "idx"
               }
            )
        ==
        exp
         prefixexp
          print
      )
   stat
    do
    block
     stat
      local
      attnamelist
       _ENV
       attrib
      =
      explist
       exp
        prefixexp
         _ENV
     stat
      varlist
       var
        f
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           stat
            varlist
             var
              AAA
            =
            explist
             exp
              exp
               prefixexp
                BBB
              +
              exp
               number
                1
           stat
            ;
           retstat
            return
            explist
             exp
              prefixexp
               AAA
          end
    end
   stat
    local
    attnamelist
     g
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        new
        args
         (
         explist
          exp
           number
            10
         )
   stat
    ;
   stat
    varlist
     var
      prefixexp
       g
       .
       k
      .
      BBB
    =
    explist
     exp
      number
       10
   stat
    ;
   stat
    functioncall
     debug
     .
     setupvalue
     args
      (
      explist
       exp
        prefixexp
         f
       ,
       exp
        number
         1
       ,
       exp
        prefixexp
         g
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              prefixexp
               f
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "idx"
                fieldsep
                 ,
                field
                 exp
                  string
                   "nidx"
                fieldsep
                 ,
                field
                 exp
                  string
                   "idx"
               }
            )
        ==
        exp
         number
          11
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          g
          .
          k
          .
          AAA
        ==
        exp
         number
          11
      )
   stat
    functioncall
     print
     args
      string
       "+"
   stat
    functioncall
     print
     args
      string
       "testing yields inside 'for' iterators"
   stat
    local
    attnamelist
     f
     attrib
    =
    explist
     exp
      functiondef
       function
       funcbody
        (
        parlist
         namelist
          s
          ,
          i
        )
        block
         stat
          if
          exp
           exp
            exp
             prefixexp
              i
            %
            exp
             number
              2
           ==
           exp
            number
             0
          then
          block
           stat
            functioncall
             coroutine
             .
             yield
             args
              (
              explist
               exp
                nil
               ,
               exp
                string
                 "for"
              )
          end
         stat
          if
          exp
           exp
            prefixexp
             i
           <
           exp
            prefixexp
             s
          then
          block
           retstat
            return
            explist
             exp
              exp
               prefixexp
                i
              +
              exp
               number
                1
          end
        end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           run
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 stat
                  local
                  attnamelist
                   s
                   attrib
                  =
                  explist
                   exp
                    number
                     0
                 stat
                  for
                  namelist
                   i
                  in
                  explist
                   exp
                    prefixexp
                     f
                   ,
                   exp
                    number
                     4
                   ,
                   exp
                    number
                     0
                  do
                  block
                   stat
                    varlist
                     var
                      s
                    =
                    explist
                     exp
                      exp
                       prefixexp
                        s
                      +
                      exp
                       prefixexp
                        i
                  end
                 retstat
                  return
                  explist
                   exp
                    prefixexp
                     s
                end
             ,
             exp
              tableconstructor
               {
               fieldlist
                field
                 exp
                  string
                   "for"
                fieldsep
                 ,
                field
                 exp
                  string
                   "for"
                fieldsep
                 ,
                field
                 exp
                  string
                   "for"
               }
            )
        ==
        exp
         number
          10
      )
   stat
    if
    exp
     exp
      prefixexp
       T
     ==
     exp
      nil
    then
    block
     stat
      functioncall
       (
       exp
        exp
         prefixexp
          Message
        or
        exp
         prefixexp
          print
       )
       args
        (
        explist
         exp
          string
           '\n >>> testC not active: skipping coroutine API tests <<<\n'
        )
     stat
      functioncall
       print
       args
        string
         "OK"
     stat
      ;
     retstat
      return
    end
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         'testing coroutine API'
      )
   stat
    local
    function
    apico
    funcbody
     (
     parlist
      ...
     )
     block
      stat
       local
       attnamelist
        x
        attrib
       =
       explist
        exp
         tableconstructor
          {
          fieldlist
           field
            exp
             ...
          }
      retstat
       return
       explist
        exp
         prefixexp
          functioncall
           coroutine
           .
           wrap
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    prefixexp
                     functioncall
                      T
                      .
                      testC
                      args
                       (
                       explist
                        exp
                         prefixexp
                          functioncall
                           table
                           .
                           unpack
                           args
                            (
                            explist
                             exp
                              prefixexp
                               x
                            )
                       )
                end
            )
     end
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          prefixexp
           functioncall
            functioncall
             apico
             args
              (
              explist
               exp
                string
                 [[\n  pushstring errorcode\n  pcallk 1 0 2;\n  invalid command (should not arrive here)\n]]
               ,
               exp
                string
                 [[return *]]
               ,
               exp
                string
                 "stackmark"
               ,
               exp
                prefixexp
                 error
              )
            args
             (
             )
       }
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            exp
             #
             exp
              prefixexp
               a
            ==
            exp
             number
              4
           and
           exp
            exp
             prefixexp
              a
              [
              exp
               number
                3
              ]
            ==
            exp
             string
              "stackmark"
          and
          exp
           exp
            prefixexp
             a
             [
             exp
              number
               4
             ]
           ==
           exp
            string
             "errorcode"
         and
         exp
          exp
           prefixexp
            _G
            .
            status
          ==
          exp
           string
            "ERRRUN"
        and
        exp
         exp
          prefixexp
           _G
           .
           ctx
         ==
         exp
          number
           2
      )
   stat
    local
    attnamelist
     co
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        apico
        args
         (
         explist
          exp
           string
            "pushvalue 2; pushnum 10; pcallk 1 2 3; invalid command;"
          ,
          exp
           prefixexp
            coroutine
            .
            yield
          ,
          exp
           string
            "getglobal status; getglobal ctx; pushvalue 2; pushstring a; pcallk 1 0 4; invalid command"
          ,
          exp
           string
            "getglobal status; getglobal ctx; return *"
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            )
        ==
        exp
         number
          10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            explist
             exp
              number
               20
             ,
             exp
              number
               30
            )
        ==
        exp
         string
          'a'
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          prefixexp
           functioncall
            co
            args
             (
             )
       }
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            exp
             exp
              exp
               exp
                #
                exp
                 prefixexp
                  a
               ==
               exp
                number
                 10
              and
              exp
               exp
                prefixexp
                 a
                 [
                 exp
                  number
                   2
                 ]
               ==
               exp
                prefixexp
                 coroutine
                 .
                 yield
             and
             exp
              exp
               prefixexp
                a
                [
                exp
                 number
                  5
                ]
              ==
              exp
               number
                20
            and
            exp
             exp
              prefixexp
               a
               [
               exp
                number
                 6
               ]
             ==
             exp
              number
               30
           and
           exp
            exp
             prefixexp
              a
              [
              exp
               number
                7
              ]
            ==
            exp
             string
              "YIELD"
          and
          exp
           exp
            prefixexp
             a
             [
             exp
              number
               8
             ]
           ==
           exp
            number
             3
         and
         exp
          exp
           prefixexp
            a
            [
            exp
             number
              9
            ]
          ==
          exp
           string
            "YIELD"
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             10
           ]
         ==
         exp
          number
           4
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               co
            )
      )
   stat
    varlist
     var
      f
    =
    explist
     exp
      prefixexp
       functioncall
        T
        .
        makeCfunc
        args
         (
         explist
          exp
           string
            "pushnum 3; pushnum 5; yield 1;"
         )
   stat
    varlist
     var
      co
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               functioncall
                assert
                args
                 (
                 explist
                  exp
                   exp
                    prefixexp
                     functioncall
                      f
                      args
                       (
                       )
                   ==
                   exp
                    number
                     23
                 )
              stat
               ;
              stat
               functioncall
                assert
                args
                 (
                 explist
                  exp
                   exp
                    prefixexp
                     functioncall
                      f
                      args
                       (
                       )
                   ==
                   exp
                    number
                     23
                 )
              stat
               ;
              retstat
               return
               explist
                exp
                 number
                  10
             end
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            explist
             exp
              number
               23
             ,
             exp
              number
               16
            )
        ==
        exp
         number
          5
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            explist
             exp
              number
               23
             ,
             exp
              number
               16
            )
        ==
        exp
         number
          5
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            explist
             exp
              number
               23
             ,
             exp
              number
               16
            )
        ==
        exp
         number
          10
      )
   stat
    varlist
     var
      f
    =
    explist
     exp
      prefixexp
       functioncall
        T
        .
        makeCfunc
        args
         (
         explist
          exp
           string
            [[\n        pushnum 102\n\tyieldk\t1 U2\n\tcannot be here!\n]]
          ,
          exp
           string
            [[      # continuation\n\tpushvalue U3   # accessing upvalues inside a continuation\n        pushvalue U4\n\treturn *\n]]
          ,
          exp
           number
            23
          ,
          exp
           string
            "huu"
         )
   stat
    varlist
     var
      x
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           prefixexp
            f
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           x
           args
            (
            )
        ==
        exp
         number
          102
      )
   stat
    functioncall
     eqtab
     args
      (
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            prefixexp
             functioncall
              x
              args
               (
               )
         }
       ,
       exp
        tableconstructor
         {
         fieldlist
          field
           exp
            number
             23
          fieldsep
           ,
          field
           exp
            string
             "huu"
         }
      )
   stat
    varlist
     var
      f
    =
    explist
     exp
      prefixexp
       functioncall
        T
        .
        makeCfunc
        args
         string
          [[pushstring 'a'; pushnum 102; yield 2; ]]
   stat
    varlist
     var
      a
     ,
     var
      b
     ,
     var
      c
     ,
     var
      d
    =
    explist
     exp
      prefixexp
       functioncall
        T
        .
        testC
        args
         (
         explist
          exp
           string
            [[newthread; pushvalue 2; xmove 0 3 1; resume 3 0;\n                       pushstatus; xmove 3 0 0;  resume 3 0; pushstatus;\n                       return 4; ]]
          ,
          exp
           prefixexp
            f
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            prefixexp
             a
           ==
           exp
            string
             'YIELD'
          and
          exp
           exp
            prefixexp
             b
           ==
           exp
            string
             'a'
         and
         exp
          exp
           prefixexp
            c
          ==
          exp
           number
            102
        and
        exp
         exp
          prefixexp
           d
         ==
         exp
          string
           'OK'
      )
   stat
    local
    attnamelist
     count
     attrib
    =
    explist
     exp
      number
       3
   stat
    varlist
     var
      f
    =
    explist
     exp
      prefixexp
       functioncall
        T
        .
        makeCfunc
        args
         (
         explist
          exp
           string
            [[\n  remove 1;             # remove argument\n  pushvalue U3;         # get selection function\n  call 0 1;             # call it  (result is 'f' or 'yield')\n  pushstring hello      # single argument for selected function\n  pushupvalueindex 2;   # index of continuation program\n  callk 1 -1 .;\t\t# call selected function\n  errorerror\t\t# should never arrive here\n]]
          ,
          exp
           string
            [[\n  # continuation program\n  pushnum 34\t# return value\n  return *     # return all results\n]]
          ,
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               varlist
                var
                 count
               =
               explist
                exp
                 exp
                  prefixexp
                   count
                 -
                 exp
                  number
                   1
              stat
               if
               exp
                exp
                 prefixexp
                  count
                ==
                exp
                 number
                  0
               then
               block
                retstat
                 return
                 explist
                  exp
                   prefixexp
                    coroutine
                    .
                    yield
               else
               block
                retstat
                 return
                 explist
                  exp
                   prefixexp
                    f
               end
             end
         )
   stat
    varlist
     var
      co
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              retstat
               return
               explist
                exp
                 prefixexp
                  functioncall
                   f
                   args
                    (
                    explist
                     exp
                      nil
                    )
             end
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           co
           args
            (
            )
        ==
        exp
         string
          "hello"
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          prefixexp
           functioncall
            co
            args
             (
             )
       }
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            #
            exp
             prefixexp
              a
           ==
           exp
            number
             3
          and
          exp
           exp
            prefixexp
             a
             [
             exp
              number
               1
             ]
           ==
           exp
            prefixexp
             a
             [
             exp
              number
               2
             ]
         and
         exp
          exp
           prefixexp
            a
            [
            exp
             number
              2
            ]
          ==
          exp
           prefixexp
            a
            [
            exp
             number
              3
            ]
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             3
           ]
         ==
         exp
          number
           34
      )
   stat
    local
    attnamelist
     y
     attrib
   stat
    varlist
     var
      co
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
              ...
             )
             block
              retstat
               return
               explist
                exp
                 prefixexp
                  functioncall
                   T
                   .
                   testC
                   args
                    (
                    explist
                     exp
                      string
                       [[ # initial function\n          yieldk 1 2\n          cannot be here!\n       ]]
                     ,
                     exp
                      string
                       [[  # 1st continuation\n         yieldk 0 3 \n         cannot be here!\n       ]]
                     ,
                     exp
                      string
                       [[  # 2nd continuation\n         yieldk 0 4 \n         cannot be here!\n       ]]
                     ,
                     exp
                      string
                       [[  # 3th continuation\n          pushvalue 6   # function which is last arg. to 'testC' here\n          pushnum 10; pushnum 20;\n          pcall 2 0 0   # call should throw an error and return to next line\n          pop 1\t\t# remove error message\n          pushvalue 6\n          getglobal status; getglobal ctx\n          pcallk 2 2 5  # call should throw an error and jump to continuation\n          cannot be here!\n       ]]
                     ,
                     exp
                      string
                       [[  # 4th (and last) continuation\n         return *\n       ]]
                     ,
                     exp
                      functiondef
                       function
                       funcbody
                        (
                        parlist
                         namelist
                          a
                          ,
                          b
                        )
                        block
                         stat
                          varlist
                           var
                            x
                          =
                          explist
                           exp
                            prefixexp
                             a
                         stat
                          ;
                         stat
                          varlist
                           var
                            y
                          =
                          explist
                           exp
                            prefixexp
                             b
                         stat
                          ;
                         stat
                          functioncall
                           error
                           args
                            (
                            explist
                             exp
                              string
                               "errmsg"
                            )
                        end
                     ,
                     exp
                      ...
                    )
             end
         )
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          prefixexp
           functioncall
            co
            args
             (
             explist
              exp
               number
                3
              ,
              exp
               number
                4
              ,
              exp
               number
                6
             )
       }
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             1
           ]
         ==
         exp
          number
           6
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             2
           ]
         ==
         exp
          prefixexp
           undef
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          prefixexp
           functioncall
            co
            args
             (
             )
       }
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            a
            [
            exp
             number
              1
            ]
          ==
          exp
           prefixexp
            undef
         and
         exp
          exp
           prefixexp
            _G
            .
            status
          ==
          exp
           string
            "YIELD"
        and
        exp
         exp
          prefixexp
           _G
           .
           ctx
         ==
         exp
          number
           2
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          prefixexp
           functioncall
            co
            args
             (
             )
       }
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            a
            [
            exp
             number
              1
            ]
          ==
          exp
           prefixexp
            undef
         and
         exp
          exp
           prefixexp
            _G
            .
            status
          ==
          exp
           string
            "YIELD"
        and
        exp
         exp
          prefixexp
           _G
           .
           ctx
         ==
         exp
          number
           3
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          prefixexp
           functioncall
            co
            args
             (
             explist
              exp
               number
                7
              ,
              exp
               number
                8
             )
       }
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            exp
             exp
              prefixexp
               functioncall
                type
                args
                 (
                 explist
                  exp
                   prefixexp
                    a
                    [
                    exp
                     number
                      1
                    ]
                 )
             ==
             exp
              string
               'string'
            and
            exp
             exp
              prefixexp
               functioncall
                type
                args
                 (
                 explist
                  exp
                   prefixexp
                    a
                    [
                    exp
                     number
                      2
                    ]
                 )
             ==
             exp
              string
               'string'
           and
           exp
            exp
             prefixexp
              functioncall
               type
               args
                (
                explist
                 exp
                  prefixexp
                   a
                   [
                   exp
                    number
                     3
                   ]
                )
            ==
            exp
             string
              'string'
          and
          exp
           exp
            prefixexp
             functioncall
              type
              args
               (
               explist
                exp
                 prefixexp
                  a
                  [
                  exp
                   number
                    4
                  ]
               )
           ==
           exp
            string
             'string'
         and
         exp
          exp
           prefixexp
            functioncall
             type
             args
              (
              explist
               exp
                prefixexp
                 a
                 [
                 exp
                  number
                   5
                 ]
              )
          ==
          exp
           string
            'string'
        and
        exp
         exp
          prefixexp
           functioncall
            type
            args
             (
             explist
              exp
               prefixexp
                a
                [
                exp
                 number
                  6
                ]
             )
         ==
         exp
          string
           'function'
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             7
           ]
         ==
         exp
          number
           3
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             8
           ]
         ==
         exp
          number
           4
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             9
           ]
         ==
         exp
          number
           7
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             10
           ]
         ==
         exp
          number
           8
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             11
           ]
           :
           find
           args
            (
            explist
             exp
              string
               "errmsg"
            )
        and
        exp
         exp
          #
          exp
           prefixexp
            a
         ==
         exp
          number
           11
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           x
         ==
         exp
          string
           "YIELD"
        and
        exp
         exp
          prefixexp
           y
         ==
         exp
          number
           4
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               co
            )
      )
   stat
    varlist
     var
      prefixexp
       _G
      .
      ctx
    =
    explist
     exp
      nil
   stat
    varlist
     var
      prefixexp
       _G
      .
      status
    =
    explist
     exp
      nil
   stat
    local
    attnamelist
     co
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        coroutine
        .
        wrap
        args
         (
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
             )
             block
              stat
               local
               attnamelist
                a
                attrib
               =
               explist
                exp
                 tableconstructor
                  {
                  fieldlist
                   field
                    exp
                     prefixexp
                      functioncall
                       pcall
                       args
                        (
                        explist
                         exp
                          prefixexp
                           pcall
                         ,
                         exp
                          prefixexp
                           pcall
                         ,
                         exp
                          prefixexp
                           pcall
                         ,
                         exp
                          prefixexp
                           pcall
                         ,
                         exp
                          prefixexp
                           pcall
                         ,
                         exp
                          prefixexp
                           pcall
                         ,
                         exp
                          prefixexp
                           pcall
                         ,
                         exp
                          prefixexp
                           error
                         ,
                         exp
                          string
                           "hi"
                        )
                  }
              retstat
               return
               explist
                exp
                 prefixexp
                  functioncall
                   pcall
                   args
                    (
                    explist
                     exp
                      prefixexp
                       assert
                     ,
                     exp
                      prefixexp
                       functioncall
                        table
                        .
                        unpack
                        args
                         (
                         explist
                          exp
                           prefixexp
                            a
                         )
                    )
             end
         )
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          prefixexp
           functioncall
            co
            args
             (
             )
       }
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
          [
          exp
           number
            10
          ]
        ==
        exp
         string
          "hi"
      )
   stat
    functioncall
     print
     args
      string
       'OK'
 <EOF>
