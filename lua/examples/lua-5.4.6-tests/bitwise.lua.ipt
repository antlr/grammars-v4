start_
 chunk
  block
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         "testing bitwise operations"
      )
   stat
    functioncall
     require
     args
      string
       "bwcoercion"
   stat
    local
    attnamelist
     numbits
     attrib
    =
    explist
     exp
      exp
       prefixexp
        functioncall
         string
         .
         packsize
         args
          (
          explist
           exp
            string
             'j'
          )
      *
      exp
       number
        8
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         ~
         exp
          number
           0
        ==
        exp
         -
         exp
          number
           1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          (
          exp
           exp
            number
             1
           <<
           exp
            prefixexp
             (
             exp
              exp
               prefixexp
                numbits
              -
              exp
               number
                1
             )
          )
        ==
        exp
         prefixexp
          math
          .
          mininteger
      )
   stat
    local
    attnamelist
     a
     attrib
     ,
     b
     attrib
     ,
     c
     attrib
     ,
     d
     attrib
   stat
    varlist
     var
      a
    =
    explist
     exp
      number
       0xFFFFFFFFFFFFFFFF
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            prefixexp
             a
           ==
           exp
            -
            exp
             number
              1
          and
          exp
           prefixexp
            a
         &
         exp
          exp
           exp
            -
            exp
             number
              1
           ==
           exp
            prefixexp
             a
          and
          exp
           prefixexp
            a
        &
        exp
         exp
          number
           35
         ==
         exp
          number
           35
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      number
       0xF0F0F0F0F0F0F0F0
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
        |
        exp
         exp
          -
          exp
           number
            1
         ==
         exp
          -
          exp
           number
            1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            a
          ~
          exp
           exp
            exp
             prefixexp
              a
            ==
            exp
             number
              0
           and
           exp
            prefixexp
             a
         ~
         exp
          exp
           exp
            number
             0
           ==
           exp
            prefixexp
             a
          and
          exp
           prefixexp
            a
        ~
        exp
         exp
          ~
          exp
           prefixexp
            a
         ==
         exp
          -
          exp
           number
            1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
        >>
        exp
         exp
          number
           4
         ==
         exp
          ~
          exp
           prefixexp
            a
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      number
       0xF0
   stat
    ;
   stat
    varlist
     var
      b
    =
    explist
     exp
      number
       0xCC
   stat
    ;
   stat
    varlist
     var
      c
    =
    explist
     exp
      number
       0xAA
   stat
    ;
   stat
    varlist
     var
      d
    =
    explist
     exp
      number
       0xFD
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            a
          |
          exp
           prefixexp
            b
         ~
         exp
          prefixexp
           c
        &
        exp
         exp
          prefixexp
           d
         ==
         exp
          number
           0xF4
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      number
       0xF0.0
   stat
    ;
   stat
    varlist
     var
      b
    =
    explist
     exp
      number
       0xCC.0
   stat
    ;
   stat
    varlist
     var
      c
    =
    explist
     exp
      string
       "0xAA.0"
   stat
    ;
   stat
    varlist
     var
      d
    =
    explist
     exp
      string
       "0xFD.0"
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            a
          |
          exp
           prefixexp
            b
         ~
         exp
          prefixexp
           c
        &
        exp
         exp
          prefixexp
           d
         ==
         exp
          number
           0xF4
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      number
       0xF0000000
   stat
    ;
   stat
    varlist
     var
      b
    =
    explist
     exp
      number
       0xCC000000
   stat
    ;
   stat
    varlist
     var
      c
    =
    explist
     exp
      number
       0xAA000000
   stat
    ;
   stat
    varlist
     var
      d
    =
    explist
     exp
      number
       0xFD000000
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           prefixexp
            a
          |
          exp
           prefixexp
            b
         ~
         exp
          prefixexp
           c
        &
        exp
         exp
          prefixexp
           d
         ==
         exp
          number
           0xF4000000
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           ~
           exp
            ~
            exp
             prefixexp
              a
          ==
          exp
           prefixexp
            a
         and
         exp
          exp
           ~
           exp
            prefixexp
             a
          ==
          exp
           -
           exp
            number
             1
        ~
        exp
         exp
          prefixexp
           a
         and
         exp
          exp
           -
           exp
            prefixexp
             d
          ==
          exp
           exp
            ~
            exp
             prefixexp
              d
           +
           exp
            number
             1
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      exp
       prefixexp
        a
      <<
      exp
       number
        32
   stat
    varlist
     var
      b
    =
    explist
     exp
      exp
       prefixexp
        b
      <<
      exp
       number
        32
   stat
    varlist
     var
      c
    =
    explist
     exp
      exp
       prefixexp
        c
      <<
      exp
       number
        32
   stat
    varlist
     var
      d
    =
    explist
     exp
      exp
       prefixexp
        d
      <<
      exp
       number
        32
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            prefixexp
             a
           |
           exp
            prefixexp
             b
          ~
          exp
           prefixexp
            c
         &
         exp
          exp
           prefixexp
            d
          ==
          exp
           number
            0xF4000000
        <<
        exp
         number
          32
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           ~
           exp
            ~
            exp
             prefixexp
              a
          ==
          exp
           prefixexp
            a
         and
         exp
          exp
           ~
           exp
            prefixexp
             a
          ==
          exp
           -
           exp
            number
             1
        ~
        exp
         exp
          prefixexp
           a
         and
         exp
          exp
           -
           exp
            prefixexp
             d
          ==
          exp
           exp
            ~
            exp
             prefixexp
              d
           +
           exp
            number
             1
      )
   stat
    do
    block
     stat
      local
      attnamelist
       code
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          string
          .
          format
          args
           (
           explist
            exp
             string
              "return -1 >> %d"
            ,
            exp
             prefixexp
              math
              .
              maxinteger
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             functioncall
              load
              args
               (
               explist
                exp
                 prefixexp
                  code
               )
             args
              (
              )
          ==
          exp
           number
            0
        )
     stat
      local
      attnamelist
       code
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          string
          .
          format
          args
           (
           explist
            exp
             string
              "return -1 >> %d"
            ,
            exp
             prefixexp
              math
              .
              mininteger
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             functioncall
              load
              args
               (
               explist
                exp
                 prefixexp
                  code
               )
             args
              (
              )
          ==
          exp
           number
            0
        )
     stat
      local
      attnamelist
       code
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          string
          .
          format
          args
           (
           explist
            exp
             string
              "return -1 << %d"
            ,
            exp
             prefixexp
              math
              .
              maxinteger
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             functioncall
              load
              args
               (
               explist
                exp
                 prefixexp
                  code
               )
             args
              (
              )
          ==
          exp
           number
            0
        )
     stat
      local
      attnamelist
       code
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          string
          .
          format
          args
           (
           explist
            exp
             string
              "return -1 << %d"
            ,
            exp
             prefixexp
              math
              .
              mininteger
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             functioncall
              load
              args
               (
               explist
                exp
                 prefixexp
                  code
               )
             args
              (
              )
          ==
          exp
           number
            0
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          -
          exp
           number
            1
         >>
         exp
          exp
           exp
            number
             1
           ==
           exp
            exp
             prefixexp
              (
              exp
               exp
                number
                 1
               <<
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    numbits
                  -
                  exp
                   number
                    1
                 )
              )
            -
            exp
             number
              1
          and
          exp
           number
            1
        <<
        exp
         exp
          number
           31
         ==
         exp
          number
           0x80000000
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         -
         exp
          number
           1
        >>
        exp
         exp
          prefixexp
           (
           exp
            exp
             prefixexp
              numbits
            -
            exp
             number
              1
           )
         ==
         exp
          number
           1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            -
            exp
             number
              1
           >>
           exp
            exp
             exp
              prefixexp
               numbits
             ==
             exp
              number
               0
            and
            exp
             -
             exp
              number
               1
          >>
          exp
           exp
            exp
             -
             exp
              prefixexp
               numbits
            ==
            exp
             number
              0
           and
           exp
            -
            exp
             number
              1
         <<
         exp
          exp
           exp
            prefixexp
             numbits
           ==
           exp
            number
             0
          and
          exp
           -
           exp
            number
             1
        <<
        exp
         exp
          -
          exp
           prefixexp
            numbits
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          1
        >>
        exp
         exp
          prefixexp
           math
           .
           mininteger
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          1
        >>
        exp
         exp
          prefixexp
           math
           .
           maxinteger
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          1
        <<
        exp
         exp
          prefixexp
           math
           .
           mininteger
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          1
        <<
        exp
         exp
          prefixexp
           math
           .
           maxinteger
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          (
          exp
           exp
            exp
             number
              2
            ^
            exp
             number
              30
           -
           exp
            number
             1
          )
        <<
        exp
         exp
          exp
           number
            2
          ^
          exp
           number
            30
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          (
          exp
           exp
            exp
             number
              2
            ^
            exp
             number
              30
           -
           exp
            number
             1
          )
        >>
        exp
         exp
          exp
           number
            2
          ^
          exp
           number
            30
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            number
             1
           >>
           exp
            exp
             -
             exp
              number
               3
            ==
            exp
             number
              1
          <<
          exp
           exp
            number
             3
           and
           exp
            number
             1000
         >>
         exp
          exp
           number
            5
          ==
          exp
           number
            1000
        <<
        exp
         -
         exp
          number
           5
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         string
          "0xffffffffffffffff"
        |
        exp
         exp
          number
           0
         ==
         exp
          -
          exp
           number
            1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         string
          "0xfffffffffffffffe"
        &
        exp
         exp
          string
           "-1"
         ==
         exp
          -
          exp
           number
            2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         string
          " \t-0xfffffffffffffffe\n\t"
        &
        exp
         exp
          string
           "-1"
         ==
         exp
          number
           2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         string
          "   \n  -45  \t "
        >>
        exp
         exp
          string
           "  -2  "
         ==
         exp
          exp
           -
           exp
            number
             45
          *
          exp
           number
            4
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         string
          "1234.0"
        <<
        exp
         exp
          string
           "5.0"
         ==
         exp
          exp
           number
            1234
          *
          exp
           number
            32
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         string
          "0xffff.0"
        ~
        exp
         exp
          string
           "0xAAAA"
         ==
         exp
          number
           0x5555
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         ~
         exp
          string
           "0x0.000p4"
        ==
        exp
         -
         exp
          number
           1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          (
          exp
           exp
            string
             "7"
           ..
           exp
            number
             3
          )
        <<
        exp
         exp
          number
           1
         ==
         exp
          number
           146
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0xffffffff
        >>
        exp
         exp
          prefixexp
           (
           exp
            exp
             number
              1
            ..
            exp
             string
              "9"
           )
         ==
         exp
          number
           0x1fff
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          10
        |
        exp
         exp
          prefixexp
           (
           exp
            exp
             number
              1
            ..
            exp
             string
              "9"
           )
         ==
         exp
          number
           27
      )
   stat
    do
    block
     stat
      local
      attnamelist
       st
       attrib
       ,
       msg
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          pcall
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                retstat
                 return
                 explist
                  exp
                   exp
                    number
                     4
                   &
                   exp
                    string
                     "a"
               end
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          prefixexp
           functioncall
            string
            .
            find
            args
             (
             explist
              exp
               prefixexp
                msg
              ,
              exp
               string
                "'band'"
             )
        )
     stat
      local
      attnamelist
       st
       attrib
       ,
       msg
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          pcall
          args
           (
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                retstat
                 return
                 explist
                  exp
                   ~
                   exp
                    string
                     "a"
               end
           )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          prefixexp
           functioncall
            string
            .
            find
            args
             (
             explist
              exp
               prefixexp
                msg
              ,
              exp
               string
                "'bnot'"
             )
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     string
                      "0xffffffffffffffff.0"
                    |
                    exp
                     number
                      0
                end
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    exp
                     string
                      "0xffffffffffffffff\0"
                    |
                    exp
                     number
                      0
                end
            )
      )
   stat
    functioncall
     print
     args
      string
       '+'
   stat
    varlist
     var
      prefixexp
       package
       .
       preload
      .
      bit32
    =
    explist
     exp
      functiondef
       function
       funcbody
        (
        parlist
        )
        block
         stat
          local
          attnamelist
           bit
           attrib
          =
          explist
           exp
            tableconstructor
             {
             }
         stat
          function
          funcname
           bit
           .
           bnot
          funcbody
           (
           parlist
            namelist
             a
           )
           block
            retstat
             return
             explist
              exp
               exp
                ~
                exp
                 prefixexp
                  a
               &
               exp
                number
                 0xFFFFFFFF
           end
         stat
          function
          funcname
           bit
           .
           band
          funcbody
           (
           parlist
            namelist
             x
             ,
             y
             ,
             z
            ,
            ...
           )
           block
            stat
             if
             exp
              not
              exp
               prefixexp
                z
             then
             block
              retstat
               return
               explist
                exp
                 exp
                  prefixexp
                   (
                   exp
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         x
                       or
                       exp
                        -
                        exp
                         number
                          1
                      )
                    &
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         y
                       or
                       exp
                        -
                        exp
                         number
                          1
                      )
                   )
                 &
                 exp
                  number
                   0xFFFFFFFF
             else
             block
              stat
               local
               attnamelist
                arg
                attrib
               =
               explist
                exp
                 tableconstructor
                  {
                  fieldlist
                   field
                    exp
                     ...
                  }
              stat
               local
               attnamelist
                res
                attrib
               =
               explist
                exp
                 exp
                  exp
                   prefixexp
                    x
                  &
                  exp
                   prefixexp
                    y
                 &
                 exp
                  prefixexp
                   z
              stat
               for
               i
               =
               exp
                number
                 1
               ,
               exp
                #
                exp
                 prefixexp
                  arg
               do
               block
                stat
                 varlist
                  var
                   res
                 =
                 explist
                  exp
                   exp
                    prefixexp
                     res
                   &
                   exp
                    prefixexp
                     arg
                     [
                     exp
                      prefixexp
                       i
                     ]
               end
              retstat
               return
               explist
                exp
                 exp
                  prefixexp
                   res
                 &
                 exp
                  number
                   0xFFFFFFFF
             end
           end
         stat
          function
          funcname
           bit
           .
           bor
          funcbody
           (
           parlist
            namelist
             x
             ,
             y
             ,
             z
            ,
            ...
           )
           block
            stat
             if
             exp
              not
              exp
               prefixexp
                z
             then
             block
              retstat
               return
               explist
                exp
                 exp
                  prefixexp
                   (
                   exp
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         x
                       or
                       exp
                        number
                         0
                      )
                    |
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         y
                       or
                       exp
                        number
                         0
                      )
                   )
                 &
                 exp
                  number
                   0xFFFFFFFF
             else
             block
              stat
               local
               attnamelist
                arg
                attrib
               =
               explist
                exp
                 tableconstructor
                  {
                  fieldlist
                   field
                    exp
                     ...
                  }
              stat
               local
               attnamelist
                res
                attrib
               =
               explist
                exp
                 exp
                  exp
                   prefixexp
                    x
                  |
                  exp
                   prefixexp
                    y
                 |
                 exp
                  prefixexp
                   z
              stat
               for
               i
               =
               exp
                number
                 1
               ,
               exp
                #
                exp
                 prefixexp
                  arg
               do
               block
                stat
                 varlist
                  var
                   res
                 =
                 explist
                  exp
                   exp
                    prefixexp
                     res
                   |
                   exp
                    prefixexp
                     arg
                     [
                     exp
                      prefixexp
                       i
                     ]
               end
              retstat
               return
               explist
                exp
                 exp
                  prefixexp
                   res
                 &
                 exp
                  number
                   0xFFFFFFFF
             end
           end
         stat
          function
          funcname
           bit
           .
           bxor
          funcbody
           (
           parlist
            namelist
             x
             ,
             y
             ,
             z
            ,
            ...
           )
           block
            stat
             if
             exp
              not
              exp
               prefixexp
                z
             then
             block
              retstat
               return
               explist
                exp
                 exp
                  prefixexp
                   (
                   exp
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         x
                       or
                       exp
                        number
                         0
                      )
                    ~
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         y
                       or
                       exp
                        number
                         0
                      )
                   )
                 &
                 exp
                  number
                   0xFFFFFFFF
             else
             block
              stat
               local
               attnamelist
                arg
                attrib
               =
               explist
                exp
                 tableconstructor
                  {
                  fieldlist
                   field
                    exp
                     ...
                  }
              stat
               local
               attnamelist
                res
                attrib
               =
               explist
                exp
                 exp
                  exp
                   prefixexp
                    x
                  ~
                  exp
                   prefixexp
                    y
                 ~
                 exp
                  prefixexp
                   z
              stat
               for
               i
               =
               exp
                number
                 1
               ,
               exp
                #
                exp
                 prefixexp
                  arg
               do
               block
                stat
                 varlist
                  var
                   res
                 =
                 explist
                  exp
                   exp
                    prefixexp
                     res
                   ~
                   exp
                    prefixexp
                     arg
                     [
                     exp
                      prefixexp
                       i
                     ]
               end
              retstat
               return
               explist
                exp
                 exp
                  prefixexp
                   res
                 &
                 exp
                  number
                   0xFFFFFFFF
             end
           end
         stat
          function
          funcname
           bit
           .
           btest
          funcbody
           (
           parlist
            ...
           )
           block
            retstat
             return
             explist
              exp
               exp
                prefixexp
                 functioncall
                  bit
                  .
                  band
                  args
                   (
                   explist
                    exp
                     ...
                   )
               ~=
               exp
                number
                 0
           end
         stat
          function
          funcname
           bit
           .
           lshift
          funcbody
           (
           parlist
            namelist
             a
             ,
             b
           )
           block
            retstat
             return
             explist
              exp
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    (
                    exp
                     exp
                      prefixexp
                       a
                     &
                     exp
                      number
                       0xFFFFFFFF
                    )
                  <<
                  exp
                   prefixexp
                    b
                 )
               &
               exp
                number
                 0xFFFFFFFF
           end
         stat
          function
          funcname
           bit
           .
           rshift
          funcbody
           (
           parlist
            namelist
             a
             ,
             b
           )
           block
            retstat
             return
             explist
              exp
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    (
                    exp
                     exp
                      prefixexp
                       a
                     &
                     exp
                      number
                       0xFFFFFFFF
                    )
                  >>
                  exp
                   prefixexp
                    b
                 )
               &
               exp
                number
                 0xFFFFFFFF
           end
         stat
          function
          funcname
           bit
           .
           arshift
          funcbody
           (
           parlist
            namelist
             a
             ,
             b
           )
           block
            stat
             varlist
              var
               a
             =
             explist
              exp
               exp
                prefixexp
                 a
               &
               exp
                number
                 0xFFFFFFFF
            stat
             if
             exp
              exp
               exp
                prefixexp
                 b
               <=
               exp
                number
                 0
              or
              exp
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    a
                  &
                  exp
                   number
                    0x80000000
                 )
               ==
               exp
                number
                 0
             then
             block
              retstat
               return
               explist
                exp
                 exp
                  prefixexp
                   (
                   exp
                    exp
                     prefixexp
                      a
                    >>
                    exp
                     prefixexp
                      b
                   )
                 &
                 exp
                  number
                   0xFFFFFFFF
             else
             block
              retstat
               return
               explist
                exp
                 exp
                  prefixexp
                   (
                   exp
                    exp
                     prefixexp
                      (
                      exp
                       exp
                        prefixexp
                         a
                       >>
                       exp
                        prefixexp
                         b
                      )
                    |
                    exp
                     ~
                     exp
                      prefixexp
                       (
                       exp
                        exp
                         number
                          0xFFFFFFFF
                        >>
                        exp
                         prefixexp
                          b
                       )
                   )
                 &
                 exp
                  number
                   0xFFFFFFFF
             end
           end
         stat
          function
          funcname
           bit
           .
           lrotate
          funcbody
           (
           parlist
            namelist
             a
             ,
             b
           )
           block
            stat
             varlist
              var
               b
             =
             explist
              exp
               exp
                prefixexp
                 b
               &
               exp
                number
                 31
            stat
             varlist
              var
               a
             =
             explist
              exp
               exp
                prefixexp
                 a
               &
               exp
                number
                 0xFFFFFFFF
            stat
             varlist
              var
               a
             =
             explist
              exp
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    a
                  <<
                  exp
                   prefixexp
                    b
                 )
               |
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    a
                  >>
                  exp
                   prefixexp
                    (
                    exp
                     exp
                      number
                       32
                     -
                     exp
                      prefixexp
                       b
                    )
                 )
            retstat
             return
             explist
              exp
               exp
                prefixexp
                 a
               &
               exp
                number
                 0xFFFFFFFF
           end
         stat
          function
          funcname
           bit
           .
           rrotate
          funcbody
           (
           parlist
            namelist
             a
             ,
             b
           )
           block
            retstat
             return
             explist
              exp
               prefixexp
                functioncall
                 bit
                 .
                 lrotate
                 args
                  (
                  explist
                   exp
                    prefixexp
                     a
                   ,
                   exp
                    -
                    exp
                     prefixexp
                      b
                  )
           end
         stat
          local
          function
          checkfield
          funcbody
           (
           parlist
            namelist
             f
             ,
             w
           )
           block
            stat
             varlist
              var
               w
             =
             explist
              exp
               exp
                prefixexp
                 w
               or
               exp
                number
                 1
            stat
             functioncall
              assert
              args
               (
               explist
                exp
                 exp
                  prefixexp
                   f
                 >=
                 exp
                  number
                   0
                ,
                exp
                 string
                  "field cannot be negative"
               )
            stat
             functioncall
              assert
              args
               (
               explist
                exp
                 exp
                  prefixexp
                   w
                 >
                 exp
                  number
                   0
                ,
                exp
                 string
                  "width must be positive"
               )
            stat
             functioncall
              assert
              args
               (
               explist
                exp
                 exp
                  exp
                   prefixexp
                    f
                  +
                  exp
                   prefixexp
                    w
                 <=
                 exp
                  number
                   32
                ,
                exp
                 string
                  "trying to access non-existent bits"
               )
            retstat
             return
             explist
              exp
               prefixexp
                f
              ,
              exp
               ~
               exp
                prefixexp
                 (
                 exp
                  exp
                   -
                   exp
                    number
                     1
                  <<
                  exp
                   prefixexp
                    w
                 )
           end
         stat
          function
          funcname
           bit
           .
           extract
          funcbody
           (
           parlist
            namelist
             a
             ,
             f
             ,
             w
           )
           block
            stat
             local
             attnamelist
              f
              attrib
              ,
              mask
              attrib
             =
             explist
              exp
               prefixexp
                functioncall
                 checkfield
                 args
                  (
                  explist
                   exp
                    prefixexp
                     f
                   ,
                   exp
                    prefixexp
                     w
                  )
            retstat
             return
             explist
              exp
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    a
                  >>
                  exp
                   prefixexp
                    f
                 )
               &
               exp
                prefixexp
                 mask
           end
         stat
          function
          funcname
           bit
           .
           replace
          funcbody
           (
           parlist
            namelist
             a
             ,
             v
             ,
             f
             ,
             w
           )
           block
            stat
             local
             attnamelist
              f
              attrib
              ,
              mask
              attrib
             =
             explist
              exp
               prefixexp
                functioncall
                 checkfield
                 args
                  (
                  explist
                   exp
                    prefixexp
                     f
                   ,
                   exp
                    prefixexp
                     w
                  )
            stat
             varlist
              var
               v
             =
             explist
              exp
               exp
                prefixexp
                 v
               &
               exp
                prefixexp
                 mask
            stat
             varlist
              var
               a
             =
             explist
              exp
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    a
                  &
                  exp
                   ~
                   exp
                    prefixexp
                     (
                     exp
                      exp
                       prefixexp
                        mask
                      <<
                      exp
                       prefixexp
                        f
                     )
                 )
               |
               exp
                prefixexp
                 (
                 exp
                  exp
                   prefixexp
                    v
                  <<
                  exp
                   prefixexp
                    f
                 )
            retstat
             return
             explist
              exp
               exp
                prefixexp
                 a
               &
               exp
                number
                 0xFFFFFFFF
           end
         retstat
          return
          explist
           exp
            prefixexp
             bit
        end
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         "testing bitwise library"
      )
   stat
    local
    attnamelist
     bit32
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        require
        args
         string
          'bit32'
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            )
        ==
        exp
         prefixexp
          functioncall
           bit32
           .
           bnot
           args
            (
            explist
             exp
              number
               0
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           btest
           args
            (
            )
        ==
        exp
         true
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           bor
           args
            (
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           bxor
           args
            (
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            )
        ==
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              number
               0xffffffff
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              number
               1
             ,
             exp
              number
               2
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              -
              exp
               number
                1
            )
        ==
        exp
         number
          0xffffffff
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              exp
               prefixexp
                (
                exp
                 exp
                  number
                   1
                 <<
                 exp
                  number
                   33
                )
              -
              exp
               number
                1
            )
        ==
        exp
         number
          0xffffffff
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              exp
               -
               exp
                prefixexp
                 (
                 exp
                  exp
                   number
                    1
                  <<
                  exp
                   number
                    33
                 )
              -
              exp
               number
                1
            )
        ==
        exp
         number
          0xffffffff
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              exp
               prefixexp
                (
                exp
                 exp
                  number
                   1
                 <<
                 exp
                  number
                   33
                )
              +
              exp
               number
                1
            )
        ==
        exp
         number
          1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              exp
               -
               exp
                prefixexp
                 (
                 exp
                  exp
                   number
                    1
                  <<
                  exp
                   number
                    33
                 )
              +
              exp
               number
                1
            )
        ==
        exp
         number
          1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              -
              exp
               prefixexp
                (
                exp
                 exp
                  number
                   1
                 <<
                 exp
                  number
                   40
                )
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              exp
               number
                1
              <<
              exp
               number
                40
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              exp
               -
               exp
                prefixexp
                 (
                 exp
                  exp
                   number
                    1
                  <<
                  exp
                   number
                    40
                 )
              -
              exp
               number
                2
            )
        ==
        exp
         number
          0xfffffffe
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              exp
               prefixexp
                (
                exp
                 exp
                  number
                   1
                 <<
                 exp
                  number
                   40
                )
              -
              exp
               number
                4
            )
        ==
        exp
         number
          0xfffffffc
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lrotate
           args
            (
            explist
             exp
              number
               0
             ,
             exp
              -
              exp
               number
                1
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lrotate
           args
            (
            explist
             exp
              number
               0
             ,
             exp
              number
               7
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lrotate
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               0
            )
        ==
        exp
         number
          0x12345678
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lrotate
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               32
            )
        ==
        exp
         number
          0x12345678
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lrotate
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               4
            )
        ==
        exp
         number
          0x23456781
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           rrotate
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              -
              exp
               number
                4
            )
        ==
        exp
         number
          0x23456781
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lrotate
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              -
              exp
               number
                8
            )
        ==
        exp
         number
          0x78123456
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           rrotate
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               8
            )
        ==
        exp
         number
          0x78123456
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lrotate
           args
            (
            explist
             exp
              number
               0xaaaaaaaa
             ,
             exp
              number
               2
            )
        ==
        exp
         number
          0xaaaaaaaa
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lrotate
           args
            (
            explist
             exp
              number
               0xaaaaaaaa
             ,
             exp
              -
              exp
               number
                2
            )
        ==
        exp
         number
          0xaaaaaaaa
      )
   stat
    for
    i
    =
    exp
     -
     exp
      number
       50
    ,
    exp
     number
      50
    do
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             lrotate
             args
              (
              explist
               exp
                number
                 0x89abcdef
               ,
               exp
                prefixexp
                 i
              )
          ==
          exp
           prefixexp
            functioncall
             bit32
             .
             lrotate
             args
              (
              explist
               exp
                number
                 0x89abcdef
               ,
               exp
                exp
                 prefixexp
                  i
                %
                exp
                 number
                  32
              )
        )
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               4
            )
        ==
        exp
         number
          0x23456780
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               8
            )
        ==
        exp
         number
          0x34567800
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              -
              exp
               number
                4
            )
        ==
        exp
         number
          0x01234567
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              -
              exp
               number
                8
            )
        ==
        exp
         number
          0x00123456
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               32
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           lshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              -
              exp
               number
                32
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           rshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               4
            )
        ==
        exp
         number
          0x01234567
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           rshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               8
            )
        ==
        exp
         number
          0x00123456
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           rshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               32
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           rshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              -
              exp
               number
                32
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           arshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               0
            )
        ==
        exp
         number
          0x12345678
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           arshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               1
            )
        ==
        exp
         exp
          number
           0x12345678
         //
         exp
          number
           2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           arshift
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              -
              exp
               number
                1
            )
        ==
        exp
         exp
          number
           0x12345678
         *
         exp
          number
           2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           arshift
           args
            (
            explist
             exp
              -
              exp
               number
                1
             ,
             exp
              number
               1
            )
        ==
        exp
         number
          0xffffffff
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           arshift
           args
            (
            explist
             exp
              -
              exp
               number
                1
             ,
             exp
              number
               24
            )
        ==
        exp
         number
          0xffffffff
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           arshift
           args
            (
            explist
             exp
              -
              exp
               number
                1
             ,
             exp
              number
               32
            )
        ==
        exp
         number
          0xffffffff
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           arshift
           args
            (
            explist
             exp
              -
              exp
               number
                1
             ,
             exp
              -
              exp
               number
                1
            )
        ==
        exp
         prefixexp
          functioncall
           bit32
           .
           band
           args
            (
            explist
             exp
              exp
               -
               exp
                number
                 1
              *
              exp
               number
                2
             ,
             exp
              number
               0xffffffff
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        <<
        exp
         exp
          number
           4
         ==
         exp
          number
           0x123456780
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        <<
        exp
         exp
          number
           8
         ==
         exp
          number
           0x1234567800
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        <<
        exp
         exp
          -
          exp
           number
            4
         ==
         exp
          number
           0x01234567
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        <<
        exp
         exp
          -
          exp
           number
            8
         ==
         exp
          number
           0x00123456
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        <<
        exp
         exp
          number
           32
         ==
         exp
          number
           0x1234567800000000
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        <<
        exp
         exp
          -
          exp
           number
            32
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        >>
        exp
         exp
          number
           4
         ==
         exp
          number
           0x01234567
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        >>
        exp
         exp
          number
           8
         ==
         exp
          number
           0x00123456
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        >>
        exp
         exp
          number
           32
         ==
         exp
          number
           0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         number
          0x12345678
        >>
        exp
         exp
          -
          exp
           number
            32
         ==
         exp
          number
           0x1234567800000000
      )
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         "+"
      )
   stat
    local
    attnamelist
     c
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          number
           0
        fieldsep
         ,
        field
         exp
          number
           1
        fieldsep
         ,
        field
         exp
          number
           2
        fieldsep
         ,
        field
         exp
          number
           3
        fieldsep
         ,
        field
         exp
          number
           10
        fieldsep
         ,
        field
         exp
          number
           0x80000000
        fieldsep
         ,
        field
         exp
          number
           0xaaaaaaaa
        fieldsep
         ,
        field
         exp
          number
           0x55555555
        fieldsep
         ,
        field
         exp
          number
           0xffffffff
        fieldsep
         ,
        field
         exp
          number
           0x7fffffff
       }
   stat
    for
    namelist
     _
     ,
     b
    in
    explist
     exp
      prefixexp
       functioncall
        pairs
        args
         (
         explist
          exp
           prefixexp
            c
         )
    do
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             band
             args
              (
              explist
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             band
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             band
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             btest
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            (
            exp
             exp
              prefixexp
               b
             ~=
             exp
              number
               0
            )
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             band
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             band
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                ~
                exp
                 prefixexp
                  b
              )
          ==
          exp
           number
            0
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             btest
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            (
            exp
             exp
              prefixexp
               b
             ~=
             exp
              number
               0
            )
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             band
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 functioncall
                  bit32
                  .
                  bnot
                  args
                   (
                   explist
                    exp
                     prefixexp
                      b
                   )
              )
          ==
          exp
           number
            0
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 functioncall
                  bit32
                  .
                  bnot
                  args
                   (
                   explist
                    exp
                     prefixexp
                      b
                   )
              )
          ==
          exp
           prefixexp
            functioncall
             bit32
             .
             bnot
             args
              (
              explist
               exp
                number
                 0
              )
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                number
                 0
               ,
               exp
                ~
                exp
                 prefixexp
                  b
              )
          ==
          exp
           number
            0xffffffff
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bxor
             args
              (
              explist
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bxor
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           number
            0
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bxor
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bxor
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 b
              )
          ==
          exp
           number
            0
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bxor
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                number
                 0
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bnot
             args
              (
              explist
               exp
                prefixexp
                 b
              )
          ~=
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bnot
             args
              (
              explist
               exp
                prefixexp
                 functioncall
                  bit32
                  .
                  bnot
                  args
                   (
                   explist
                    exp
                     prefixexp
                      b
                   )
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bnot
             args
              (
              explist
               exp
                prefixexp
                 b
              )
          ==
          exp
           exp
            exp
             prefixexp
              (
              exp
               exp
                number
                 1
               <<
               exp
                number
                 32
              )
            -
            exp
             number
              1
           -
           exp
            prefixexp
             b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             lrotate
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                number
                 32
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             rrotate
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                number
                 32
              )
          ==
          exp
           prefixexp
            b
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             lshift
             args
              (
              explist
               exp
                prefixexp
                 functioncall
                  bit32
                  .
                  lshift
                  args
                   (
                   explist
                    exp
                     prefixexp
                      b
                    ,
                    exp
                     -
                     exp
                      number
                       4
                   )
               ,
               exp
                number
                 4
              )
          ==
          exp
           prefixexp
            functioncall
             bit32
             .
             band
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 functioncall
                  bit32
                  .
                  bnot
                  args
                   (
                   explist
                    exp
                     number
                      0xf
                   )
              )
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             rshift
             args
              (
              explist
               exp
                prefixexp
                 functioncall
                  bit32
                  .
                  rshift
                  args
                   (
                   explist
                    exp
                     prefixexp
                      b
                    ,
                    exp
                     number
                      4
                   )
               ,
               exp
                -
                exp
                 number
                  4
              )
          ==
          exp
           prefixexp
            functioncall
             bit32
             .
             band
             args
              (
              explist
               exp
                prefixexp
                 b
               ,
               exp
                prefixexp
                 functioncall
                  bit32
                  .
                  bnot
                  args
                   (
                   explist
                    exp
                     number
                      0xf
                   )
              )
        )
    end
   stat
    varlist
     var
      c
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          number
           0
        fieldsep
         ,
        field
         exp
          number
           1
        fieldsep
         ,
        field
         exp
          number
           2
        fieldsep
         ,
        field
         exp
          number
           3
        fieldsep
         ,
        field
         exp
          number
           10
        fieldsep
         ,
        field
         exp
          number
           0x800000
        fieldsep
         ,
        field
         exp
          number
           0xaaaaaa
        fieldsep
         ,
        field
         exp
          number
           0x555555
        fieldsep
         ,
        field
         exp
          number
           0xffffff
        fieldsep
         ,
        field
         exp
          number
           0x7fffff
       }
   stat
    for
    namelist
     _
     ,
     b
    in
    explist
     exp
      prefixexp
       functioncall
        pairs
        args
         (
         explist
          exp
           prefixexp
            c
         )
    do
    block
     stat
      for
      i
      =
      exp
       -
       exp
        number
         40
      ,
      exp
       number
        40
      do
      block
       stat
        local
        attnamelist
         x
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            bit32
            .
            lshift
            args
             (
             explist
              exp
               prefixexp
                b
              ,
              exp
               prefixexp
                i
             )
       stat
        local
        attnamelist
         y
         attrib
        =
        explist
         exp
          prefixexp
           functioncall
            math
            .
            floor
            args
             (
             explist
              exp
               prefixexp
                functioncall
                 math
                 .
                 fmod
                 args
                  (
                  explist
                   exp
                    exp
                     prefixexp
                      b
                    *
                    exp
                     exp
                      number
                       2.0
                     ^
                     exp
                      prefixexp
                       i
                   ,
                   exp
                    exp
                     number
                      2.0
                    ^
                    exp
                     number
                      32
                  )
             )
       stat
        functioncall
         assert
         args
          (
          explist
           exp
            exp
             prefixexp
              functioncall
               math
               .
               fmod
               args
                (
                explist
                 exp
                  exp
                   prefixexp
                    x
                  -
                  exp
                   prefixexp
                    y
                 ,
                 exp
                  exp
                   number
                    2.0
                  ^
                  exp
                   number
                    32
                )
            ==
            exp
             number
              0
          )
      end
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               band
             ,
             exp
              tableconstructor
               {
               }
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               bnot
             ,
             exp
              string
               "a"
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               lshift
             ,
             exp
              number
               45
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               lshift
             ,
             exp
              number
               45
             ,
             exp
              prefixexp
               print
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               rshift
             ,
             exp
              number
               45
             ,
             exp
              prefixexp
               print
            )
      )
   stat
    functioncall
     print
     args
      (
      explist
       exp
        string
         "+"
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           extract
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               0
             ,
             exp
              number
               4
            )
        ==
        exp
         number
          8
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           extract
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               4
             ,
             exp
              number
               4
            )
        ==
        exp
         number
          7
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           extract
           args
            (
            explist
             exp
              number
               0xa0001111
             ,
             exp
              number
               28
             ,
             exp
              number
               4
            )
        ==
        exp
         number
          0xa
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           extract
           args
            (
            explist
             exp
              number
               0xa0001111
             ,
             exp
              number
               31
             ,
             exp
              number
               1
            )
        ==
        exp
         number
          1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           extract
           args
            (
            explist
             exp
              number
               0x50000111
             ,
             exp
              number
               31
             ,
             exp
              number
               1
            )
        ==
        exp
         number
          0
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           extract
           args
            (
            explist
             exp
              number
               0xf2345679
             ,
             exp
              number
               0
             ,
             exp
              number
               32
            )
        ==
        exp
         number
          0xf2345679
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               extract
             ,
             exp
              number
               0
             ,
             exp
              -
              exp
               number
                1
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               extract
             ,
             exp
              number
               0
             ,
             exp
              number
               32
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               extract
             ,
             exp
              number
               0
             ,
             exp
              number
               0
             ,
             exp
              number
               33
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               bit32
               .
               extract
             ,
             exp
              number
               0
             ,
             exp
              number
               31
             ,
             exp
              number
               2
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           replace
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               5
             ,
             exp
              number
               28
             ,
             exp
              number
               4
            )
        ==
        exp
         number
          0x52345678
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           replace
           args
            (
            explist
             exp
              number
               0x12345678
             ,
             exp
              number
               0x87654321
             ,
             exp
              number
               0
             ,
             exp
              number
               32
            )
        ==
        exp
         number
          0x87654321
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           replace
           args
            (
            explist
             exp
              number
               0
             ,
             exp
              number
               1
             ,
             exp
              number
               2
            )
        ==
        exp
         exp
          number
           2
         ^
         exp
          number
           2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           replace
           args
            (
            explist
             exp
              number
               0
             ,
             exp
              -
              exp
               number
                1
             ,
             exp
              number
               4
            )
        ==
        exp
         exp
          number
           2
         ^
         exp
          number
           4
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           replace
           args
            (
            explist
             exp
              -
              exp
               number
                1
             ,
             exp
              number
               0
             ,
             exp
              number
               31
            )
        ==
        exp
         exp
          prefixexp
           (
           exp
            exp
             number
              1
            <<
            exp
             number
              31
           )
         -
         exp
          number
           1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           replace
           args
            (
            explist
             exp
              -
              exp
               number
                1
             ,
             exp
              number
               0
             ,
             exp
              number
               1
             ,
             exp
              number
               2
            )
        ==
        exp
         exp
          prefixexp
           (
           exp
            exp
             number
              1
            <<
            exp
             number
              32
           )
         -
         exp
          number
           7
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           bor
           args
            (
            explist
             exp
              number
               3.0
            )
        ==
        exp
         number
          3
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           bit32
           .
           bor
           args
            (
            explist
             exp
              -
              exp
               number
                4.0
            )
        ==
        exp
         number
          0xfffffffc
      )
   stat
    if
    exp
     exp
      exp
       exp
        number
         2.0
       ^
       exp
        number
         50
      <
      exp
       exp
        exp
         number
          2.0
        ^
        exp
         number
          50
       +
       exp
        number
         1.0
     and
     exp
      exp
       exp
        number
         2.0
       ^
       exp
        number
         50
      <
      exp
       prefixexp
        (
        exp
         exp
          -
          exp
           number
            1
         >>
         exp
          number
           1
        )
    then
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                exp
                 exp
                  number
                   2.0
                 ^
                 exp
                  number
                   32
                -
                exp
                 number
                  5.0
              )
          ==
          exp
           number
            0xfffffffb
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                exp
                 -
                 exp
                  exp
                   number
                    2.0
                  ^
                  exp
                   number
                    32
                -
                exp
                 number
                  6.0
              )
          ==
          exp
           number
            0xfffffffa
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                exp
                 exp
                  number
                   2.0
                 ^
                 exp
                  number
                   48
                -
                exp
                 number
                  5.0
              )
          ==
          exp
           number
            0xfffffffb
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             bit32
             .
             bor
             args
              (
              explist
               exp
                exp
                 -
                 exp
                  exp
                   number
                    2.0
                  ^
                  exp
                   number
                    48
                -
                exp
                 number
                  6.0
              )
          ==
          exp
           number
            0xfffffffa
        )
    end
   stat
    functioncall
     print
     args
      string
       'OK'
 <EOF>
