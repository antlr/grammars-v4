start_
 chunk
  block
   stat
    functioncall
     print
     args
      string
       "testing closures"
   stat
    local
    attnamelist
     A
     attrib
     ,
     B
     attrib
    =
    explist
     exp
      number
       0
     ,
     exp
      tableconstructor
       {
       fieldlist
        field
         g
         =
         exp
          number
           10
       }
   stat
    local
    function
    f
    funcbody
     (
     parlist
      namelist
       x
     )
     block
      stat
       local
       attnamelist
        a
        attrib
       =
       explist
        exp
         tableconstructor
          {
          }
      stat
       for
       i
       =
       exp
        number
         1
       ,
       exp
        number
         1000
       do
       block
        stat
         local
         attnamelist
          y
          attrib
         =
         explist
          exp
           number
            0
        stat
         do
         block
          stat
           varlist
            var
             prefixexp
              a
             [
             exp
              prefixexp
               i
             ]
           =
           explist
            exp
             functiondef
              function
              funcbody
               (
               parlist
               )
               block
                stat
                 varlist
                  var
                   prefixexp
                    B
                   .
                   g
                 =
                 explist
                  exp
                   exp
                    prefixexp
                     B
                     .
                     g
                   +
                   exp
                    number
                     1
                stat
                 ;
                stat
                 varlist
                  var
                   y
                 =
                 explist
                  exp
                   exp
                    prefixexp
                     y
                   +
                   exp
                    prefixexp
                     x
                stat
                 ;
                retstat
                 return
                 explist
                  exp
                   exp
                    prefixexp
                     y
                   +
                   exp
                    prefixexp
                     A
               end
         end
       end
      stat
       local
       attnamelist
        dummy
        attrib
       =
       explist
        exp
         functiondef
          function
          funcbody
           (
           parlist
           )
           block
            retstat
             return
             explist
              exp
               prefixexp
                a
                [
                exp
                 prefixexp
                  A
                ]
           end
      stat
       functioncall
        collectgarbage
        args
         (
         )
      stat
       varlist
        var
         A
       =
       explist
        exp
         number
          1
      stat
       ;
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              dummy
              args
               (
               )
           ==
           exp
            prefixexp
             a
             [
             exp
              number
               1
             ]
         )
      stat
       ;
      stat
       varlist
        var
         A
       =
       explist
        exp
         number
          0
      stat
       ;
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              a
              [
              exp
               number
                1
              ]
              args
               (
               )
           ==
           exp
            prefixexp
             x
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             functioncall
              a
              [
              exp
               number
                3
              ]
              args
               (
               )
           ==
           exp
            prefixexp
             x
         )
      stat
       functioncall
        collectgarbage
        args
         (
         )
      stat
       functioncall
        assert
        args
         (
         explist
          exp
           exp
            prefixexp
             B
             .
             g
           ==
           exp
            number
             12
         )
      retstat
       return
       explist
        exp
         prefixexp
          a
     end
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        f
        args
         (
         explist
          exp
           number
            10
         )
   stat
    local
    attnamelist
     x
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         [
         exp
          number
           1
         ]
         =
         exp
          tableconstructor
           {
           }
       }
   stat
    functioncall
     setmetatable
     args
      (
      explist
       exp
        prefixexp
         x
       ,
       exp
        tableconstructor
         {
         fieldlist
          field
           __mode
           =
           exp
            string
             'kv'
         }
      )
   stat
    while
    exp
     prefixexp
      x
      [
      exp
       number
        1
      ]
    do
    block
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        exp
         prefixexp
          A
        ..
        exp
         exp
          prefixexp
           A
         ..
         exp
          exp
           prefixexp
            A
          ..
          exp
           prefixexp
            A
     stat
      varlist
       var
        A
      =
      explist
       exp
        exp
         prefixexp
          A
        +
        exp
         number
          1
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             1
           ]
           args
            (
            )
        ==
        exp
         exp
          number
           20
         +
         exp
          prefixexp
           A
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             1
           ]
           args
            (
            )
        ==
        exp
         exp
          number
           30
         +
         exp
          prefixexp
           A
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             2
           ]
           args
            (
            )
        ==
        exp
         exp
          number
           10
         +
         exp
          prefixexp
           A
      )
   stat
    functioncall
     collectgarbage
     args
      (
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             2
           ]
           args
            (
            )
        ==
        exp
         exp
          number
           20
         +
         exp
          prefixexp
           A
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             2
           ]
           args
            (
            )
        ==
        exp
         exp
          number
           30
         +
         exp
          prefixexp
           A
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             3
           ]
           args
            (
            )
        ==
        exp
         exp
          number
           20
         +
         exp
          prefixexp
           A
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             8
           ]
           args
            (
            )
        ==
        exp
         exp
          number
           10
         +
         exp
          prefixexp
           A
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           getmetatable
           args
            (
            explist
             exp
              prefixexp
               x
            )
          .
          __mode
        ==
        exp
         string
          'kv'
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          B
          .
          g
        ==
        exp
         number
          19
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      5
    do
    block
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         prefixexp
          i
        ]
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
           namelist
            x
          )
          block
           retstat
            return
            explist
             exp
              exp
               exp
                prefixexp
                 i
               +
               exp
                prefixexp
                 a
              +
              exp
               prefixexp
                _ENV
          end
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             3
           ]
         ~=
         exp
          prefixexp
           a
           [
           exp
            number
             4
           ]
        and
        exp
         exp
          prefixexp
           a
           [
           exp
            number
             4
           ]
         ~=
         exp
          prefixexp
           a
           [
           exp
            number
             5
           ]
      )
   stat
    do
    block
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
           namelist
            x
          )
          block
           retstat
            return
            explist
             exp
              prefixexp
               functioncall
                math
                .
                sin
                args
                 (
                 explist
                  exp
                   prefixexp
                    _ENV
                    [
                    exp
                     prefixexp
                      x
                    ]
                 )
          end
     stat
      local
      function
      f
      funcbody
       (
       parlist
       )
       block
        retstat
         return
         explist
          exp
           prefixexp
            a
       end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             f
             args
              (
              )
          ==
          exp
           prefixexp
            functioncall
             f
             args
              (
              )
        )
    end
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      10
    do
    block
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         prefixexp
          i
        ]
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           set
           =
           exp
            functiondef
             function
             funcbody
              (
              parlist
               namelist
                x
              )
              block
               stat
                varlist
                 var
                  i
                =
                explist
                 exp
                  prefixexp
                   x
              end
          fieldsep
           ,
          field
           get
           =
           exp
            functiondef
             function
             funcbody
              (
              parlist
              )
              block
               retstat
                return
                explist
                 exp
                  prefixexp
                   i
              end
         }
     stat
      if
      exp
       exp
        prefixexp
         i
       ==
       exp
        number
         3
      then
      block
       stat
        break
      end
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          a
          [
          exp
           number
            4
          ]
        ==
        exp
         prefixexp
          undef
      )
   stat
    functioncall
     a
     [
     exp
      number
       1
     ]
     .
     set
     args
      (
      explist
       exp
        number
         10
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             2
           ]
           .
           get
           args
            (
            )
        ==
        exp
         number
          2
      )
   stat
    functioncall
     a
     [
     exp
      number
       2
     ]
     .
     set
     args
      (
      explist
       exp
        string
         'a'
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             3
           ]
           .
           get
           args
            (
            )
        ==
        exp
         number
          3
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           a
           [
           exp
            number
             2
           ]
           .
           get
           args
            (
            )
        ==
        exp
         string
          'a'
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    local
    attnamelist
     t
     attrib
    =
    explist
     exp
      tableconstructor
       {
       fieldlist
        field
         exp
          string
           "a"
        fieldsep
         ,
        field
         exp
          string
           "b"
       }
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     #
     exp
      prefixexp
       t
    do
    block
     stat
      local
      attnamelist
       k
       attrib
      =
      explist
       exp
        prefixexp
         t
         [
         exp
          prefixexp
           i
         ]
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         prefixexp
          i
        ]
      =
      explist
       exp
        tableconstructor
         {
         fieldlist
          field
           set
           =
           exp
            functiondef
             function
             funcbody
              (
              parlist
               namelist
                x
                ,
                y
              )
              block
               stat
                varlist
                 var
                  i
                =
                explist
                 exp
                  prefixexp
                   x
               stat
                ;
               stat
                varlist
                 var
                  k
                =
                explist
                 exp
                  prefixexp
                   y
              end
          fieldsep
           ,
          field
           get
           =
           exp
            functiondef
             function
             funcbody
              (
              parlist
              )
              block
               retstat
                return
                explist
                 exp
                  prefixexp
                   i
                 ,
                 exp
                  prefixexp
                   k
              end
         }
     stat
      if
      exp
       exp
        prefixexp
         i
       ==
       exp
        number
         2
      then
      block
       stat
        break
      end
    end
   stat
    functioncall
     a
     [
     exp
      number
       1
     ]
     .
     set
     args
      (
      explist
       exp
        number
         10
       ,
       exp
        number
         20
      )
   stat
    local
    attnamelist
     r
     attrib
     ,
     s
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        a
        [
        exp
         number
          2
        ]
        .
        get
        args
         (
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           r
         ==
         exp
          number
           2
        and
        exp
         exp
          prefixexp
           s
         ==
         exp
          string
           'b'
      )
   stat
    varlist
     var
      r
     ,
     var
      s
    =
    explist
     exp
      prefixexp
       functioncall
        a
        [
        exp
         number
          1
        ]
        .
        get
        args
         (
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           r
         ==
         exp
          number
           10
        and
        exp
         exp
          prefixexp
           s
         ==
         exp
          number
           20
      )
   stat
    functioncall
     a
     [
     exp
      number
       2
     ]
     .
     set
     args
      (
      explist
       exp
        string
         'a'
       ,
       exp
        string
         'b'
      )
   stat
    varlist
     var
      r
     ,
     var
      s
    =
    explist
     exp
      prefixexp
       functioncall
        a
        [
        exp
         number
          2
        ]
        .
        get
        args
         (
         )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           r
         ==
         exp
          string
           "a"
        and
        exp
         exp
          prefixexp
           s
         ==
         exp
          string
           "b"
      )
   stat
    local
    attnamelist
     f
     attrib
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      3
    do
    block
     stat
      varlist
       var
        f
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           retstat
            return
            explist
             exp
              prefixexp
               i
          end
     stat
      break
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           f
           args
            (
            )
        ==
        exp
         number
          1
      )
   stat
    for
    k
    =
    exp
     number
      1
    ,
    exp
     #
     exp
      prefixexp
       t
    do
    block
     stat
      local
      attnamelist
       v
       attrib
      =
      explist
       exp
        prefixexp
         t
         [
         exp
          prefixexp
           k
         ]
     stat
      varlist
       var
        f
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           retstat
            return
            explist
             exp
              prefixexp
               k
             ,
             exp
              prefixexp
               v
          end
     stat
      break
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          (
          exp
           tableconstructor
            {
            fieldlist
             field
              exp
               prefixexp
                functioncall
                 f
                 args
                  (
                  )
            }
          )
          [
          exp
           number
            1
          ]
        ==
        exp
         number
          1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          (
          exp
           tableconstructor
            {
            fieldlist
             field
              exp
               prefixexp
                functioncall
                 f
                 args
                  (
                  )
            }
          )
          [
          exp
           number
            2
          ]
        ==
        exp
         string
          "a"
      )
   stat
    local
    attnamelist
     b
     attrib
   stat
    function
    funcname
     f
    funcbody
     (
     parlist
      namelist
       x
     )
     block
      stat
       local
       attnamelist
        first
        attrib
       =
       explist
        exp
         number
          1
      stat
       while
       exp
        number
         1
       do
       block
        stat
         if
         exp
          exp
           exp
            prefixexp
             x
           ==
           exp
            number
             3
          and
          exp
           not
           exp
            prefixexp
             first
         then
         block
          retstat
           return
         end
        stat
         local
         attnamelist
          a
          attrib
         =
         explist
          exp
           string
            'xuxu'
        stat
         varlist
          var
           b
         =
         explist
          exp
           functiondef
            function
            funcbody
             (
             parlist
              namelist
               op
               ,
               y
             )
             block
              stat
               if
               exp
                exp
                 prefixexp
                  op
                ==
                exp
                 string
                  'set'
               then
               block
                stat
                 varlist
                  var
                   a
                 =
                 explist
                  exp
                   exp
                    prefixexp
                     x
                   +
                   exp
                    prefixexp
                     y
               else
               block
                retstat
                 return
                 explist
                  exp
                   prefixexp
                    a
               end
             end
        stat
         if
         exp
          exp
           prefixexp
            x
          ==
          exp
           number
            1
         then
         block
          stat
           do
           block
            stat
             break
           end
         elseif
         exp
          exp
           prefixexp
            x
          ==
          exp
           number
            2
         then
         block
          retstat
           return
         else
         block
          stat
           if
           exp
            exp
             prefixexp
              x
            ~=
            exp
             number
              3
           then
           block
            stat
             functioncall
              error
              args
               (
               )
           end
         end
        stat
         varlist
          var
           first
         =
         explist
          exp
           nil
       end
     end
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      3
    do
    block
     stat
      functioncall
       f
       args
        (
        explist
         exp
          prefixexp
           i
        )
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             b
             args
              (
              explist
               exp
                string
                 'get'
              )
          ==
          exp
           string
            'xuxu'
        )
     stat
      functioncall
       b
       args
        (
        explist
         exp
          string
           'set'
         ,
         exp
          number
           10
        )
     stat
      ;
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           prefixexp
            functioncall
             b
             args
              (
              explist
               exp
                string
                 'get'
              )
          ==
          exp
           exp
            number
             10
           +
           exp
            prefixexp
             i
        )
     stat
      varlist
       var
        b
      =
      explist
       exp
        nil
    end
   stat
    functioncall
     pcall
     args
      (
      explist
       exp
        prefixexp
         f
       ,
       exp
        number
         4
      )
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           b
           args
            (
            explist
             exp
              string
               'get'
            )
        ==
        exp
         string
          'xuxu'
      )
   stat
    functioncall
     b
     args
      (
      explist
       exp
        string
         'set'
       ,
       exp
        number
         10
      )
   stat
    ;
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           b
           args
            (
            explist
             exp
              string
               'get'
            )
        ==
        exp
         number
          14
      )
   stat
    local
    attnamelist
     y
     attrib
     ,
     w
     attrib
   stat
    function
    funcname
     f
    funcbody
     (
     parlist
      namelist
       x
     )
     block
      retstat
       return
       explist
        exp
         functiondef
          function
          funcbody
           (
           parlist
            namelist
             y
           )
           block
            retstat
             return
             explist
              exp
               functiondef
                function
                funcbody
                 (
                 parlist
                  namelist
                   z
                 )
                 block
                  retstat
                   return
                   explist
                    exp
                     exp
                      exp
                       exp
                        prefixexp
                         w
                       +
                       exp
                        prefixexp
                         x
                      +
                      exp
                       prefixexp
                        y
                     +
                     exp
                      prefixexp
                       z
                 end
           end
     end
   stat
    varlist
     var
      y
    =
    explist
     exp
      prefixexp
       functioncall
        f
        args
         (
         explist
          exp
           number
            10
         )
   stat
    varlist
     var
      w
    =
    explist
     exp
      number
       1.345
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           functioncall
            y
            args
             (
             explist
              exp
               number
                20
             )
           args
            (
            explist
             exp
              number
               30
            )
        ==
        exp
         exp
          number
           60
         +
         exp
          prefixexp
           w
      )
   stat
    do
    block
     stat
      local
      attnamelist
       X
       attrib
       ,
       Y
       attrib
     stat
      local
      attnamelist
       a
       attrib
      =
      explist
       exp
        prefixexp
         functioncall
          math
          .
          sin
          args
           (
           explist
            exp
             number
              0
           )
     stat
      while
      exp
       prefixexp
        a
      do
      block
       stat
        local
        attnamelist
         b
         attrib
        =
        explist
         exp
          number
           10
       stat
        varlist
         var
          X
        =
        explist
         exp
          functiondef
           function
           funcbody
            (
            parlist
            )
            block
             retstat
              return
              explist
               exp
                prefixexp
                 b
            end
       stat
        if
        exp
         prefixexp
          a
        then
        block
         stat
          break
        end
      end
     stat
      do
      block
       stat
        local
        attnamelist
         b
         attrib
        =
        explist
         exp
          number
           20
       stat
        varlist
         var
          Y
        =
        explist
         exp
          functiondef
           function
           funcbody
            (
            parlist
            )
            block
             retstat
              return
              explist
               exp
                prefixexp
                 b
            end
      end
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             functioncall
              X
              args
               (
               )
           ==
           exp
            number
             10
          and
          exp
           exp
            prefixexp
             functioncall
              Y
              args
               (
               )
           ==
           exp
            number
             20
        )
    end
   stat
    local
    attnamelist
     a
     attrib
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    local
    attnamelist
     i
     attrib
    =
    explist
     exp
      number
       1
   stat
    repeat
    block
     stat
      local
      attnamelist
       x
       attrib
      =
      explist
       exp
        prefixexp
         i
     stat
      varlist
       var
        prefixexp
         a
        [
        exp
         prefixexp
          i
        ]
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           stat
            varlist
             var
              i
            =
            explist
             exp
              exp
               prefixexp
                x
              +
              exp
               number
                1
           stat
            ;
           retstat
            return
            explist
             exp
              prefixexp
               x
          end
    until
    exp
     exp
      exp
       prefixexp
        i
      >
      exp
       number
        10
     or
     exp
      exp
       prefixexp
        functioncall
         a
         [
         exp
          prefixexp
           i
         ]
         args
          (
          )
      ~=
      exp
       prefixexp
        x
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          exp
           exp
            prefixexp
             i
           ==
           exp
            number
             11
          and
          exp
           exp
            prefixexp
             functioncall
              a
              [
              exp
               number
                1
              ]
              args
               (
               )
           ==
           exp
            number
             1
         and
         exp
          exp
           prefixexp
            functioncall
             a
             [
             exp
              number
               3
             ]
             args
              (
              )
          ==
          exp
           number
            3
        and
        exp
         exp
          prefixexp
           i
         ==
         exp
          number
           4
      )
   stat
    varlist
     var
      a
    =
    explist
     exp
      tableconstructor
       {
       }
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      10
    do
    block
     stat
      if
      exp
       exp
        exp
         prefixexp
          i
        %
        exp
         number
          3
       ==
       exp
        number
         0
      then
      block
       stat
        local
        attnamelist
         y
         attrib
        =
        explist
         exp
          number
           0
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              x
            )
            block
             stat
              local
              attnamelist
               t
               attrib
              =
              explist
               exp
                prefixexp
                 y
             stat
              ;
             stat
              varlist
               var
                y
              =
              explist
               exp
                prefixexp
                 x
             stat
              ;
             retstat
              return
              explist
               exp
                prefixexp
                 t
            end
      elseif
      exp
       exp
        exp
         prefixexp
          i
        %
        exp
         number
          3
       ==
       exp
        number
         1
      then
      block
       stat
        goto
        L1
       stat
        functioncall
         error
         args
          string
           'not here'
       stat
        label
         ::
         L1
         ::
       stat
        local
        attnamelist
         y
         attrib
        =
        explist
         exp
          number
           1
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              x
            )
            block
             stat
              local
              attnamelist
               t
               attrib
              =
              explist
               exp
                prefixexp
                 y
             stat
              ;
             stat
              varlist
               var
                y
              =
              explist
               exp
                prefixexp
                 x
             stat
              ;
             retstat
              return
              explist
               exp
                prefixexp
                 t
            end
      elseif
      exp
       exp
        exp
         prefixexp
          i
        %
        exp
         number
          3
       ==
       exp
        number
         2
      then
      block
       stat
        local
        attnamelist
         t
         attrib
       stat
        goto
        l4
       stat
        label
         ::
         l4a
         ::
       stat
        varlist
         var
          prefixexp
           a
          [
          exp
           prefixexp
            i
          ]
        =
        explist
         exp
          prefixexp
           t
       stat
        ;
       stat
        goto
        l4b
       stat
        functioncall
         error
         args
          (
          explist
           exp
            string
             "should never be here!"
          )
       stat
        label
         ::
         l4
         ::
       stat
        local
        attnamelist
         y
         attrib
        =
        explist
         exp
          number
           2
       stat
        varlist
         var
          t
        =
        explist
         exp
          functiondef
           function
           funcbody
            (
            parlist
             namelist
              x
            )
            block
             stat
              local
              attnamelist
               t
               attrib
              =
              explist
               exp
                prefixexp
                 y
             stat
              ;
             stat
              varlist
               var
                y
              =
              explist
               exp
                prefixexp
                 x
             stat
              ;
             retstat
              return
              explist
               exp
                prefixexp
                 t
            end
       stat
        goto
        l4a
       stat
        functioncall
         error
         args
          (
          explist
           exp
            string
             "should never be here!"
          )
       stat
        label
         ::
         l4b
         ::
      end
    end
   stat
    for
    i
    =
    exp
     number
      1
    ,
    exp
     number
      10
    do
    block
     stat
      functioncall
       assert
       args
        (
        explist
         exp
          exp
           exp
            prefixexp
             functioncall
              a
              [
              exp
               prefixexp
                i
              ]
              args
               (
               explist
                exp
                 exp
                  prefixexp
                   i
                 *
                 exp
                  number
                   10
               )
           ==
           exp
            exp
             prefixexp
              i
            %
            exp
             number
              3
          and
          exp
           exp
            prefixexp
             functioncall
              a
              [
              exp
               prefixexp
                i
              ]
              args
               (
               )
           ==
           exp
            exp
             prefixexp
              i
            *
            exp
             number
              10
        )
    end
   stat
    functioncall
     print
     args
      string
       '+'
   stat
    local
    function
    t
    funcbody
     (
     parlist
     )
     block
      stat
       local
       function
       c
       funcbody
        (
        parlist
         namelist
          a
          ,
          b
        )
        block
         stat
          functioncall
           assert
           args
            (
            explist
             exp
              exp
               exp
                prefixexp
                 a
               ==
               exp
                string
                 "test"
              and
              exp
               exp
                prefixexp
                 b
               ==
               exp
                string
                 "OK"
            )
        end
      stat
       local
       function
       v
       funcbody
        (
        parlist
         namelist
          f
         ,
         ...
        )
        block
         stat
          functioncall
           c
           args
            (
            explist
             exp
              string
               "test"
             ,
             exp
              exp
               exp
                exp
                 prefixexp
                  functioncall
                   f
                   args
                    (
                    )
                ~=
                exp
                 number
                  1
               and
               exp
                string
                 "FAILED"
              or
              exp
               string
                "OK"
            )
        end
      stat
       local
       attnamelist
        x
        attrib
       =
       explist
        exp
         number
          1
      retstat
       return
       explist
        exp
         prefixexp
          functioncall
           v
           args
            (
            explist
             exp
              functiondef
               function
               funcbody
                (
                parlist
                )
                block
                 retstat
                  return
                  explist
                   exp
                    prefixexp
                     x
                end
            )
     end
   stat
    functioncall
     t
     args
      (
      )
   stat
    local
    attnamelist
     debug
     attrib
    =
    explist
     exp
      prefixexp
       functioncall
        require
        args
         string
          'debug'
   stat
    local
    attnamelist
     foo1
     attrib
     ,
     foo2
     attrib
     ,
     foo3
     attrib
   stat
    do
    block
     stat
      local
      attnamelist
       a
       attrib
       ,
       b
       attrib
       ,
       c
       attrib
      =
      explist
       exp
        number
         3
       ,
       exp
        number
         5
       ,
       exp
        number
         7
     stat
      varlist
       var
        foo1
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           retstat
            return
            explist
             exp
              exp
               prefixexp
                a
              +
              exp
               prefixexp
                b
          end
     stat
      ;
     stat
      varlist
       var
        foo2
      =
      explist
       exp
        functiondef
         function
         funcbody
          (
          parlist
          )
          block
           retstat
            return
            explist
             exp
              exp
               prefixexp
                b
              +
              exp
               prefixexp
                a
          end
     stat
      ;
     stat
      do
      block
       stat
        local
        attnamelist
         a
         attrib
        =
        explist
         exp
          number
           10
       stat
        varlist
         var
          foo3
        =
        explist
         exp
          functiondef
           function
           funcbody
            (
            parlist
            )
            block
             retstat
              return
              explist
               exp
                exp
                 prefixexp
                  a
                +
                exp
                 prefixexp
                  b
            end
       stat
        ;
      end
    end
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         functioncall
          debug
          .
          upvalueid
          args
           (
           explist
            exp
             prefixexp
              foo1
            ,
            exp
             number
              1
           )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         functioncall
          debug
          .
          upvalueid
          args
           (
           explist
            exp
             prefixexp
              foo1
            ,
            exp
             number
              2
           )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo1
             ,
             exp
              number
               3
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo1
             ,
             exp
              number
               1
            )
        ==
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo2
             ,
             exp
              number
               2
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo1
             ,
             exp
              number
               2
            )
        ==
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo2
             ,
             exp
              number
               1
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        prefixexp
         functioncall
          debug
          .
          upvalueid
          args
           (
           explist
            exp
             prefixexp
              foo3
            ,
            exp
             number
              1
           )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo1
             ,
             exp
              number
               1
            )
        ~=
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo3
             ,
             exp
              number
               1
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo1
             ,
             exp
              number
               2
            )
        ==
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               foo3
             ,
             exp
              number
               2
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           debug
           .
           upvalueid
           args
            (
            explist
             exp
              prefixexp
               functioncall
                string
                .
                gmatch
                args
                 (
                 explist
                  exp
                   string
                    "x"
                  ,
                  exp
                   string
                    "x"
                 )
             ,
             exp
              number
               1
            )
        ~=
        exp
         nil
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            foo1
            args
             (
             )
         ==
         exp
          exp
           number
            3
          +
          exp
           number
            5
        and
        exp
         exp
          prefixexp
           functioncall
            foo2
            args
             (
             )
         ==
         exp
          exp
           number
            5
          +
          exp
           number
            3
      )
   stat
    functioncall
     debug
     .
     upvaluejoin
     args
      (
      explist
       exp
        prefixexp
         foo1
       ,
       exp
        number
         2
       ,
       exp
        prefixexp
         foo2
       ,
       exp
        number
         2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         exp
          prefixexp
           functioncall
            foo1
            args
             (
             )
         ==
         exp
          exp
           number
            3
          +
          exp
           number
            3
        and
        exp
         exp
          prefixexp
           functioncall
            foo2
            args
             (
             )
         ==
         exp
          exp
           number
            5
          +
          exp
           number
            3
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           foo3
           args
            (
            )
        ==
        exp
         exp
          number
           10
         +
         exp
          number
           5
      )
   stat
    functioncall
     debug
     .
     upvaluejoin
     args
      (
      explist
       exp
        prefixexp
         foo3
       ,
       exp
        number
         2
       ,
       exp
        prefixexp
         foo2
       ,
       exp
        number
         1
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           foo3
           args
            (
            )
        ==
        exp
         exp
          number
           10
         +
         exp
          number
           5
      )
   stat
    functioncall
     debug
     .
     upvaluejoin
     args
      (
      explist
       exp
        prefixexp
         foo3
       ,
       exp
        number
         2
       ,
       exp
        prefixexp
         foo2
       ,
       exp
        number
         2
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        exp
         prefixexp
          functioncall
           foo3
           args
            (
            )
        ==
        exp
         exp
          number
           10
         +
         exp
          number
           3
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               debug
               .
               upvaluejoin
             ,
             exp
              prefixexp
               foo1
             ,
             exp
              number
               3
             ,
             exp
              prefixexp
               foo2
             ,
             exp
              number
               1
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               debug
               .
               upvaluejoin
             ,
             exp
              prefixexp
               foo1
             ,
             exp
              number
               1
             ,
             exp
              prefixexp
               foo2
             ,
             exp
              number
               3
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               debug
               .
               upvaluejoin
             ,
             exp
              prefixexp
               foo1
             ,
             exp
              number
               0
             ,
             exp
              prefixexp
               foo2
             ,
             exp
              number
               1
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               debug
               .
               upvaluejoin
             ,
             exp
              prefixexp
               print
             ,
             exp
              number
               1
             ,
             exp
              prefixexp
               foo2
             ,
             exp
              number
               1
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               debug
               .
               upvaluejoin
             ,
             exp
              tableconstructor
               {
               }
             ,
             exp
              number
               1
             ,
             exp
              prefixexp
               foo2
             ,
             exp
              number
               1
            )
      )
   stat
    functioncall
     assert
     args
      (
      explist
       exp
        not
        exp
         prefixexp
          functioncall
           pcall
           args
            (
            explist
             exp
              prefixexp
               debug
               .
               upvaluejoin
             ,
             exp
              prefixexp
               foo1
             ,
             exp
              number
               1
             ,
             exp
              prefixexp
               print
             ,
             exp
              number
               1
            )
      )
   stat
    functioncall
     print
     args
      string
       'OK'
 <EOF>
