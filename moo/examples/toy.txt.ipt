prog
 declaration
  programdecl
   @program
   programname
    name
     username
      toy
   :
   name
    username
     wind
   statement
    ifblock
     if
     condition
      (
      expression
       term
        factor
         signedAtom
          atom
           property_
            propertyname
             name
              username
               this
            .
            name
             username
              location
      relop
       ==
      expression
       term
        factor
         signedAtom
          atom
           property_
            propertyname
             name
              username
               player
      )
     statement
      ifblock
       if
       condition
        (
        expression
         term
          factor
           signedAtom
            atom
             property_
              propertyname
               name
                username
                 this
              .
              name
               username
                wound
        relop
         <
        expression
         term
          factor
           signedAtom
            atom
             property_
              propertyname
               name
                username
                 this
              .
              name
               username
                maximum
        )
       statement
        assignblock
         property_
          propertyname
           name
            username
             this
          .
          name
           username
            wound
         =
         expression
          term
           factor
            signedAtom
             atom
              property_
               propertyname
                name
                 username
                  this
               .
               name
                username
                 wound
          +
          term
           factor
            signedAtom
             atom
              integer
               2
         ;
       statement
        command
         verbinvocation
          property_
           propertyname
            name
             username
              player
          :
          verb
           name
            username
             tell
           (
           expressionlist
            expression
             term
              factor
               signedAtom
                atom
                 stringliteral
                  "You wind up the "
            ,
            expression
             term
              factor
               signedAtom
                atom
                 property_
                  propertyname
                   name
                    username
                     this
                  .
                  name
                   username
                    name
            ,
            expression
             term
              factor
               signedAtom
                atom
                 stringliteral
                  "."
           )
        ;
       statement
        command
         verbinvocation
          property_
           propertyname
            name
             username
              player
           .
           name
            username
             location
          :
          verb
           name
            username
             announce
           (
           expressionlist
            expression
             term
              factor
               signedAtom
                atom
                 property_
                  propertyname
                   name
                    username
                     player
                  .
                  name
                   username
                    name
            ,
            expression
             term
              factor
               signedAtom
                atom
                 stringliteral
                  " winds up the "
            ,
            expression
             term
              factor
               signedAtom
                atom
                 property_
                  propertyname
                   name
                    username
                     this
                  .
                  name
                   username
                    name
            ,
            expression
             term
              factor
               signedAtom
                atom
                 stringliteral
                  "."
           )
        ;
       statement
        ifblock
         if
         condition
          (
          expression
           term
            factor
             signedAtom
              atom
               property_
                propertyname
                 name
                  username
                   this
                .
                name
                 username
                  wound
          relop
           >=
          expression
           term
            factor
             signedAtom
              atom
               property_
                propertyname
                 name
                  username
                   this
                .
                name
                 username
                  maximum
          )
         statement
          command
           verbinvocation
            property_
             propertyname
              name
               username
                player
            :
            verb
             name
              username
               tell
             (
             expressionlist
              expression
               term
                factor
                 signedAtom
                  atom
                   stringliteral
                    "The knob comes to a stop while winding."
             )
          ;
         endif
       else
       statement
        command
         verbinvocation
          property_
           propertyname
            name
             username
              player
          :
          verb
           name
            username
             tell
           (
           expressionlist
            expression
             term
              factor
               signedAtom
                atom
                 stringliteral
                  "The "
            ,
            expression
             term
              factor
               signedAtom
                atom
                 property_
                  propertyname
                   name
                    username
                     this
                  .
                  name
                   username
                    name
            ,
            expression
             term
              factor
               signedAtom
                atom
                 stringliteral
                  " is already fully wound."
           )
        ;
       endif
     else
     statement
      command
       verbinvocation
        property_
         propertyname
          name
           username
            player
        :
        verb
         name
          username
           tell
         (
         expressionlist
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "You have to be holding the "
          ,
          expression
           term
            factor
             signedAtom
              atom
               property_
                propertyname
                 name
                  username
                   this
                .
                name
                 username
                  name
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "."
         )
      ;
     endif
   .
 <EOF>
