prog
 declaration
  createdecl
   @create
   sysname
    $
    feature
   called
   expressionlist
    expression
     term
      factor
       signedAtom
        atom
         stringliteral
          "Cupcake Feature"
 declaration
  describedecl
   @describe
   property_
    propertyname
     stringliteral
      "Cupcake Feature"
   as
   expression
    term
     factor
      signedAtom
       atom
        stringliteral
         "A feature object for giving cupcakes to players.."
 declaration
  setpropertydecl
   @set
   property_
    propertyname
     stringliteral
      "Cupcake Feature"
    .
    name
     username
      help_msg
   to
   expression
    term
     factor
      signedAtom
       atom
        list_
         {
         expressionlist
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "A feature object for giving cupcakes to players."
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "Use cupc*ake <player> to give a cupcake to someone."
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "Use cupc*ake everyone to give cupcakes to everyone in the room.\n"
         }
 declaration
  propertydecl
   @property
   property_
    propertyname
     stringliteral
      "Cupcake Feature"
    .
    name
     username
      bases
   expression
    term
     factor
      signedAtom
       atom
        list_
         {
         expressionlist
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "angel cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "angel food cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "carrot cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "cheesecake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "chiffon cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "chocolate cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "coffee cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "cucumber cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "layer cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "marble cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "muffin"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "pound cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "pumpkin bread"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "red velvet cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "spice cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "sponge cake"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "wedding cake"
         }
   permissions
    rc
 declaration
  propertydecl
   @property
   property_
    propertyname
     stringliteral
      "Cupcake feature"
    .
    name
     username
      icings
   expression
    term
     factor
      signedAtom
       atom
        list_
         {
         expressionlist
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "icing"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "butter icing"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "buttercream icing"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "chocolate icing"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "cream cheese icing"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "fondant"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "sour cream icing"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "ganache"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "marzipan"
         }
   permissions
    rc
 declaration
  propertydecl
   @property
   property_
    propertyname
     stringliteral
      "Cupcake Feature"
    .
    name
     username
      decorations
   expression
    term
     factor
      signedAtom
       atom
        list_
         {
         expressionlist
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "a birthday candle stuck in it"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "a cherry on top"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "a gumball on top"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "a sparkler on top"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "chocolate sprinkles"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "edible ball-bearings"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "mini marshmallows"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "mini chocolate buttons"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "rainbow sprinkles"
          ,
          expression
           term
            factor
             signedAtom
              atom
               stringliteral
                "sprinkles"
         }
   permissions
    rc
 declaration
  propertydecl
   @property
   property_
    propertyname
     stringliteral
      "Cupcake Feature"
    .
    name
     username
      decoration_probability
   expression
    term
     factor
      signedAtom
       atom
        integer
         3
   permissions
    rc
 declaration
  verbdecl
   @verb
   verbname
    stringliteral
     "Cupcake Feature"
   :
   name
    username
     describe_cupcake
   name
    username
     tnt
   permissions
    rxd
 declaration
  programdecl
   @program
   programname
    stringliteral
     "Cupcake Feature"
   :
   name
    username
     describe_cupcake
   statement
    assignblock
     property_
      propertyname
       name
        username
         cupcake_desc
     =
     expression
      term
       factor
        signedAtom
         atom
          property_
           propertyname
            name
             username
              this
           .
           name
            username
             bases
           [
           expression
            term
             factor
              signedAtom
               atom
                functioninvocation
                 name
                  username
                   random
                 (
                 expressionlist
                  expression
                   term
                    factor
                     signedAtom
                      atom
                       property_
                        propertyname
                         name
                          sysname
                           $
                 )
           ]
      +
      term
       factor
        signedAtom
         atom
          stringliteral
           " with "
      +
      term
       factor
        signedAtom
         atom
          property_
           propertyname
            name
             username
              this
           .
           name
            username
             icings
           [
           expression
            term
             factor
              signedAtom
               atom
                functioninvocation
                 name
                  username
                   random
                 (
                 expressionlist
                  expression
                   term
                    factor
                     signedAtom
                      atom
                       property_
                        propertyname
                         name
                          sysname
                           $
                 )
           ]
     ;
   statement
    ifblock
     if
     condition
      (
      expression
       term
        factor
         signedAtom
          atom
           functioninvocation
            name
             username
              random
            (
            expressionlist
             expression
              term
               factor
                signedAtom
                 atom
                  property_
                   propertyname
                    name
                     username
                      this
                   .
                   name
                    username
                     decoration_probability
            )
      relop
       ==
      expression
       term
        factor
         signedAtom
          atom
           integer
            1
      )
     statement
      assignblock
       property_
        propertyname
         name
          username
           cupcake_desc
       =
       expression
        term
         factor
          signedAtom
           atom
            property_
             propertyname
              name
               username
                cupcake_desc
        +
        term
         factor
          signedAtom
           atom
            stringliteral
             " and "
        +
        term
         factor
          signedAtom
           atom
            property_
             propertyname
              name
               username
                this
             .
             name
              username
               decorations
             [
             expression
              term
               factor
                signedAtom
                 atom
                  functioninvocation
                   name
                    username
                     random
                   (
                   expressionlist
                    expression
                     term
                      factor
                       signedAtom
                        atom
                         property_
                          propertyname
                           name
                            sysname
                             $
                   )
             ]
       ;
     endif
   statement
    command
     returncommand
      return
      expression
       term
        factor
         signedAtom
          atom
           property_
            propertyname
             name
              username
               cupcake_desc
    ;
   .
 declaration
  verbdecl
   @verb
   verbname
    stringliteral
     "Cupcake Feature"
   :
   name
    username
     cupc*ake
   name
    username
     any
   name
    username
     any
   name
    username
     any
   permissions
    rxd
 declaration
  programdecl
   @program
   programname
    stringliteral
     "Cupcake Feature"
   :
   name
    username
     cupcake
   statement
    ifblock
     if
     condition
      (
      expression
       term
        factor
         signedAtom
          atom
           !
           expression
            term
             factor
              signedAtom
               atom
                property_
                 propertyname
                  name
                   username
                    dobjstr
      )
     statement
      assignblock
       property_
        propertyname
         name
          username
           msg
       =
       expression
        term
         factor
          signedAtom
           atom
            stringliteral
             "%N %<eats> a cupcake. Oooh! It's "
        +
        term
         factor
          signedAtom
           atom
            verbinvocation
             property_
              propertyname
               name
                username
                 this
             :
             verb
              name
               username
                describe_cupcake
              (
              )
        +
        term
         factor
          signedAtom
           atom
            stringliteral
             "."
       ;
     elseif
     condition
      (
      expression
       term
        factor
         signedAtom
          atom
           property_
            propertyname
             name
              username
               dobjstr
      relop
       ==
      expression
       term
        factor
         signedAtom
          atom
           stringliteral
            "everyone"
      )
     statement
      assignblock
       property_
        propertyname
         name
          username
           msg
       =
       expression
        term
         factor
          signedAtom
           atom
            stringliteral
             "%N %<gives> everyone cupcakes. Oooh! They're "
        +
        term
         factor
          signedAtom
           atom
            verbinvocation
             property_
              propertyname
               name
                username
                 this
             :
             verb
              name
               username
                describe_cupcake
              (
              )
        +
        term
         factor
          signedAtom
           atom
            stringliteral
             "."
       ;
     else
     statement
      assignblock
       property_
        propertyname
         name
          username
           dobj
       =
       expression
        term
         factor
          signedAtom
           atom
            verbinvocation
             property_
              propertyname
               name
                sysname
                 $
                 string_utils
             :
             verb
              name
               username
                match_player
              (
              expressionlist
               expression
                term
                 factor
                  signedAtom
                   atom
                    property_
                     propertyname
                      name
                       username
                        dobjstr
              )
       ;
     statement
      ifblock
       if
       condition
        (
        expression
         term
          factor
           signedAtom
            atom
             property_
              propertyname
               name
                username
                 dobj
        relop
         ==
        expression
         term
          factor
           signedAtom
            atom
             property_
              propertyname
               name
                sysname
                 $
                 failed_match
        relop
         ||
        expression
         term
          factor
           signedAtom
            atom
             property_
              propertyname
               name
                username
                 dobj
        relop
         ==
        expression
         term
          factor
           signedAtom
            atom
             property_
              propertyname
               name
                sysname
                 $
                 ambiguous_match
        )
       statement
        command
         verbinvocation
          property_
           propertyname
            name
             username
              player
          :
          verb
           name
            username
             tell
           (
           expressionlist
            expression
             term
              factor
               signedAtom
                atom
                 stringliteral
                  "They're not here."
           )
        ;
       statement
        command
         returncommand
          return
        ;
       endif
     statement
      assignblock
       property_
        propertyname
         name
          username
           msg
       =
       expression
        term
         factor
          signedAtom
           atom
            stringliteral
             "%N %<gives> %d a cupcake. Oooh! It's "
        +
        term
         factor
          signedAtom
           atom
            verbinvocation
             property_
              propertyname
               name
                username
                 this
             :
             verb
              name
               username
                describe_cupcake
              (
              )
        +
        term
         factor
          signedAtom
           atom
            stringliteral
             "."
       ;
     endif
   statement
    command
     verbinvocation
      property_
       propertyname
        name
         sysname
          $
          you
      :
      verb
       name
        username
         say_action
       (
       expressionlist
        expression
         term
          factor
           signedAtom
            atom
             property_
              propertyname
               name
                username
                 msg
       )
    ;
   .
 <EOF>
