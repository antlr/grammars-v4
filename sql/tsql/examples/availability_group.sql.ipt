tsql_file
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       AccountsAG
     alter_availability_group_options
      JOIN
   ;
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       AccountsAG
     alter_availability_group_options
      FORCE_FAILOVER_ALLOW_DATA_LOSS
   ;
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       MyAG
     alter_availability_group_options
      ADD
      DATABASE
      id_
       MyDb3
   ;
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       MyAg
     alter_availability_group_options
      FAILOVER
   ;
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       AccountsAG
     alter_availability_group_options
      MODIFY
      REPLICA
      ON
      'INSTANCE09'
      WITH
      (
      AVAILABILITY_MODE
      =
      SYNCHRONOUS_COMMIT
      )
   ;
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       AccountsAG
     alter_availability_group_options
      MODIFY
      REPLICA
      ON
      'INSTANCE09'
      WITH
      (
      FAILOVER_MODE
      =
      AUTOMATIC
      )
   ;
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       MyAG
     alter_availability_group_options
      MODIFY
      REPLICA
      ON
      'COMPUTER01'
      WITH
      (
      FAILOVER_MODE
      =
      AUTOMATIC
      )
   ;
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       [ag1]
     alter_availability_group_options
      JOIN
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       [ag1]
     alter_availability_group_options
      GRANT
      CREATE
      ANY
      DATABASE
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       [ag1]
     alter_availability_group_options
      ADD
      LISTENER
      'ag1-listener'
      (
      WITH
      IP
      (
      (
      ip_v6_failover
       '2001:db88:f000:f00f:9876:cf3c:a010:b945'
      )
      ,
      (
      ip_v6_failover
       '2001:4898:e0dc:f213:5678:4ce2:8790:7654'
      )
      )
      ,
      PORT
      =
      60173
      )
   ;
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       AG1
     alter_availability_group_options
      SET
      (
      FAILURE_CONDITION_LEVEL
      =
      1
      )
   ;
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       [distributedag]
     alter_availability_group_options
      JOIN
      AVAILABILITY
      GROUP
      ON
      'ag1'
      WITH
      (
      LISTENER_URL
      =
      'tcp://ag1-listener.contoso.com:5022'
      ,
      AVAILABILITY_MODE
      =
      ASYNCHRONOUS_COMMIT
      ,
      FAILOVER_MODE
      =
      MANUAL
      ,
      SEEDING_MODE
      =
      AUTOMATIC
      )
      ,
      'ag2'
      WITH
      (
      LISTENER_URL
      =
      'tcp://ag2-listener.contoso.com:5022'
      ,
      AVAILABILITY_MODE
      =
      ASYNCHRONOUS_COMMIT
      ,
      FAILOVER_MODE
      =
      MANUAL
      ,
      SEEDING_MODE
      =
      AUTOMATIC
      )
   ;
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       [distributedag]
     alter_availability_group_options
      MODIFY
      AVAILABILITY
      GROUP
      ON
      'ag1'
      WITH
      (
      LISTENER_URL
      =
      'tcp://ag1-listener.contoso.com:5022'
      ,
      AVAILABILITY_MODE
      =
      ASYNCHRONOUS_COMMIT
      ,
      FAILOVER_MODE
      =
      MANUAL
      ,
      SEEDING_MODE
      =
      MANUAL
      )
      ,
      'ag2'
      WITH
      (
      LISTENER_URL
      =
      'tcp://ag2-listener.contoso.com:5022'
      ,
      AVAILABILITY_MODE
      =
      SYNCHRONOUS_COMMIT
      ,
      FAILOVER_MODE
      =
      MANUAL
      ,
      SEEDING_MODE
      =
      MANUAL
      )
   ;
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       [SQLFCIDAG]
     alter_availability_group_options
      MODIFY
      AVAILABILITY
      GROUP
      ON
      'SQLFCIAG'
      WITH
      (
      LISTENER_URL
      =
      'tcp://SQLFCIAG-2.contoso.com:5022'
      )
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       MyaAG
     alter_availability_group_options
      WITH
      (
      DTC_SUPPORT
      =
      PER_DB
      )
   ;
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       AG2
     alter_availability_group_options
      ADD
      REPLICA
      ON
      'COMPUTER03\HADR_INSTANCE'
      WITH
      (
      ENDPOINT_URL
      =
      'TCP://COMPUTER03:7022'
      ,
      PRIMARY_ROLE
      (
      ALLOW_CONNECTIONS
      =
      READ_WRITE
      )
      ,
      SECONDARY_ROLE
      (
      ALLOW_CONNECTIONS
      =
      READ_ONLY
      )
      )
   ;
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       availability_group_name
     alter_availability_group_options
      DENY
      CREATE
      ANY
      DATABASE
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       ag1
     alter_availability_group_options
      MODIFY
      REPLICA
      ON
      'primary_node'
      WITH
      (
      SEEDING_MODE
      =
      AUTOMATIC
      )
  go_statement
   GO
 batch
  sql_clauses
   ddl_clause
    alter_availability_group
     alter_availability_group_start
      ALTER
      AVAILABILITY
      GROUP
      id_
       [AGName]
     alter_availability_group_options
      MODIFY
      REPLICA
      ON
      'Replica_Name'
      WITH
      (
      SEEDING_MODE
      =
      AUTOMATIC
      )
   ;
 <EOF>
