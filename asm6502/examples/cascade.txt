;
 ORG $4000
; WRITTEN BY THOMAS EVERETT
;
; ZERO PAGE VARIABLES
;
H    EQU $06
V    EQU $07
GBASL EQU $26
;
; MONITOR VARIABLES
;
BASCALC EQU $F847
KEYIN EQU $FD1B
;
;
;   START  
 LDA #$00
 STA COUNT
IN2 LDA #$00
 STA H
 LDA #$16
 STA V
LOOP1 NOP
; GET CHAR
 LDA V
 JSR BASCALC
 LDY H
 LDA (GBASL),Y
; STORE ON STACK
 PHA
; IS A SPACE?
 PLA
 CMP #$A0
 BEQ IN1
 PHA
; STORE A SPACE
 LDA #$A0
 STA (GBASL),Y
; STORE CHAR ONE DOWN
 LDY V
 INY
 TYA
 JSR BASCALC
 LDY H
; GET FROM STACK
; NEXT CHAR RIGHT
 PLA
 STA (GBASL),Y
IN1 INY
 STY H
 CPY #$27
 BNE LOOP1
; NEXT ROW DOWN
; ZERO H
 LDY #$00
 STY H
; SET UP V
 LDY V
 CPY COUNT
 BEQ IN3
 LDY V
 DEY
 STY V
;FORCE BRANCH
 CLC
 BCC LOOP1
; DO AGAIN
IN3 LDY COUNT
 INY
 STY COUNT
 CPY #$17
 BNE IN2
; EXIT
 LDY #$00
 STY H
 LDY #$16
 STY V
L2 LDA V
 JSR BASCALC
L1 LDY H
 LDA #$00
 STA (GBASL),Y
 INC H
 CMP #$27
 BNE L1
 RTS


